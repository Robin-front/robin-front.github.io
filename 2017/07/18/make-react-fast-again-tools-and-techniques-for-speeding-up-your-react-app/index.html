<!DOCTYPE html><html class="theme-next muse use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="ezF4b6TIq3nrF8BJmQrK_v9BmJnUQfVVPB4xBYo7AD8"><meta name="baidu-site-verification" content="T2V9h2EnoE"><link href="https://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css"><link href="https://unpkg.com/gitalk/dist/gitalk.css" rel="stylesheet" type="text/css"><link href="https://cdn.staticfile.org/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css"><meta name="keywords" content="react,tools,"><link rel="alternate" href="/atom.xml" title="三寸稚笔" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2"><meta name="apple-mobile-web-app-status-bar-style" content="white"><link rel="apple-touch-icon" href="/touch-icon.png?v=5.1.2"><meta name="description" content="高性能 react：3种加快应用程序的新工具react 通常很快，但很容易造成导致性能问题的小错误。缓慢的组件安装，深层组件树和不必要的渲染循环可以快速添加到一个感觉缓慢的应用程序。幸运的是，有很多工具，有些甚至内置于 React，这有助于诊断性能问题。在这篇文章中，我将强调使 React 应用程序更快速的工具和技术。"><meta name="keywords" content="react,tools"><meta property="og:type" content="article"><meta property="og:title" content="高性能 react：3种加快应用程序的新工具"><meta property="og:url" content="http://robin-front.github.io/2017/07/18/make-react-fast-again-tools-and-techniques-for-speeding-up-your-react-app/index.html"><meta property="og:site_name" content="三寸稚笔"><meta property="og:description" content="高性能 react：3种加快应用程序的新工具react 通常很快，但很容易造成导致性能问题的小错误。缓慢的组件安装，深层组件树和不必要的渲染循环可以快速添加到一个感觉缓慢的应用程序。幸运的是，有很多工具，有些甚至内置于 React，这有助于诊断性能问题。在这篇文章中，我将强调使 React 应用程序更快速的工具和技术。每个部分还有一个互动，（希望）有趣的演示！"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="http://robin-front.github.io/js/lazyload-plugin/loading.svg"><meta property="og:image" content="http://robin-front.github.io/js/lazyload-plugin/loading.svg"><meta property="og:image" content="http://robin-front.github.io/js/lazyload-plugin/loading.svg"><meta property="og:image" content="http://robin-front.github.io/js/lazyload-plugin/loading.svg"><meta property="og:image" content="http://robin-front.github.io/js/lazyload-plugin/loading.svg"><meta property="og:updated_time" content="2017-07-18T07:25:02.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="高性能 react：3种加快应用程序的新工具"><meta name="twitter:description" content="高性能 react：3种加快应用程序的新工具react 通常很快，但很容易造成导致性能问题的小错误。缓慢的组件安装，深层组件树和不必要的渲染循环可以快速添加到一个感觉缓慢的应用程序。幸运的是，有很多工具，有些甚至内置于 React，这有助于诊断性能问题。在这篇文章中，我将强调使 React 应用程序更快速的工具和技术。每个部分还有一个互动，（希望）有趣的演示！"><meta name="twitter:image" content="http://robin-front.github.io/js/lazyload-plugin/loading.svg"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"5.1.2",sidebar:{position:"left",display:"post",offset:12,offset_float:12,b2t:!1,scrollpercent:!0,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://robin-front.github.io/2017/07/18/make-react-fast-again-tools-and-techniques-for-speeding-up-your-react-app/"><title>高性能 react：3种加快应用程序的新工具 | 三寸稚笔</title><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8386186071288063",enable_page_level_ads:!0})</script><script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga"),ga("create","UA-74634898-1","auto"),ga("send","pageview")</script><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?51f2c21567935649debac704a10c43f1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">三寸稚笔</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description"></h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-travel"><a href="/tags/travel/" rel="section"><i class="menu-item-icon fa fa-fw fa-plane"></i><br>旅行</a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益404</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-rss"></i><br>站点地图</a></li><li class="menu-item menu-item-subscribe"><a href="http://eepurl.com/c-SI5f" rel="section"><i class="menu-item-icon fa fa-fw fa-envelope"></i><br>订阅</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://robin-front.github.io/2017/07/18/make-react-fast-again-tools-and-techniques-for-speeding-up-your-react-app/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="robin"><meta itemprop="description" content=""><meta itemprop="image" content="https://avatars2.githubusercontent.com/u/6723674?v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="三寸稚笔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">高性能 react：3种加快应用程序的新工具</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-18T15:25:02+08:00">2017-07-18 </time><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于&#58;</span> <time title="更新于" itemprop="dateModified" datetime="2017-07-18T15:25:02+08:00">2017-07-18 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span> </a></span></span><span class="post-meta-divider">|</span> <span class="page-pv"><i class="fa fa-file-o"></i> <span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">2,233 </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">8</span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="高性能-react：3种加快应用程序的新工具"><a href="#高性能-react：3种加快应用程序的新工具" class="headerlink" title="高性能 react：3种加快应用程序的新工具"></a>高性能 react：3种加快应用程序的新工具</h1><p>react 通常很快，但很容易造成导致性能问题的小错误。缓慢的组件安装，深层组件树和不必要的渲染循环可以快速添加到一个感觉缓慢的应用程序。</p><p>幸运的是，有很多工具，有些甚至内置于 React，这有助于诊断性能问题。在这篇文章中，我将强调使 React 应用程序更快速的工具和技术。每个部分还有一个互动，（希望）有趣的演示！<a id="more"></a></p><h2 id="工具＃1：性能时间表"><a href="#工具＃1：性能时间表" class="headerlink" title="工具＃1：性能时间表"></a>工具＃1：性能时间表</h2><p>React 15.4.0引入了一个新的性能时间轴功能，可让您准确了解组件的挂载，更新和卸载。它还可以让您可视化相关的组件生命周期。</p><p>注意：现在，此功能仅适用于Chrome，Edge和IE，因为它利用了尚未在所有浏览器中实现的用户时间轴API（User Timing API）。</p><h3 id="怎么运行的"><a href="#怎么运行的" class="headerlink" title="怎么运行的"></a>怎么运行的</h3><ul><li>打开你的应用程序并附加查询参数：<code>react_perf</code>。例如，<code>http://localhost:3000?react_perf</code></li><li>打开Chrome DevTools 性能选项卡，然后按 <strong>记录（Record）</strong>。</li><li>执行您要分析的操作。</li><li>停止记录</li><li>在 <code>User Timing</code> 下检查可视化。</li></ul><p><img src="/js/lazyload-plugin/loading.svg" alt="https://cdn-images-1.medium.com/max/1000/1*cOO5vUnbkdDUcqMW8ebJqA.png" data-original="https://cdn-images-1.medium.com/max/1000/1*cOO5vUnbkdDUcqMW8ebJqA.png"></p><h3 id="了解输出"><a href="#了解输出" class="headerlink" title="了解输出"></a>了解输出</h3><p>每个彩色条显示组件正在做“工作”的时间。由于JavaScript是单线程的，每当组件正在加载或呈现时，它会阻止主线程，并阻止其他代码运行。</p><p>方括号中的文字<code>[update]</code>描述了组件生命周期的哪个部分正在发生。时间轴会分解每个步骤，因此您可以在<code>[componentDidMount]</code> <code>[componentWillReceiveProps]</code> <code>[ctor]</code>（构造函数）和 <code>[render]</code> 方法上看到细粒度的时序.</p><p>堆叠的条表示组件树。虽然在React中具有相当深的组件树是典型的，但如果要优化经常安装的组件，则可以帮助减少封装组件的数量，因为每个组件都会增加小的性能和内存损失。</p><p>这里有一点值得注意的是，时间表中的时间序列是用于开发构建React的，它比生产环境更慢。事实上，甚至性能时间表本身会减慢您的应用程序。虽然这些数字不应该被认为是真实表现的性能，但是不同组件之间的相对定时是准确的。此外，组件是否更新完全不依赖于生产环境上的构建。</p><h3 id="演示＃1"><a href="#演示＃1" class="headerlink" title="演示＃1"></a>演示＃1</h3><p>为了乐趣，我操纵了TodoMVC应用程序，出现一些严重的性能问题。你可以在<a href="https://perf-demo.firebaseapp.com/?react_perf" target="_blank" rel="noopener">这里试试看</a>。</p><p>要查看时间轴，请打开Chrome开发工具，转到“性能”选项卡，然后单击记录。然后在应用程序中添加一些TODO，停止录制并检查时间轴。看看是否可以发现哪些组件导致性能问题:)</p><h2 id="工具＃2：为什么更新"><a href="#工具＃2：为什么更新" class="headerlink" title="工具＃2：为什么更新"></a>工具＃2：为什么更新</h2><p>影响 React 中性能的最常见问题之一是不必要的渲染循环。默认情况下，即使他们的 props 没有改变，React 组件将在父级 render 时重新 render。</p><p>例如，如果我有一个这样的简单组件：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DumbComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span> &#123;this.props.value&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>加上父组件:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">DumbComponent</span> <span class="attr">value</span>=<span class="string">&#123;3&#125;</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>无论何时父组件 render，<code>DumbComponent</code> 都会重新 render，尽管其 <code>props</code> 没有改变。</p><p>通常，如果 render 运行，并且没有对虚拟DOM进行任何更改，则这是一个浪费的渲染循环，因为该 render 方法应该是纯的，并且没有任何副作用。在大规模的 React 应用程序中，检测发生这种情况的地方可能很棘手，但幸运的是，有一个可以帮助的工具！</p><h3 id="使用-why-did-you-update"><a href="#使用-why-did-you-update" class="headerlink" title="使用 why-did-you-update"></a>使用 why-did-you-update</h3><p><img src="/js/lazyload-plugin/loading.svg" alt="https://cdn-images-1.medium.com/max/1000/1*Lb4nr_WLwnLt63jUoszrnQ.png" data-original="https://cdn-images-1.medium.com/max/1000/1*Lb4nr_WLwnLt63jUoszrnQ.png"></p><p><code>why-did-you-update</code> 是一个挂接到 React 的库，并检测潜在的不必要的组件渲染。它检测组件的render方法何时被调用，尽管它的 <code>props</code> 没有改变。</p><h3 id="建立"><a href="#建立" class="headerlink" title="建立"></a>建立</h3><p>安装 <code>npm： npm i --save-dev why-did-you-update</code></p><p>在您的应用程序的任何地方添加此代码段：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span>) &#123;</div><div class="line">  <span class="keyword">const</span> &#123;whyDidYouUpdate&#125; = <span class="built_in">require</span>(<span class="string">'why-did-you-update'</span>)</div><div class="line">  whyDidYouUpdate(React)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>请注意，此工具在本地开发中非常出色，但确保在生产中已被禁用，因为它会减慢您的应用程序。</p><h3 id="了解输出-1"><a href="#了解输出-1" class="headerlink" title="了解输出"></a>了解输出</h3><p><code>why-did-you-update</code> 监视您的应用程序运行并记录可能会不必要地更改的组件。它允许您在渲染循环之前和之后看到 <code>props</code>，确定它可能是不必要的。</p><h3 id="演示＃2"><a href="#演示＃2" class="headerlink" title="演示＃2"></a>演示＃2</h3><p>为了演示<code>why-did-you-update</code>，我将库安装在 TodoMVC 应用程序的 Code Sandbox 上，这是一个在线 React 游戏场。打开浏览器控制台并添加一些 TODO 以查看输出。</p><p><a href="https://codesandbox.io/s/xGJP4QExn" target="_blank" rel="noopener">这是演示</a></p><blockquote><p>请注意，应用程序中的几个组件不必要地 render。尝试实现上述技术来防止不必要的渲染。如果正确完成，则<code>why-did-you-update</code>控制台中不应有输出。</p></blockquote><h2 id="工具＃3：反应开发工具"><a href="#工具＃3：反应开发工具" class="headerlink" title="工具＃3：反应开发工具"></a>工具＃3：反应开发工具</h2><p><img src="/js/lazyload-plugin/loading.svg" alt="https://cdn-images-1.medium.com/max/1000/1*1Ih6h8djFyH13tfFK3D1sw.png" data-original="https://cdn-images-1.medium.com/max/1000/1*1Ih6h8djFyH13tfFK3D1sw.png"></p><p>React 开发者工具 Chrome 扩展程序具有可视化组件更新的内置功能。这有助于检测不必要的渲染循环。要使用它，首先请确保在<a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=zh-CN" target="_blank" rel="noopener">此处安装扩展</a>。</p><p>然后，点击Chrome DevTools中的“React”标签打开扩展程序，然后选中“Highlight Updates”。</p><p><img src="/js/lazyload-plugin/loading.svg" alt="https://cdn-images-1.medium.com/max/800/1*GP4vXvW3WO0vTbggDfus4Q.png" data-original="https://cdn-images-1.medium.com/max/800/1*GP4vXvW3WO0vTbggDfus4Q.png"></p><p>然后，只需使用你的应用程序。与各种组件交互，并观看 DevTools 工作的魔力。</p><h3 id="了解输出-2"><a href="#了解输出-2" class="headerlink" title="了解输出"></a>了解输出</h3><p>“react 开发人员工具”突出显示在给定时间点重新呈现的组件。根据更新的频率，使用不同的颜色。对于频繁更新的组件，蓝色显示不频繁更新，按更新频率依次为绿色，黄色和红色。</p><p>看到黄色或红色不一定是坏事。当调整滑块或触发频繁更新的其他UI元素时，可以预期。但是，如果您点击一个简单的按钮并看到红色，这可能意味着某些东西是错误的。该工具的目的是发现不必要的更新的组件。作为应用程序开发人员，您应该有一个一般的想法，哪些组件应该在给定的时间更新。</p><h3 id="演示＃3"><a href="#演示＃3" class="headerlink" title="演示＃3"></a>演示＃3</h3><p>为了演示组件突出显示，我安装了 TodoMVC 应用程序来不必要地更新某些组件。</p><p><a href="https://highlight-demo.firebaseapp.com/" target="_blank" rel="noopener">这是演示</a></p><p>打开上面的链接，然后打开 React Developer Tools 并启用更新突出显示。当您输入顶部文本输入时，您将看到所有 TODO 都不必要地突出显示。当您输入更快时，您将看到颜色更改以指示更频繁的更新。</p><h2 id="修复不必要的渲染"><a href="#修复不必要的渲染" class="headerlink" title="修复不必要的渲染"></a>修复不必要的渲染</h2><p>一旦识别出应用程序中不必要的重新渲染的组件，就会有一些简单的修复。</p><h3 id="使用PureComponent"><a href="#使用PureComponent" class="headerlink" title="使用PureComponent"></a>使用PureComponent</h3><p>在上面的例子中，<code>DumbComponent</code> 是它 props 的纯函数。也就是说，该组件只有在其 <code>props</code> 更改时才需要重新 render。React 有一种内置的特殊类型的组件，<code>PureComponent</code> 这个类型是为这个用例准备的。</p><p>而不是继承自 <code>React.Component</code>，请使用 <code>React.PureComponent</code>，如下所示：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DumbComponent</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span> &#123;this.props.value&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>然后，该组件只有在其 <code>props</code> 实际更改时才会重新 render。而已！</p><p>请注意，<code>PureComponent</code>做一个 <code>props</code> 的浅比较，所以如果你使用复杂的数据结构，它可能会错过一些 <code>props</code> 更改，而不是更新您的组件。</p><h3 id="实现-shouldComponentUpdate"><a href="#实现-shouldComponentUpdate" class="headerlink" title="实现 shouldComponentUpdate"></a>实现 shouldComponentUpdate</h3><p><code>shouldComponentUpdate</code> 是 render 任何一个 <code>props</code> 或 <code>state</code> 更改之前调用的组件方法。如果 <code>shouldComponentUpdate</code> 返回 <code>true</code>，render 将被调用，如果它返回 <code>false</code>，没有任何反应。</p><p>通过实现此方法，您可以指示 React 避免重新渲染给定的组件，当其 <code>props</code> 不更改的时候。</p><p>例如，我们可以像下面这样，在一个组件中实现一个 <code>shouldComponentUpdate</code> ：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DumbComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  shouldComponentUpdate(nextProps) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.props.value !== nextProps.value) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>foo<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="调试生产中的性能问题"><a href="#调试生产中的性能问题" class="headerlink" title="调试生产中的性能问题"></a>调试生产中的性能问题</h2><p>如果您在自己的机器上运行应用程序，“React Developer Tools”才能起作用。如果您有兴趣了解用户在生产中看到的性能问题，请尝试使用<a href="https://logrocket.com/" target="_blank" rel="noopener">LogRocket</a>。</p><p><img src="/js/lazyload-plugin/loading.svg" alt="https://cdn-images-1.medium.com/max/1000/1*s_rMyo6NbrAsP-XtvBaXFg.png" data-original="https://cdn-images-1.medium.com/max/1000/1*s_rMyo6NbrAsP-XtvBaXFg.png"></p><p><a href="https://logrocket.com/" target="_blank" rel="noopener">LogRocket</a> 就像是网络应用程序，记录 DVR 字面上 的一切，您网站上发生的。您可以使用错误或性能问题重播会话，而不是猜测为什么会出现问题，以快速了解根本原因。</p><p>LogRocket 为您的应用程序记录性能数据，Redux actions/state，日志，错误，网络请求/响应与标题+主体和浏览器元数据。它还在页面上记录HTML和CSS，重新创建即使是最复杂的单页应用程序的像素视频。</p><blockquote><p>【翻译原文链接】：<a href="https://medium.freecodecamp.org/make-react-fast-again-tools-and-techniques-for-speeding-up-your-react-app-7ad39d3c1b82" target="_blank" rel="noopener">https://medium.freecodecamp.org/make-react-fast-again-tools-and-techniques-for-speeding-up-your-react-app-7ad39d3c1b82</a></p></blockquote><script src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong> robin</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://robin-front.github.io/2017/07/18/make-react-fast-again-tools-and-techniques-for-speeding-up-your-react-app/" title="高性能 react：3种加快应用程序的新工具">http://robin-front.github.io/2017/07/18/make-react-fast-again-tools-and-techniques-for-speeding-up-your-react-app/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/react/" rel="tag"># react</a> <a href="/tags/tools/" rel="tag"># tools</a></div><h3>相关文章</h3><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-date">2017-07-17</div><div class="popular-posts-title"><h3><a href="/2017/07/17/react-redux-optimization/" title="Redux 并不慢，只是你使用姿势不对 —— 一份优化指南" rel="bookmark">Redux 并不慢，只是你使用姿势不对 —— 一份优化指南</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-date">2016-03-14</div><div class="popular-posts-title"><h3><a href="/2016/03/14/React-optimize-with-Immutable-js/" title="React应用性能优化之IMMUTABLE.JS" rel="bookmark">React应用性能优化之IMMUTABLE.JS</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-date">2016-04-19</div><div class="popular-posts-title"><h3><a href="/2016/04/19/React-v15-0-upgrade-guide/" title="React-v15.0升级指南" rel="bookmark">React-v15.0升级指南</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-date">2017-05-30</div><div class="popular-posts-title"><h3><a href="/2017/05/30/WTF-JSX/" title="JSX是什么鬼(WTF-is-JSX)" rel="bookmark">JSX是什么鬼(WTF-is-JSX)</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-date">2017-07-06</div><div class="popular-posts-title"><h3><a href="/2017/07/06/react-pattern-extract-child-components-to-avoid-binding/" title="react性能优化：提取子组件中额外的事件绑定" rel="bookmark">react性能优化：提取子组件中额外的事件绑定</a></h3></div></li></ul><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2017/07/17/react-redux-optimization/" rel="next" title="Redux 并不慢，只是你使用姿势不对 —— 一份优化指南"><i class="fa fa-chevron-left"></i> Redux 并不慢，只是你使用姿势不对 —— 一份优化指南</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2017/07/22/borawan-island-Pagbilao-beach-and-Dampalitan-island/" rel="prev" title="Borawan island、Pagbilao Beach 和 Dampalitan island旅行预算指南——一个周末三个沙滩">Borawan island、Pagbilao Beach 和 Dampalitan island旅行预算指南——一个周末三个沙滩 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="gitalk-container"></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview">站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="https://avatars2.githubusercontent.com/u/6723674?v=3&s=460" alt="robin"><p class="site-author-name" itemprop="name">robin</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">87</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">8</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">101</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/robin-front" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:lb.robin1991@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://twitter.com/lb_robin" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i>Twitter</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#高性能-react：3种加快应用程序的新工具"><span class="nav-number">1.</span> <span class="nav-text">高性能 react：3种加快应用程序的新工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#工具＃1：性能时间表"><span class="nav-number">1.1.</span> <span class="nav-text">工具＃1：性能时间表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#怎么运行的"><span class="nav-number">1.1.1.</span> <span class="nav-text">怎么运行的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#了解输出"><span class="nav-number">1.1.2.</span> <span class="nav-text">了解输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#演示＃1"><span class="nav-number">1.1.3.</span> <span class="nav-text">演示＃1</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#工具＃2：为什么更新"><span class="nav-number">1.2.</span> <span class="nav-text">工具＃2：为什么更新</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-why-did-you-update"><span class="nav-number">1.2.1.</span> <span class="nav-text">使用 why-did-you-update</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#建立"><span class="nav-number">1.2.2.</span> <span class="nav-text">建立</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#了解输出-1"><span class="nav-number">1.2.3.</span> <span class="nav-text">了解输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#演示＃2"><span class="nav-number">1.2.4.</span> <span class="nav-text">演示＃2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#工具＃3：反应开发工具"><span class="nav-number">1.3.</span> <span class="nav-text">工具＃3：反应开发工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#了解输出-2"><span class="nav-number">1.3.1.</span> <span class="nav-text">了解输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#演示＃3"><span class="nav-number">1.3.2.</span> <span class="nav-text">演示＃3</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修复不必要的渲染"><span class="nav-number">1.4.</span> <span class="nav-text">修复不必要的渲染</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用PureComponent"><span class="nav-number">1.4.1.</span> <span class="nav-text">使用PureComponent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现-shouldComponentUpdate"><span class="nav-number">1.4.2.</span> <span class="nav-text">实现 shouldComponentUpdate</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#调试生产中的性能问题"><span class="nav-number">1.5.</span> <span class="nav-text">调试生产中的性能问题</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2014 &mdash; <span itemprop="copyrightYear">2017</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">robin</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span class="post-meta-item-text">Site words total count&#58;</span> <span title="Site words total count">104.0k</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div><span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.2</div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i> <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> </span><span class="site-pv"><i class="fa fa-eye"></i> <span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="https://cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js"></script><script type="text/javascript" src="https://cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script><script type="text/javascript" src="https://cdn.staticfile.org/velocity/1.2.1/velocity.min.js"></script><script type="text/javascript" src="https://cdn.bootcss.com/velocity/1.2.1/velocity.ui.min.js"></script><script type="text/javascript" src="https://cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script type="text/javascript" src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script><script type="text/javascript">var gitalk=new Gitalk({clientID:"470b9e9d99d37489877f",clientSecret:"c319e368fd485f89601b4c2c0cee649bd9cf97cd",repo:"robin-front.github.io",owner:"Robin-front",admin:["Robin-front"],distractionFreeMode:!0});gitalk.render("gitalk-container")</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></body></html>