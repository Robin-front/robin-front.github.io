NexT.utils=NexT.$u={wrapImageWithFancyBox:function(){$(".content img").not("[hidden]").not(".group-picture img, .post-gallery img").each(function(){var i=$(this);var t=i.attr("title");var e=i.parent("a");if(e.size()<1){e=i.wrap('<a href="'+this.getAttribute("src")+'"></a>').parent("a")}e.addClass("fancybox fancybox.image");e.attr("rel","group");if(t){e.append('<p class="image-caption">'+t+"</p>");e.attr("title",t)}});$(".fancybox").fancybox({helpers:{overlay:{locked:false}}})},lazyLoadPostsImages:function(){$("#posts").find("img").lazyload({placeholder:"/images/loading.gif",effect:"fadeIn"})},registerESCKeyEvent:function(){$(document).on("keyup",function(i){var t=i.which===27&&$(".search-popup").is(":visible");if(t){$(".search-popup").hide();$(".search-popup-overlay").remove();$("body").css("overflow","")}})},registerBackToTop:function(){var i=50;var t=$(".back-to-top");$(window).on("scroll",function(){t.toggleClass("back-to-top-on",window.pageYOffset>i);var e=$(window).scrollTop();var o=$(document).height();var n=$(window).height();var s=e/(o-n);var a=Math.round(s*100);$("#scrollpercent>span").html(a)});t.on("click",function(){$("body").velocity("scroll")})},embeddedVideoTransformer:function(){var i=$("iframe");var t=["www.youtube.com","player.vimeo.com","player.youku.com","music.163.com","www.tudou.com"];var e=new RegExp(t.join("|"));i.each(function(){var i=this;var t=$(this);var s=o(t);var a;if(this.src.search(e)>0){var r=n(s.width,s.height);t.width("100%").height("100%").css({position:"absolute",top:"0",left:"0"});var d=document.createElement("div");d.className="fluid-vids";d.style.position="relative";d.style.marginBottom="20px";d.style.width="100%";d.style.paddingTop=r+"%";var l=i.parentNode;l.insertBefore(d,i);d.appendChild(i);if(this.src.search("music.163.com")>0){a=o(t);var c=a.width>s.width||a.height<s.height;if(c){d.style.paddingTop=n(a.width,s.height)+"%"}}}});function o(i){return{width:i.width(),height:i.height()}}function n(i,t){return t/i*100}},addActiveClassToMenuItem:function(){var i=window.location.pathname;i=i==="/"?i:i.substring(0,i.length-1);$('.menu-item a[href="'+i+'"]').parent().addClass("menu-item-active")},hasMobileUA:function(){var i=window.navigator;var t=i.userAgent;var e=/iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;return e.test(t)},isTablet:function(){return window.screen.width<992&&window.screen.width>767&&this.hasMobileUA()},isMobile:function(){return window.screen.width<767&&this.hasMobileUA()},isDesktop:function(){return!this.isTablet()&&!this.isMobile()},escapeSelector:function(i){return i.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")},displaySidebar:function(){if(!this.isDesktop()||this.isPisces()){return}$(".sidebar-toggle").trigger("click")},isMist:function(){return CONFIG.scheme==="Mist"},isPisces:function(){return CONFIG.scheme==="Pisces"},getScrollbarWidth:function(){var i=$("<div />").addClass("scrollbar-measure").prependTo("body");var t=i[0];var e=t.offsetWidth-t.clientWidth;i.remove();return e},needAffix:function(){return this.isPisces()}};$(document).ready(function(){NexT.motion={};var i={lines:[],push:function(i){this.lines.push(i)},init:function(){this.lines.forEach(function(i){i.init()})},arrow:function(){this.lines.forEach(function(i){i.arrow()})},close:function(){this.lines.forEach(function(i){i.close()})}};function t(i){this.el=$(i.el);this.status=$.extend({},{init:{width:"100%",opacity:1,left:0,rotateZ:0,top:0}},i.status)}t.prototype.init=function(){this.transform("init")};t.prototype.arrow=function(){this.transform("arrow")};t.prototype.close=function(){this.transform("close")};t.prototype.transform=function(i){this.el.velocity("stop").velocity(this.status[i])};var e=new t({el:".sidebar-toggle-line-first",status:{arrow:{width:"50%",rotateZ:"-45deg",top:"2px"},close:{width:"100%",rotateZ:"-45deg",top:"5px"}}});var o=new t({el:".sidebar-toggle-line-middle",status:{arrow:{width:"90%"},close:{opacity:0}}});var n=new t({el:".sidebar-toggle-line-last",status:{arrow:{width:"50%",rotateZ:"45deg",top:"-2px"},close:{width:"100%",rotateZ:"45deg",top:"-5px"}}});i.push(e);i.push(o);i.push(n);var s="320px";var a=0;var r={toggleEl:$(".sidebar-toggle"),sidebarEl:$(".sidebar"),isSidebarVisible:false,init:function(){this.toggleEl.on("click",this.clickHandler.bind(this));this.toggleEl.on("mouseenter",this.mouseEnterHandler.bind(this));this.toggleEl.on("mouseleave",this.mouseLeaveHandler.bind(this));$(document).on("sidebar.isShowing",function(){NexT.utils.isDesktop()&&$("body").velocity("stop").velocity({paddingRight:s},a)}).on("sidebar.isHiding",function(){})},clickHandler:function(){this.isSidebarVisible?this.hideSidebar():this.showSidebar();this.isSidebarVisible=!this.isSidebarVisible},mouseEnterHandler:function(){if(this.isSidebarVisible){return}i.arrow()},mouseLeaveHandler:function(){if(this.isSidebarVisible){return}i.init()},showSidebar:function(){var t=this;i.close();this.sidebarEl.velocity("stop").velocity({width:s},{display:"block",duration:a,begin:function(){$(".sidebar .motion-element").velocity("transition.slideRightIn",{stagger:50,drag:true,complete:function(){t.sidebarEl.trigger("sidebar.motion.complete")}})},complete:function(){t.sidebarEl.addClass("sidebar-active");t.sidebarEl.trigger("sidebar.didShow")}});this.sidebarEl.trigger("sidebar.isShowing")},hideSidebar:function(){NexT.utils.isDesktop()&&$("body").velocity("stop").velocity({paddingRight:0});this.sidebarEl.find(".motion-element").velocity("stop").css("display","none");this.sidebarEl.velocity("stop").velocity({width:0},{display:"none"});i.init();this.sidebarEl.removeClass("sidebar-active");this.sidebarEl.trigger("sidebar.isHiding");if(!!$(".post-toc-wrap")){if($(".site-overview").css("display")==="block"){$(".post-toc-wrap").removeClass("motion-element")}}}};r.init();NexT.motion.integrator={queue:[],cursor:-1,add:function(i){this.queue.push(i);return this},next:function(){this.cursor++;var i=this.queue[this.cursor];$.isFunction(i)&&i(NexT.motion.integrator)},bootstrap:function(){this.next()}};NexT.motion.middleWares={logo:function(i){var t=[];var e=$(".brand");var o=$(".site-title");var n=$(".site-subtitle");var s=$(".logo-line-before i");var a=$(".logo-line-after i");e.size()>0&&t.push({e:e,p:{opacity:1},o:{duration:200}});NexT.utils.isMist()&&d([s,a])&&t.push(r(s,"100%"),r(a,"-100%"));d(o)&&t.push({e:o,p:{opacity:1,top:0},o:{duration:200}});d(n)&&t.push({e:n,p:{opacity:1,top:0},o:{duration:200}});if(t.length>0){t[t.length-1].o.complete=function(){i.next()};$.Velocity.RunSequence(t)}else{i.next()}function r(i,t){return{e:$(i),p:{translateX:t},o:{duration:500,sequenceQueue:false}}}function d(i){i=Array.isArray(i)?i:[i];return i.every(function(i){return $.isFunction(i.size)&&i.size()>0})}},menu:function(i){$(".menu-item").velocity("transition.slideDownIn",{display:null,duration:200,complete:function(){i.next()}})},postList:function(i){var t=$(".post");var e=t.size()>0;e?o():i.next();function o(){var e=window.postMotionOptions||{stagger:100,drag:true};e.complete=function(){i.next()};t.velocity("transition.slideDownIn",e)}},sidebar:function(i){if(CONFIG.sidebar.display==="always"){NexT.utils.displaySidebar()}i.next()}}});$(document).ready(function(){$(document).trigger("bootstrap:before");NexT.utils.isMobile()&&window.FastClick.attach(document.body);NexT.utils.lazyLoadPostsImages();NexT.utils.registerESCKeyEvent();NexT.utils.registerBackToTop();$(".site-nav-toggle button").on("click",function(){var i=$(".site-nav");var t="site-nav-on";var e=i.hasClass(t);var o=e?"slideUp":"slideDown";var n=e?"removeClass":"addClass";i.stop()[o]("fast",function(){i[n](t)})});CONFIG.fancybox&&NexT.utils.wrapImageWithFancyBox();NexT.utils.embeddedVideoTransformer();NexT.utils.addActiveClassToMenuItem();NexT.motion.integrator.add(NexT.motion.middleWares.logo).add(NexT.motion.middleWares.menu).add(NexT.motion.middleWares.postList).add(NexT.motion.middleWares.sidebar);$(document).trigger("motion:before");CONFIG.motion&&NexT.motion.integrator.bootstrap();$(document).trigger("bootstrap:after");setTimeout(function(){var i=function(i){return'<div align="center"><ins class="adsbygoogle"'+'style="display:block"'+'data-ad-client="ca-pub-8386186071288063"'+'data-ad-slot="'+i+'"'+'data-ad-format="auto"></ins></div>'};var t=function(i){return'<ins class="adsbygoogle"'+'style="display:inline-block;width:300px;height:250px"'+'data-ad-client="ca-pub-8386186071288063"'+'data-ad-slot="">'+i+"</ins>"};var e=function(i){return'<ins class="adsbygoogle"'+'style="display:inline-block;width:336px;height:280px"'+'data-ad-client="ca-pub-8386186071288063"'+'data-ad-slot="'+i+'"></ins>'};var o=function(t,e,o){t[o](i(e));(adsbygoogle=window.adsbygoogle||[]).push({})};if(NexT.utils.isDesktop()){o($("#sidebar").find(".sidebar-inner"),6065100430,"append");var n=$(e(1697862430));$("#comments").before(n);n.wrap('<div style="float:left;"></div>');(adsbygoogle=window.adsbygoogle||[]).push({});var s=$(e(9860257630));$("#comments").before(s);s.wrap('<div style="float:right;"></div>');(adsbygoogle=window.adsbygoogle||[]).push({})}},0);$("img[data-original]").each(function(i,t){var e=$(this),o=e.parent(),n=e.attr("data-original");o.attr("href",n)})});if(window.location.href.indexOf("http://robin-front.github.io")!==-1){window.location.href="https://robin-front.github.io"+window.location.href.substr(28)}if(window.applicationCache.status==window.applicationCache.UPDATEREADY){window.applicationCache.update()}