<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ä½¿ç”¨RXJSç»„åˆã€è¿‡æ»¤å’Œæ˜ å°„æ•°æ®æµçš„å€¼]]></title>
    <url>%2F2017%2F06%2F05%2F%E4%BD%BF%E7%94%A8RXJS%E7%BB%84%E5%90%88%E3%80%81%E8%BF%87%E6%BB%A4%E5%92%8C%E6%98%A0%E5%B0%84%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E5%80%BC%2F</url>
    <content type="text"><![CDATA[æŸ¥è¯¢å¯è§‚æµ‹åºåˆ—åœ¨äº‹ä»¶æ¡¥æŽ¥ ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†çŽ°æœ‰çš„DOMå’ŒNode.jsäº‹ä»¶è½¬æ¢æˆå¯è§‚å¯Ÿçš„åºåˆ—ä»¥è®¢é˜…å®ƒä»¬ã€‚åœ¨æœ¬ä¸»é¢˜ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠå¯è§‚å¯Ÿåºåˆ—çš„çˆ¶çº§classè§†ä¸ºIObservableå¯¹è±¡ï¼Œå…¶ä¸­Rxç»„ä»¶æä¾›é€šç”¨LINQæ“ä½œç¬¦æ¥æ“ä½œè¿™äº›å¯¹è±¡ã€‚å¤§å¤šæ•°æ“ä½œç¬¦èŽ·å–å¯è§‚å¯Ÿçš„åºåˆ—å¹¶å¯¹å…¶æ‰§è¡Œä¸€äº›é€»è¾‘å¹¶è¾“å‡ºå¦ä¸€ä¸ªå¯è§‚æµ‹åºåˆ—ã€‚å¦å¤–ï¼Œä»Žä»£ç ç¤ºä¾‹å¯ä»¥çœ‹å‡ºï¼Œç”šè‡³å¯ä»¥åœ¨æºåºåˆ—ä¸Šä½¿ç”¨å¤šä¸ªè¿ç®—ç¬¦ï¼Œæœ€ç»ˆå°†ç»“æžœåºåˆ—è°ƒæ•´åˆ°æ‚¨çš„ç¡®åˆ‡éœ€æ±‚ã€‚ æœ¬æ–‡ç¿»è¯‘åœ¨ï¼š RXJSä¸­æ–‡æ–‡æ¡£ ä½¿ç”¨ä¸åŒçš„è¿ç®—ç¬¦æˆ‘ä»¬å·²ç»åœ¨ä»¥å‰çš„ä¸»é¢˜ä¸­ä½¿ç”¨createå’Œrangeè¿ç®—ç¬¦æ¥åˆ›å»ºå’Œè¿”å›žç®€å•çš„åºåˆ—ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨fromEventå’ŒfromEventPatternè¿ç®—ç¬¦å°†çŽ°æœ‰äº‹ä»¶è½¬æ¢æˆå¯è§‚å¯Ÿçš„åºåˆ—ã€‚åœ¨æœ¬ä¸»é¢˜ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å…¶ä»–Observableç±»åž‹çš„è¿ç®—ç¬¦ï¼Œä»¥ä¾¿å¯ä»¥è¿‡æ»¤ï¼Œåˆ†ç»„å’Œè½¬æ¢æ•°æ®ã€‚è¿™äº›è¿ç®—ç¬¦å°†å¯è§‚å¯Ÿåˆ°çš„åºåˆ—ä½œä¸ºè¾“å…¥ï¼Œå¹¶ç”Ÿæˆè¾“å‡ºå¦ä¸€ä¸ªå¯è§‚å¯Ÿåºåˆ—ã€‚ ç»„åˆä¸åŒåºåˆ—åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¼šç ”ç©¶å°†å„ç§å¯è§‚å¯Ÿåºåˆ—ç»„åˆæˆå•ä¸ªå¯è§‚å¯Ÿåºåˆ—çš„æ“ä½œç¬¦ã€‚è¯·æ³¨æ„ï¼Œå½“æˆ‘ä»¬ç»„åˆåºåˆ—æ—¶ï¼Œæ•°æ®ä¸ä¼šè¢«è½¬æ¢ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Concatè¿ç®—ç¬¦å°†ä¸¤ä¸ªåºåˆ—ç»„åˆæˆä¸€ä¸ªåºåˆ—å¹¶è®¢é˜…å®ƒã€‚ä¸ºäº†è¯´æ˜Žçš„ç›®çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨éžå¸¸ç®€å•çš„range(x, y)è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªä»Žxå¼€å§‹çš„æ•´æ•°åºåˆ—ï¼Œç„¶åŽäº§ç”Ÿyä¸ªåºåˆ—æ•°å­—ã€‚ 123456789101112var source1 = Rx.Observable.range(1, 3);var source2 = Rx.Observable.range(1, 3);source1.concat(source2) .subscribe(console.log.bind(console));// =&gt; 1// =&gt; 2// =&gt; 3// =&gt; 1// =&gt; 2// =&gt; 3 æ³¨æ„ï¼Œç»“æžœåºåˆ—æ˜¯1,2,3,1,2,3ã€‚è¿™æ˜¯å› ä¸ºå½“æ‚¨ä½¿ç”¨concatè¿ç®—ç¬¦æ—¶ï¼Œç¬¬äºŒä¸ªåºåˆ—ï¼ˆsource2ï¼‰å°†åœ¨ç¬¬ä¸€ä¸ªåºåˆ—ï¼ˆsource1ï¼‰å®ŒæˆæŽ¨é€å…¶æ‰€æœ‰å€¼ä¹‹åŽæ‰ä¼šæ¿€æ´»ã€‚åªæœ‰åœ¨source1å®Œæˆä¹‹åŽï¼Œsource2æ‰ä¼šå°†å€¼æŽ¨é€åˆ°æœ€åŽçš„åºåˆ—ã€‚ç„¶åŽï¼Œè®¢é˜…è€…å°†ä»Žå¾—åˆ°çš„åºåˆ—ä¸­èŽ·å–æ‰€æœ‰å€¼ã€‚ ä¸Žmerge æ“ä½œç¬¦è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æžœè¿è¡Œä»¥ä¸‹ç¤ºä¾‹ä»£ç ï¼Œæ‚¨å°†èŽ·å¾—1,1,2,2,3,3ã€‚è¿™æ˜¯å› ä¸ºä¸¤ä¸ªåºåˆ—åŒæ—¶å¤„äºŽæ´»åŠ¨çŠ¶æ€ï¼Œå¹¶ä¸”å€¼åœ¨æ•°æ®æºä¸­å‘ç”Ÿæ—¶è¢«æŽ¨å‡ºã€‚ç»“æžœåºåˆ—ä»…åœ¨æœ€åŽä¸€ä¸ªæ•°æ®æºå®ŒæˆæŽ¨é€å€¼æ—¶å®Œæˆã€‚ 123456789101112var source1 = Rx.Observable.range(1, 3);var source2 = Rx.Observable.range(1, 3);source1.merge(source2) .subscribe(console.log.bind(console));// =&gt; 1// =&gt; 1// =&gt; 2// =&gt; 2// =&gt; 3// =&gt; 3 catch æ“ä½œç¬¦å¯ä»¥è¿›è¡Œå¦ä¸€ä¸ªæ¯”è¾ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æžœsource1å®Œæˆæ²¡æœ‰ä»»ä½•é”™è¯¯ï¼Œé‚£ä¹ˆsource2å°†ä¸ä¼šå¯åŠ¨ã€‚å› æ­¤ï¼Œå¦‚æžœè¿è¡Œä»¥ä¸‹ç¤ºä¾‹ä»£ç ï¼Œåˆ™èŽ·å¾—1,2,3å› ä¸ºsource2ï¼ˆäº§ç”Ÿ4,5,6ï¼‰ï¼‰è¢«å¿½ç•¥ã€‚ 123456789var source1 = Rx.Observable.range(1, 3);var source2 = Rx.Observable.range(4, 3);source1.catch(source2) .subscribe(console.log.bind(console));// =&gt; 1// =&gt; 2// =&gt; 3 æœ€åŽï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹onErrorResumeNextã€‚å³ä½¿ç”±äºŽé”™è¯¯å¯¼è‡´source1æ— æ³•å®Œæˆï¼Œè¯¥æ“ä½œç¬¦ä¹Ÿå°†ç§»åŠ¨åˆ°source2ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œå³ä½¿source1è¡¨ç¤ºé€šè¿‡ä½¿ç”¨throwè¿ç®—ç¬¦ç»ˆæ­¢å¼‚å¸¸çš„åºåˆ—ï¼Œç”¨æˆ·å°†æŽ¥æ”¶source2å‘å¸ƒçš„å€¼ï¼ˆ1,2,3ï¼‰ã€‚å› æ­¤ï¼Œå¦‚æžœæ‚¨é¢„æœŸåˆ°ä»»ä½•ä¸€ä¸ªæºåºåˆ—äº§ç”Ÿä»»ä½•é”™è¯¯ï¼Œé‚£ä¹ˆä½¿ç”¨å®ƒonErrorResumeNextæ¥ä¿è¯ç”¨æˆ·ä»ç„¶ä¼šæ”¶åˆ°ä¸€äº›å€¼æ˜¯æ›´å®‰å…¨çš„ã€‚ 123456789var source1 = Rx.Observable.throw(new Error('An error has occurred.'));var source2 = Rx.Observable.range(1, 3);source1.onErrorResumeNext(source2) .subscribe(console.log.bind(console));// =&gt; 1// =&gt; 2// =&gt; 3 æ˜ å°„selectæˆ– map æ“ä½œç¬¦å°†å¯è§‚å¯Ÿåˆ°çš„ä¸€ä¸ªåºåˆ—çš„æ¯ä¸ªå…ƒç´ è½¬æ¢æˆå¦ä¸€ç§å½¢å¼ã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ç³»åˆ—å­—ç¬¦ä¸²æ˜ å°„åˆ°ä¸€ç³»åˆ—è¡¨ç¤ºé•¿åº¦çš„æ•´æ•°ä¸­ã€‚ 123456789101112var array = ['Reactive', 'Extensions', 'RxJS'];var seqString = Rx.Observable.from(array);var seqNum = seqString.map(x =&gt; x.length);seqNum .subscribe(console.log.bind(console));// =&gt; 8// =&gt; 10// =&gt; 4 åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨â€œæ¡¥æŽ¥çŽ°æœ‰äº‹ä»¶â€ä¸»é¢˜ä¸­çœ‹åˆ°çš„äº‹ä»¶è½¬æ¢ç¤ºä¾‹çš„æ‰©å±•ï¼Œæˆ‘ä»¬ä½¿ç”¨selectæˆ–mapè¿ç®—ç¬¦å°†äº‹ä»¶å‚æ•°æŠ•å½±åˆ°xå’Œyç‚¹ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°†é¼ æ ‡ç§»åŠ¨äº‹ä»¶åºåˆ—è½¬æ¢ä¸ºå¯ä»¥è¿›ä¸€æ­¥è§£æžå’Œæ“ä½œçš„æ•°æ®ç±»åž‹ï¼Œå¦‚ä¸‹ä¸€ä¸ªâ€œè¿‡æ»¤â€éƒ¨åˆ†æ‰€ç¤ºã€‚ 123456var move = Rx.Observable.fromEvent(document, 'mousemove');var points = move.map(e =&gt; (&#123;x: e.clientX, y: e.clientY &#125;));points.subscribe( pos =&gt; console.log('Mouse at point ' + pos.x + ', ' + pos.y)); æœ€åŽï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹selectMany or flatMapè¿ç®—ç¬¦ã€‚selectManyæˆ–flatMapæ“ä½œç¬¦å…·æœ‰è®¸å¤šé‡è½½ï¼Œå…¶ä¸­ä¸€ä¸ªå°±æ˜¯éœ€è¦é€‰æ‹©å™¨å‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªé€‰æ‹©å™¨å‡½æ•°æ˜¯ç”±æ•°æ®æºæŽ¨å‡ºçš„æ¯ä¸ªå€¼åŽ»è°ƒç”¨çš„ã€‚å¯¹äºŽæ¯ä¸€ä¸ªå€¼ï¼Œé€‰æ‹©å™¨å°†å…¶æ˜ å°„æˆä¸€ä¸ªè¿·ä½ çš„å¯è§‚å¯Ÿåºåˆ—ã€‚æœ€åŽï¼ŒselectManyæˆ–è€…flatMapæ“ä½œç¬¦å°†æ‰€æœ‰è¿™äº›è¿·ä½ åºåˆ—æ‰å¹³åŒ–æˆå•ä¸ªç»“æžœåºåˆ—ï¼Œç„¶åŽå°†å…¶æŽ¨é€åˆ°ç”¨æˆ·ã€‚ åœ¨æ•°æ®æºå’Œç”±é€‰æ‹©å™¨å‡½æ•°äº§ç”Ÿçš„æ‰€æœ‰è¿·ä½ å¯è§‚å¯Ÿåºåˆ—éƒ½å·²ç»å®Œæˆä¹‹åŽï¼Œæºåºåˆ—è¿”å›žselectManyæˆ–flatMapå‘å¸ƒçš„onCompletedã€‚å½“å‘ç”Ÿæºæ•°æ®æµä¸­çš„é”™è¯¯æ—¶è§¦å‘onErrorï¼Œå½“ä¸€ä¸ªå¼‚å¸¸è¢«é€‰æ‹©å‡½æ•°æŠ›å‡ºï¼Œæˆ–è€…å½“åœ¨ä»»ä½•è¿·ä½ è§‚å¯Ÿåºåˆ—çš„å‘ç”Ÿäº†é”™è¯¯ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ•°æ®æºåºåˆ—ï¼Œæ¯5ç§’äº§ç”Ÿä¸€ä¸ªæ•´æ•°ï¼Œå¹¶å†³å®šä½¿ç”¨ç”Ÿæˆçš„å‰ä¸¤ä¸ªå€¼ï¼ˆä½¿ç”¨takeè¿ç®—ç¬¦ï¼‰ã€‚ç„¶åŽï¼Œæˆ‘ä»¬ä½¿ç”¨selectManyæˆ–è€…flatMapå¯¹å¦ä¸€ä¸ªåºåˆ—{100,101,102}è¿™äº›æ•´æ•°è¿›è¡Œæ˜ å°„ã€‚é€šè¿‡è¿™æ ·åšï¼Œäº§ç”Ÿä¸¤ä¸ªè¿·ä½ è§‚å¯Ÿåºåˆ—{100,101,102}å’Œ{100,101,102}ã€‚å®ƒä»¬æœ€ç»ˆå¹³å¦åŒ–æˆ{100,101,102,100,101,102}çš„å•ä¸ªæ•´æ•°æµï¼Œå¹¶è¢«æŽ¨é€åˆ°è§‚å¯Ÿè€…ã€‚ 12345678910111213141516var source1 = Rx.Observable.interval(5000).take(2);var proj = Rx.Observable.range(100, 3);var resultSeq = source1.flatMap(proj);var subscription = resultSeq.subscribe( x =&gt; console.log('onNext: %s', x), e =&gt; console.log('onError: %s', e.message), () =&gt; console.log('onCompleted'));// =&gt; onNext: 100// =&gt; onNext: 101// =&gt; onNext: 102// =&gt; onNext: 100// =&gt; onNext: 101// =&gt; onNext: 102// =&gt; onCompleted è¿‡æ»¤åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨generate è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªç®€å•çš„å¯è§‚å¯Ÿæ•°å­—åºåˆ—ã€‚è¯¥generateæ“ä½œç¬¦æœ‰å‡ ä¸ªç‰ˆæœ¬ï¼ŒåŒ…æ‹¬æœ‰ç›¸å¯¹å’Œç»å¯¹æ—¶é—´è°ƒåº¦ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œå®ƒéœ€è¦åˆå§‹çŠ¶æ€ï¼ˆåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ä¸º0ï¼‰ï¼Œä¸€ä¸ªæ¡ä»¶å‡½æ•°ç»ˆæ­¢ï¼ˆå°‘äºŽ10æ¬¡ï¼‰ï¼Œè¿­ä»£å™¨ï¼ˆ+1ï¼‰ï¼Œç»“æžœé€‰æ‹©å™¨ï¼ˆå½“å‰å€¼çš„å¹³æ–¹å‡½æ•°ï¼‰ï¼‰å’Œæ‰“å°åªä½¿ç”¨å°äºŽ5çš„é‚£äº›ä½¿ç”¨filteræˆ–whereè¿ç®—ç¬¦ã€‚ 1234567891011121314151617var seq = Rx.Observable.generate( 0, i =&gt; i &lt; 10, i =&gt; i + 1, i =&gt; i * i);var source = seq.filter(n =&gt; n &lt; 5);var subscription = source.subscribe( x =&gt; console.log('onNext: %s', x), e =&gt; console.log('onError: %s', e.message), () =&gt; console.log('onCompleted'));// =&gt; onNext: 0// =&gt; onNext: 1// =&gt; onNext: 4// =&gt; onCompleted ä»¥ä¸‹ç¤ºä¾‹æ˜¯æœ¬ä¸»é¢˜å‰é¢å·²ç»çœ‹åˆ°çš„æ˜ å°„ç¤ºä¾‹çš„æ‰©å±•ã€‚åœ¨è¯¥ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨selectæˆ–mapè¿ç®—ç¬¦å°†äº‹ä»¶å‚æ•°æŠ•å½±åˆ°å…·æœ‰xå’Œyçš„ç‚¹ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨filteræˆ–whereå’Œselectæˆ–mapæ“ä½œç¬¦åªæŒ‘é€‰é‚£äº›é¼ æ ‡ç§»åŠ¨ï¼Œæˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é¼ æ ‡ç§»åŠ¨è¿‡æ»¤ï¼Œä»¥æ‰¾å‡ºåœ¨ç¬¬ä¸€å¹³åˆ†çº¿ï¼ˆå…¶ä¸­xå’Œyåæ ‡æ˜¯ç›¸ç­‰çš„ï¼‰ã€‚ 1234567var move = Rx.Observable.fromEvent(document, 'mousemove');var points = move.map(e =&gt; (&#123; x: e.clientX, y: e.clientY &#125;));var overfirstbisector = points.filter(pos =&gt; pos.x === pos.y);var movesub = overfirstbisector.subscribe(pos =&gt; console.log('mouse at ' + pos.x + ', ' pos.y)); åŸºäºŽæ—¶é—´çš„æ“ä½œæ‚¨å¯ä»¥ä½¿ç”¨ç¼“å†²åŒºè¿ç®—ç¬¦æ‰§è¡ŒåŸºäºŽæ—¶é—´çš„æ“ä½œã€‚ ç¼“å†²å¯è§‚å¯Ÿåºåˆ—æ„å‘³ç€å¯è§‚æµ‹åºåˆ—çš„å€¼åŸºäºŽæŒ‡å®šçš„æ—¶é—´æ®µæˆ–è®¡æ•°é˜ˆå€¼è¢«æ”¾å…¥ç¼“å†²åŒºã€‚è¿™åœ¨æ‚¨é¢„æœŸæœ‰å¤§é‡æ•°æ®è¢«åºåˆ—æŽ¨å‡ºçš„æƒ…å†µä¸‹ç‰¹åˆ«æœ‰ç”¨ï¼Œå¹¶ä¸”è®¢é˜…è€…æ²¡æœ‰èµ„æºæ¥å¤„ç†è¿™äº›å€¼ã€‚é€šè¿‡åŸºäºŽæ—¶é—´æˆ–è®¡æ•°ç¼“å†²ç»“æžœï¼Œå¹¶ä¸”åªæœ‰åœ¨è¶…è¿‡æ¡ä»¶æ—¶æ‰è¿”å›žå€¼åºåˆ—ï¼ˆæˆ–è€…æºåºåˆ—å®Œæˆæ—¶ï¼‰ï¼Œç”¨æˆ·å¯ä»¥æŒ‰ç…§è‡ªå·±çš„é€Ÿåº¦å¤„ç†OnNextè°ƒç”¨ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªä»¥æ¯ç§’ä¸ºæ—¶é—´å•ä½çš„ç®€å•çš„æ•´æ•°åºåˆ—ã€‚ç„¶åŽæˆ‘ä»¬ä½¿ç”¨bufferWithCountè¿ç®—ç¬¦ï¼Œå¹¶æŒ‡å®šæ¯ä¸ªç¼“å†²åŒºå°†ä¿å­˜åºåˆ—ä¸­çš„5ä¸ªé¡¹ç›®ã€‚åœ¨onNextå½“ç¼“å†²åŒºå·²æ»¡è¢«è°ƒç”¨ã€‚ç„¶åŽæˆ‘ä»¬ä½¿ç”¨ç¼“å†²åŒºçš„æ€»å’ŒArray.reduceã€‚ç¼“å†²åŒºè‡ªåŠ¨åˆ·æ–°ï¼Œå¦ä¸€ä¸ªå¾ªçŽ¯å¼€å§‹ã€‚æ‰“å°è¾“å‡ºå°†ä¸º10,35,60 â€¦ï¼Œå…¶ä¸­10 = 0 + 1 + 2 + 3 + 4,35 = 5 + 6 + 7 + 8 + 9ç­‰ã€‚ 123456789101112var seq = Rx.Observable.interval(1000);var bufSeq = seq.bufferWithCount(5);bufSeq .map(arr =&gt; arr.reduce((acc, x) =&gt; acc + x, 0)) .subscribe(console.log.bind(console));// =&gt; 10// =&gt; 35// =&gt; 60... æˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ªæŒ‡å®šæ—¶é—´è·¨åº¦ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰çš„ç¼“å†²åŒºã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œç¼“å†²åŒºå°†ä¿å­˜ç´¯ç§¯3ç§’é’Ÿçš„é¡¹ç›®ã€‚æ‰“å°è¾“å‡ºå°†ä¸º3,12,21 â€¦å…¶ä¸­3 = 0 + 1 + 2,12 = 3 + 4 + 5ï¼Œä¾æ­¤ç±»æŽ¨ã€‚ 1234567var seq = Rx.Observable.interval(1000);var bufSeq = seq.bufferWithTime(3000);bufSeq .map(arr =&gt; arr.reduce((acc, x) =&gt; acc + x, 0)) .subscribe(console.log.bind(console)); è¯·æ³¨æ„ï¼Œå¦‚æžœæ‚¨ä½¿ç”¨ä»»ä½•ä¸€ä¸ªbuffer*æˆ–window*è¿ç®—ç¬¦ï¼Œåˆ™å¿…é¡»ç¡®ä¿åºåˆ—ä¸ä¸ºç©ºï¼Œç„¶åŽå†è¿‡æ»¤ã€‚ æŒ‰ç±»åˆ«æ“ä½œæŒ‰ç±»åˆ«åˆ’åˆ†çš„æ“ä½œç¬¦ä¸»é¢˜åˆ—å‡ºäº†æŒ‰ç±»åˆ«å®žæ–½çš„Observableçš„æ‰€æœ‰ä¸»è¦æ“ä½œç¬¦; å…·ä½“æ¥è¯´ï¼šåˆ›å»ºï¼Œè½¬æ¢ï¼Œåˆå¹¶ï¼ŒåŠŸèƒ½ï¼Œæ•°å­¦ï¼Œæ—¶é—´ï¼Œå¼‚å¸¸ï¼Œæ‚é¡¹ï¼Œé€‰æ‹©å’ŒåŽŸå€¼ã€‚]]></content>
      <categories>
        <category>RXJS</category>
      </categories>
      <tags>
        <tag>RXJS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•è°ƒè¯•Node.js|ä½¿ç”¨è°·æ­Œchromeæµè§ˆå™¨è°ƒè¯•Node.js]]></title>
    <url>%2F2017%2F06%2F02%2F%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95Node-js%E4%BD%BF%E7%94%A8%E8%B0%B7%E6%AD%8Cchrome%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B0%83%E8%AF%95Node-js%2F</url>
    <content type="text"><![CDATA[å¦‚ä½•è°ƒè¯• Node.js, è¿˜åœ¨ä½¿ç”¨ console.log æ¥è°ƒè¯• Node.js å—ï¼Œå¯ä»¥åƒè°ƒè¯•å‰ç«¯é¡µé¢ä¸€æ ·è°ƒè¯• Node.js! è¯‘æ–‡ï¼šDebugging Node.js with Google Chrome è°ƒè¯•æ˜¯ä»Žè½¯ä»¶åº”ç”¨ç¨‹åºä¸­è¯†åˆ«å’Œåˆ é™¤é”™è¯¯çš„ä»»åŠ¡ï¼Œè€Œä¸ä»…ä»…æ˜¯æ‰“å°ä»£ç ä¸­çš„å€¼ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨æœ€æ–°çš„Google Chrome DevToolsé«˜æ•ˆåœ°è°ƒè¯•Node.jsç¨‹åºã€‚ ä¸ºä»€ä¹ˆconsole.logä¸æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Ÿä½¿ç”¨console.logæ¥è°ƒè¯•ä½ çš„ä»£ç ï¼Œé€šå¸¸ä½ ä¼šæ— é™é‡å¤åœ°åš â€œåœæ­¢ä½ çš„åº”ç”¨ç¨‹åºï¼Œæ·»åŠ ä¸€ä¸ªconsole.logï¼Œå¹¶å†æ¬¡å¯åŠ¨ä½ çš„åº”ç”¨ç¨‹åºâ€ è¿™æ ·çš„æ“ä½œã€‚é™¤äº†å‡ç¼“æ‚¨çš„åº”ç”¨ç¨‹åºçš„å¼€å‘å¤–ï¼Œå®ƒè¿˜ä½¿æ‚¨çš„ä¹¦å†™å˜å¾—è„ä¹±å¹¶åˆ›å»ºä¸å¿…è¦çš„ä»£ç ã€‚æœ€åŽï¼Œå°è¯•æ³¨é”€å˜é‡ä»¥åŠå…¶ä»–å¯èƒ½çš„æ—¥å¿—è®°å½•æ“ä½œçš„å™ªç‚¹æ—¶ï¼Œå¯èƒ½ä¼šåœ¨å°è¯•æ‰¾åˆ°æ­£åœ¨è°ƒè¯•çš„å€¼æ—¶ä½¿è°ƒè¯•å˜å¾—å›°éš¾ã€‚ è°ƒè¯•å·¥å…·è°ƒè¯•å·¥å…·ä¸ºç”¨æˆ·æä¾›çš„æ˜¯å‡ ä¸ªé‡è¦çš„åŠŸèƒ½console.logæ— æ³•æä¾›ã€‚ç‰¹åˆ«æ˜¯ï¼Œå®ƒä»¬å…è®¸æ‚¨åœ¨ä»£ç ä¸­çš„ç‰¹å®šç‚¹æš‚åœæ‰§è¡Œåº”ç”¨ç¨‹åºï¼Œå¹¶åœ¨ç¨‹åºä»åœ¨è¿è¡Œæ—¶æ£€æŸ¥å’Œä¿®æ”¹å˜é‡çš„å€¼ã€‚ è®¾ç½®Chrome for Node.jsè°ƒè¯•ä½¿ç”¨Chrome 57+ï¼ŒNode.jsè°ƒè¯•åŠŸèƒ½æ˜¯é»˜è®¤å¯ç”¨çš„ï¼Œä¸éœ€è¦åƒä»¥å‰çš„ç‰ˆæœ¬é‚£æ ·ä»Žâ€œå®žéªŒåŠŸèƒ½â€é¢æ¿æ‰‹åŠ¨å¯ç”¨å®ƒã€‚ å¦‚æžœæ‚¨è¿˜æ²¡æœ‰å®Œæˆï¼Œè¯·å°†Google Chromeæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶ç¡®ä¿ä½¿ç”¨Node.js 6.4+ã€‚ è¦å¼€å§‹è°ƒè¯•ï¼Œè¯·ä½¿ç”¨ - inspectæ ‡å¿—è¿è¡ŒNode.jsåº”ç”¨ç¨‹åºã€‚ 1$ node --inspect &lt;your_file&gt; .js æŽ¥ä¸‹æ¥ï¼Œå¿½ç•¥ä»Žç»ˆç«¯ä¸­æ˜¾ç¤ºçš„â€œchrome-devtools://â€å¼€å¤´çš„URL ï¼Œè€Œæ˜¯åœ¨Google Chromeä¸­æ‰“å¼€â€œ about:inspect â€ã€‚ æœ€åŽç‚¹å‡»â€œ Open dedicated DevTools for Nodeâ€ å¼€å§‹è°ƒè¯•åº”ç”¨ç¨‹åºçš„ä»£ç ã€‚ æ­¤å¤–ï¼Œå…³äºŽè°ƒè¯•Node.js Appçš„å®˜æ–¹æ–‡æ¡£è¿˜æä¾›äº†æ‰€æœ‰å…¶ä»–æ£€æŸ¥å™¨å·¥å…·å’Œå®¢æˆ·ç«¯é€‰é¡¹çš„è¯¦ç»†åˆ—è¡¨ã€‚ Chrome DevToolsçš„åº”ç”¨è¦ç»“æŸæœ¬æ–‡ï¼Œæˆ‘æƒ³è¯´æ˜Žä¸€ä¸‹Chrome DevToolsåœ¨ä»¥ä¸‹Expressåº”ç”¨ç¨‹åºä¸­çš„åº”ç”¨ã€‚ 123456789101112131415161718'use strict'const express = require('express')const app = express()const PORT = process.env.PORT || 3000function capitalize (str) &#123; const firstLetter = str.charAt(0) // we can check what's inside here return `$&#123;firstLetter.toUpperCase()&#125;$&#123;str.slice(1)&#125;`&#125;app.get('/:name?', (req, res) =&gt; &#123; const name = req.params.name ? capitalize(req.params.name) : 'World' res.send(`Hello $&#123;name&#125;!`)&#125;)app.listen(PORT, () =&gt; console.log(`App listening on *:$&#123;PORT&#125;`)) è®©æˆ‘ä»¬ä»Žè¿è¡Œ- inspectæ ‡å¿—ï¼Œå¹¶æ‰“å¼€ä¸“ç”¨DevTools for Nodeå¦‚å‰æ‰€è¿°ã€‚ æ­¤æ—¶ï¼Œæ‚¨å°†å¯ä»¥è®¿é—®æ‚¨å¯èƒ½å·²ç»ç†Ÿæ‚‰çš„æ‰€æœ‰åŠŸèƒ½ï¼šæ–­ç‚¹(breakpoints)ï¼ŒåŽ‹ç¼©ä»£ç çš„æºæ˜ å°„(source map for transpiled code)ï¼Œå †å¿«ç…§æ£€æŸ¥(heap snapshot inspection)ï¼Œåˆ†é…åˆ†æž(allocation profiling)ï¼ŒJavaScriptå€¼çƒ­æ’æ‹”(JavaScript values hot-swapping)ç­‰ã€‚ å…·ä½“æ¥è¯´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ‚¨å¯ä»¥æ’å…¥æ–­ç‚¹æ¥åœæ­¢æ‰§è¡Œç¨‹åºï¼Œæ£€æŸ¥å’Œâ€œçƒ­äº¤æ¢â€å˜é‡çš„å€¼ã€‚ ä½¿ç”¨Chromeä½œä¸ºè°ƒè¯•å·¥å…·çš„å¦å¤–ä¸€ä»¶å¥½äº‹æ˜¯æ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç•Œé¢ðŸš€è°ƒè¯•å‰ç«¯å’ŒåŽç«¯JavaScriptä»£ç ã€‚]]></content>
      <categories>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>debug</tag>
        <tag>Node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RXJSæˆ‘è¯¥é€‰ç”¨å“ªä¸ªæ“ä½œç¬¦ä¹‹-åˆ›å»ºç¯‡]]></title>
    <url>%2F2017%2F06%2F01%2FRXJS%E6%88%91%E8%AF%A5%E9%80%89%E7%94%A8%E5%93%AA%E4%B8%AA%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%B9%8B-%E5%88%9B%E5%BB%BA%E7%AF%87%2F</url>
    <content type="text"><![CDATA[RXJSè¯¥æ€Žä¹ˆä¸Šæ‰‹ï¼Ÿè¿™ä¹ˆå¤šæ“ä½œç¬¦è¯¥ç”¨å“ªä¸ªï¼ŸRXJSæ¯”è¾ƒå¼ºå¤§ï¼Œæ“ä½œç¬¦ä¼—å¤šï¼Œæƒ³ç†Ÿæ‚‰éœ€è¦æ¯”è¾ƒé•¿æ—¶é—´çš„è¿ç”¨ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æ–°æ‰‹éƒ½æ¯”è¾ƒç–‘æƒ‘åº”è¯¥ä½¿ç”¨å“ªäº›æ“ä½œç¬¦åŽ»å®žçŽ°è‡ªå·±çš„æ•°æ®æµçš„æ“ä½œã€‚ æ›´å¤šè¯¦æƒ…è¯·ç¿»é˜… RXJSä¸­æ–‡ç¿»è¯‘æ–‡æ¡£ æˆ‘è¯¥é€‰ç”¨å“ªä¸ªæ“ä½œç¬¦? - åˆ›å»ºæ“ä½œç¬¦ä½¿ç”¨æ­¤é¡µé¢æŸ¥æ‰¾Observableç¬¦åˆæ‚¨éœ€æ±‚çš„ç±»åž‹åˆ›å»ºæ“ä½œï¼š é™æ€æ–¹æ³• æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªæ–°çš„åºåˆ— ä½¿ç”¨è‡ªå®šä¹‰é€»è¾‘ Observable.create åƒä¸€ä¸ªforå¾ªçŽ¯ Observable.generate å¹¶éšæ—¶é—´å‘å°„å€¼ Observable.generateWithRelativeTime Observable.generateWithAbsoluteTime å®ƒè¿”å›žä¸€ä¸ªå€¼ Observable.return/just å¤šæ¬¡ Observable.repeat è¿™ä¼šæŠ›å‡ºé”™è¯¯ Observable.throw å®Œæˆäº† Observable.empty ä»Žæ¥æ²¡æœ‰åšä»»ä½•äº‹æƒ… Observable.never ä»Žäº‹ä»¶ Observable.fromEvent å®ƒä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°æ¥æ·»åŠ å’Œåˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åº Observable.fromEventPattern æ¥è‡ªä¸€ä¸ªES6 Promise Observable.fromPromise å®ƒå¯è¿­ä»£ è¦†ç›–åˆ°æ•°ç»„ä¸­çš„å€¼ Observable.fromArray å¯¹è±¡é”®/å€¼å¯¹ Observable.pairs å¼‚æ­¥å…ƒç´  Observable.for æ•°å€¼èŒƒå›´å†…çš„å€¼ Observable.range æ¥è‡ªä¸€ä¸ªå¯è¿­ä»£çš„æ•°ç»„æˆ–ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡çš„å€¼ Observable.from æ¥è‡ªå‚æ•° Observable.of æ ¹æ®å®šæ—¶å™¨å‘å‡ºå€¼ Observable.interval å…·æœ‰å¯é€‰çš„åˆå§‹å»¶è¿Ÿ Observable.timer ä¸ä¼ å‚è°ƒç”¨å‡½æ•° åœ¨ç‰¹å®šçš„è°ƒåº¦ç¨‹åº Observable.start å¼‚æ­¥ Observable.startAsync å–å†³äºŽè®¢é˜…æ—¶ åŸºäºŽå¸ƒå°”æ¡ä»¶ Observable.if fä»Žä¸€ç»„é¢„å…ˆè®¾å®šçš„åºåˆ— Observable.case ä½¿ç”¨è‡ªå®šä¹‰é€»è¾‘ Observable.defer å®ƒå–å†³äºŽèµ„æº Observable.using æˆ‘æƒ³åŒ…è£…ä¸€ä¸ªå‡½æ•° å¹¶äº§ç”Ÿä¸€ä¸ªåºåˆ—çš„ç»“æžœ Observable.toAsync å®ƒæŽ¥å—å›žè°ƒ Observable.fromCallback å®ƒæŽ¥å—Node.jså›žè°ƒ Observable.fromNodeCallback æˆ‘æƒ³ç»“åˆå¤šä¸ªåºåˆ— å¹¶ä¸”ä»…ä»Žäº§ç”Ÿå€¼çš„åºåˆ—ä¸­æŽ¥æ”¶å€¼ Observable.amb æ‰€æœ‰äººéƒ½å·²ç»å®Œæˆé€šçŸ¥ Observable.forkJoin å¹¶è¾“å‡ºæ‰€æœ‰è¿™äº›å€¼ Observable.merge ä¸ºäº† ä¸æ”¹å˜æ—¶é‡å¤ä½¿ç”¨æœ€æ–°å€¼ Observable.combineLatest æ¯ä¸ªå€¼åªä½¿ç”¨ä¸€æ¬¡ Observable.zip é€šè¿‡è®¢é˜…æ¯ä¸ªåºåˆ—ä¸ºäº† å½“å‰ä¸€ä¸ªåºåˆ—å®Œæˆæ—¶ Observable.concat å½“å¦ä¸€ä¸ªåºåˆ—æŠ›å‡ºé”™è¯¯æ—¶ Observable.catch ä¸ç®¡å…ˆå‰çš„åºåˆ—æ˜¯å®Œæˆè¿˜æ˜¯æŠ›å‡ºé”™è¯¯ Observable.onErrorResumeNext é€šè¿‡å“åº”ä¸åŒçš„å€¼ç»„åˆï¼ˆè¿žæŽ¥å¾®ç§¯åˆ†ï¼‰ Observable.when]]></content>
      <categories>
        <category>RXJS</category>
      </categories>
      <tags>
        <tag>RXJS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RXJSæˆ‘è¯¥é€‰ç”¨å“ªä¸ªæ“ä½œç¬¦ä¹‹-å®žä¾‹æ“ä½œç¬¦ç¯‡]]></title>
    <url>%2F2017%2F06%2F01%2FRXJS%E6%88%91%E8%AF%A5%E9%80%89%E7%94%A8%E5%93%AA%E4%B8%AA%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%B9%8B-%E5%AE%9E%E4%BE%8B%E6%93%8D%E4%BD%9C%E7%AC%A6%E7%AF%87%2F</url>
    <content type="text"><![CDATA[RXJSæ¯”è¾ƒå¼ºå¤§ï¼Œæ“ä½œç¬¦ä¼—å¤šï¼Œæƒ³ç†Ÿæ‚‰éœ€è¦æ¯”è¾ƒé•¿æ—¶é—´çš„è¿ç”¨ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æ–°æ‰‹éƒ½æ¯”è¾ƒç–‘æƒ‘åº”è¯¥ä½¿ç”¨å“ªäº›æ“ä½œç¬¦åŽ»å®žçŽ°è‡ªå·±çš„æ•°æ®æµçš„æ“ä½œã€‚ æ›´å¤šè¯¦æƒ…è¯·ç¿»é˜… RXJSä¸­æ–‡ç¿»è¯‘æ–‡æ¡£ æˆ‘è¯¥é€‰ç”¨å“ªä¸ªæ“ä½œç¬¦? - å®žä¾‹æ“ä½œç¬¦ä½¿ç”¨æ­¤é¡µé¢é€šè¿‡ç±»åž‹æŸ¥æ‰¾Observable é€‚åˆæ‚¨éœ€è¦çš„å®žä¾‹è¿ç®—ç¬¦ï¼š å®žä¾‹æ“ä½œç¬¦ ä½¿ç”¨çŽ°æœ‰çš„åºåˆ— æˆ‘æƒ³æ”¹å˜æ¯ä¸ªå€¼ map/select æˆ‘æƒ³ä»Žæ¯ä¸ªå€¼æ‹‰ä¸€ä¸ªå±žæ€§ pluck æˆ‘æƒ³åœ¨ä¸å½±å“å€¼çš„æƒ…å†µä¸‹è¢«é€šçŸ¥å€¼ do/tap doOnNext/tapOnNext doOnError/tapOnError doOnCompleted/tapOnCompleted æˆ‘æƒ³åŒ…å«å€¼ åŸºäºŽè‡ªå®šä¹‰é€»è¾‘ filter/where ä»Žåºåˆ—å¼€å¤´ take åŸºäºŽè‡ªå®šä¹‰é€»è¾‘ takeWhile ä»Žåºåˆ—çš„æœ«å°¾ takeLast ç›´åˆ°å¦ä¸€ä¸ªåºåˆ—å‘å°„ä¸€ä¸ªå€¼æˆ–å®Œæˆ takeUntil æˆ‘æƒ³å¿½ç•¥å€¼ å…¨éƒ¨ ignoreElements ä»Žåºåˆ—çš„å¼€å¤´ skip åŸºäºŽè‡ªå®šä¹‰é€»è¾‘ skipWhile ä»Žåºåˆ—çš„æœ«å°¾ skipLast ç›´åˆ°å¦ä¸€ä¸ªåºåˆ—å‘å‡ºä¸€ä¸ªå€¼ skipUntil ä¸Žä»¥å‰çš„å€¼ç›¸åŒ distinctUntilChanged è¿™ï¼ˆè§¦å‘ï¼‰å¤ªé¢‘ç¹ throttle æˆ‘æƒ³è®¡ç®— æ€»å’Œ è¿™äº›å€¼çš„ sum å¹³å‡å€¼ average ä½¿ç”¨è‡ªå®šä¹‰é€»è¾‘ å¹¶ä¸”åªè¾“å‡ºæœ€ç»ˆå€¼ aggregate reduce å¹¶åœ¨è®¡ç®—å‡ºå€¼æ—¶è¾“å‡ºï¼ˆæ¯ä¸€æ­¥çš„ï¼‰å€¼ scan æˆ‘æƒ³ç”¨å…ƒæ•°æ®åŒ…è£…å®ƒçš„æ¶ˆæ¯ æè¿°æ¯ä¸ªæ¶ˆæ¯ materialize åŒ…æ‹¬ä»Žæœ€åŽä¸€ä¸ªä»·å€¼ä»¥æ¥çš„æ—¶é—´ timeInterval åŒ…æ‹¬æ—¶é—´æˆ³ timestamp ç»è¿‡ä¸€æ®µæ—¶é—´çš„ä¸æ´»åŠ¨ æˆ‘æƒ³æŠ›å‡ºä¸€ä¸ªé”™è¯¯ timeout æˆ‘æƒ³åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåºåˆ— timeout æˆ‘æƒ³ç¡®ä¿åªæœ‰ä¸€ä¸ªå€¼ å¹¶ä¸”å¦‚æžœå­˜åœ¨å¤šäºŽæˆ–å°‘äºŽä¸€ä¸ªå€¼åˆ™æŠ›å‡ºé”™è¯¯ single å¹¶ä¸”å¦‚æžœæ²¡æœ‰å€¼ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ singleOrDefault æˆ‘åªæƒ³å–ç¬¬ä¸€ä¸ªå€¼ å¹¶ä¸”å¦‚æžœæ²¡æœ‰å€¼ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ first å¹¶ä¸”å¦‚æžœæ²¡æœ‰å€¼ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ firstOrDefault åœ¨ä¸€æ®µæ—¶é—´å†… sample æˆ‘åªæƒ³å–æœ€åŽçš„å€¼ å¦‚æžœæ²¡æœ‰å€¼ï¼Œåˆ™æŠ¥é”™ last å¹¶ä¸”å¦‚æžœæ²¡æœ‰å€¼ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ lastOrDefault æˆ‘æƒ³çŸ¥é“å®ƒåŒ…å«å¤šå°‘å€¼ count æˆ‘æƒ³çŸ¥é“å®ƒæ˜¯å¦åŒ…å«ä¸€ä¸ªæŒ‡å®šçš„å€¼ contains æˆ‘æƒ³çŸ¥é“æ¡ä»¶æ˜¯å¦æ»¡è¶³ åªéœ€è¦ä»»ä¸€å€¼æ»¡è¶³ any/some éœ€è¦æ‰€æœ‰å€¼éƒ½æ»¡è¶³ all/every æˆ‘æƒ³æŠŠæ¶ˆæ¯å»¶è¿Ÿä¸€æ®µç‰¹å®šçš„æ—¶é—´ delay åŸºäºŽè‡ªå®šä¹‰é€»è¾‘ delayWithSelector æˆ‘æƒ³ç»™å€¼åˆ†ç»„ ç›´åˆ°åºåˆ—å®Œæˆ toArray toMap toSet ä½¿ç”¨è‡ªå®šä¹‰é€»è¾‘ ä½œä¸ºæ•°ç»„ buffer ä½œä¸ºåºåˆ— window æ ¹æ®ç‰¹å®šå¤§å°åˆ†æ‰¹ ä½œä¸ºæ•°ç»„ bufferWithCount ä½œä¸ºåºåˆ— windowWithCount åŸºäºŽæ—¶é—´ ä½œä¸ºæ•°ç»„ bufferWithTime ä½œä¸ºåºåˆ— windowWithTime åŸºäºŽæ—¶é—´æˆ–è®¡æ•°ï¼Œä»¥å…ˆå‘ç”Ÿè€…ä¸ºå‡† ä½œä¸ºæ•°ç»„ bufferWithTimeOrCount ä½œä¸ºåºåˆ— windowWithTimeOrCount åŸºäºŽä¸€ä¸ªæŒ‡å®šçš„key ç›´åˆ°åºåˆ—å®Œæˆ groupBy å¹¶æŽ§åˆ¶æ¯ç»„çš„ç”Ÿå‘½å‘¨æœŸ groupByUntil æˆ‘æƒ³ä¸ºæ¯ä¸ªå€¼å¼€å§‹ä¸€ä¸ªæ–°çš„åºåˆ— å¹¶ä¸”å¹¶è¡Œåœ°ä»Žæ‰€æœ‰åºåˆ—ä¸­å‘å‡ºå€¼ flatMap/selectMany å¹¶æŒ‰é¡ºåºä»Žæ¯ä¸ªåºåˆ—ä¸­è¾“å‡ºå€¼ concatMap/selectConcat å¹¶åœ¨æ–°å€¼åˆ°è¾¾æ—¶å–æ¶ˆå…ˆå‰çš„åºåˆ— flatMapLatest/selectSwitch å¹¶é€’å½’åœ°ä¸ºæ¯ä¸ªæ–°å€¼å¯åŠ¨ä¸€ä¸ªæ–°çš„åºåˆ— expand å¹¶æ ¹æ®onNextï¼ŒonErrorå’ŒonCompletedå¹¶è¡Œåœ°ä»Žæ‰€æœ‰åºåˆ—å‘å‡ºå€¼ flatMapObserver/selectManyObserver å¹¶æ ¹æ®onNextï¼ŒonErrorå’ŒonCompletedé¡ºåºåœ°ä»Žæ‰€æœ‰åºåˆ—å‘å‡ºå€¼ concatMapObserver/selectConcatObserver æˆ‘æƒ³æŠŠå®ƒä¸Žå¦ä¸€ä¸ªç»“åˆèµ·æ¥ ä¸¤è€…éƒ½å®Œæˆæ—¶å‘å‡ºé€šçŸ¥ forkJoin æˆ‘æƒ³æ‰§è¡Œå¤æ‚çš„æ“ä½œï¼Œè€Œä¸ä¼šæ‰“ç ´æµç•…çš„è°ƒç”¨ let æˆ‘æƒ³åœ¨å¤šä¸ªè®¢é˜…è€…ä¹‹é—´å…±äº«è®¢é˜… ä½¿ç”¨ç‰¹å®šçš„subjectå®žçŽ° multicast publish share å¹¶å‘æœªæ¥è®¢é˜…è€…æä¾›æœ€åŽçš„å€¼ publishLast shareLast å¹¶å‘æœªæ¥è®¢é˜…è€…é‡æ’­é»˜è®¤å€¼æˆ–æœ€æ–°å€¼ publishValue shareValue å¹¶å‘æœªæ¥çš„è®¢é˜…è€…é‡æ’­nä¸ªå€¼ replay shareReplay å‘ç”Ÿé”™è¯¯æ—¶ æˆ‘æƒ³é‡æ–°è®¢é˜… retry æˆ‘æƒ³å¼€å§‹ä¸€ä¸ªæ–°åºåˆ— catch å–å†³äºŽé”™è¯¯ catch å½“å®Œæˆæ—¶ æˆ‘æƒ³é‡æ–°è®¢é˜… repeat æˆ‘æƒ³å¼€å§‹ä¸€ä¸ªæ–°åºåˆ— concat å½“å®Œæˆæˆ–æŠ›å‡ºé”™è¯¯æ—¶ æˆ‘æƒ³å¼€å§‹ä¸€ä¸ªæ–°åºåˆ— onErrorResumeNext å½“å®Œæˆï¼ŒæŠ›å‡ºé”™è¯¯æˆ–é€€è®¢æ—¶ æˆ‘æƒ³æ‰§è¡Œä¸€ä¸ªå‡½æ•° finally æˆ‘æƒ³æ”¹å˜è·¯ç”±çš„è°ƒåº¦ç¨‹åº è°ƒç”¨subscribeï¼ˆè®¢é˜…ï¼‰ subscribeOn æ¶ˆæ¯ observeOn ä½¿ç”¨ä¸¤ä¸ªåºåˆ— æˆ‘æƒ³å†³å®šä»Žå“ªä¸ªæŽ¥æ”¶å€¼ å–å†³äºŽå“ªä¸ªåºåˆ—å…ˆå‘å‡ºå€¼ amb æˆ‘æƒ³ç¡®å®šå®ƒä»¬çš„å€¼æ˜¯å¦ç›¸ç­‰ sequenceEqual æˆ‘æƒ³åˆå¹¶å®ƒä»¬çš„å€¼ åªæœ‰å½“ç¬¬ä¸€ä¸ªåºåˆ—å‘å°„æ—¶ï¼Œä½¿ç”¨æ¯ä¸ªåºåˆ—çš„æœ€æ–°å€¼ withLatestFrom ä¸ºäº† ä¸æ”¹å˜æ—¶é‡å¤ä½¿ç”¨æœ€æ–°å€¼ combineLatest æ¯ä¸ªå€¼åªä½¿ç”¨ä¸€æ¬¡ zip é‡å¤åˆ†äº«æˆ‘é€‰æ‹©çš„â€œç”Ÿå‘½å‘¨æœŸâ€ å¹¶é€šçŸ¥æ¯ä¸ªç»„åˆ join å¹¶ç»™æ¯ä¸ªâ€œå·¦â€çš„åºåˆ—çš„å€¼ç»™â€œå³â€çš„åºåˆ— groupJoin æˆ‘æƒ³åŒ…å«ä¸¤è€…çš„å€¼ merge]]></content>
      <categories>
        <category>RXJS</category>
      </categories>
      <tags>
        <tag>RXJS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Markoå’Œreact,preact,vueç›¸æ¯”å¿«åœ¨å“ªé‡Œ]]></title>
    <url>%2F2017%2F06%2F01%2FMarko%E5%92%8Creact-preact-vue%E7%9B%B8%E6%AF%94%E5%BF%AB%E5%9C%A8%E5%93%AA%E9%87%8C%2F</url>
    <content type="text"><![CDATA[è¯‘æ–‡ï¼šwhy-is-marko-fast åœ¨eBayï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨[Marko](http://markojs.com/)æ¯å¤©å¤„ç†è¶…è¿‡åäº¿çš„è¯·æ±‚ï¼Œè¿™å°±è¦æ±‚æˆ‘ä»¬ç²¾ç®€æˆ‘ä»¬çš„å¼€æºUIåº“Markoã€‚æˆ‘ä»¬å¤§å¤§ä¼˜åŒ–äº†Marko ï¼Œä»¥å®žçŽ°å¿«é€Ÿæ¸²æŸ“ï¼Œé«˜çº§æ€§èƒ½æŠ€æœ¯ï¼Œå¹¶å®žçŽ°äº†æœ€å°çš„é¡µé¢é‡é‡ï¼ˆã€œ10kb gzippedï¼‰ã€‚æ€§èƒ½åªæ˜¯ä¸€ä¸ªæ–¹é¢ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜å¿…é¡»æ‰©å±•Markoä»¥æ”¯æŒæ•°ç™¾ä¸ªå›¢é˜Ÿçš„å¼€å‘ï¼Œä»Žè€Œå…è®¸å¼€å‘äººå‘˜æœ‰æ•ˆåœ°åˆ›å»ºå¯ç»´æŠ¤å’Œå¼ºå¤§çš„Webåº”ç”¨ç¨‹åºã€‚ æˆ‘ä»¬å·²ç»åˆ›å»ºäº†æˆ‘ä»¬è‡ªå·±çš„benchMarksè¿›è¡Œæ¯”è¾ƒï¼Œä¹Ÿå·²ç»å°†Markoæ·»åŠ åˆ°å…¶ä»–åŸºå‡†æµ‹è¯•ä¸­ï¼Œä½†æ˜¯åŸºå‡†æµ‹è¯•å¹¶ä¸æ€»æ˜¯å€¼å¾—ä¿¡èµ–çš„ã€‚å°½ç®¡æˆ‘ä»¬å°½å¯èƒ½å…¬å¹³åœ°å¯¹å¾…æˆ‘ä»¬çš„åŸºå‡†ï¼Œä½†æœ€é‡è¦çš„æ˜¯åœ¨çŽ°å®žä¸–ç•Œçš„åº”ç”¨ä¸­çš„è¡¨çŽ°ï¼Œè€Œä¸æ˜¯ä¸“æ³¨äºŽå¾®è§‚åŸºå‡†ã€‚è¿™å°±æ˜¯V8å›¢é˜Ÿè½¬è€Œé‡‡ç”¨æ–°çš„æ–¹æ³•æ¥è¡¡é‡å’Œç†è§£çŽ°å®žJavaScriptæ€§èƒ½çš„ä¸€ä¸ªåŽŸå› ã€‚ åŒæ ·ï¼Œæˆ‘ä»¬å·²ç»è§‚å¯Ÿè¿‡æˆ‘ä»¬çš„å¼€å‘äººå‘˜å®žé™…å¼€å‘ä¸­å¦‚ä½•ç¼–å†™ä»–ä»¬çš„Markoç»„ä»¶ï¼Œå¹¶ä¸”å‘çŽ°äº†å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–çš„æ¨¡å¼ã€‚è€Œä¸æ˜¯å…³æ³¨æœ¬æ–‡ä¸­çš„åŸºå‡†æµ‹è¯•ï¼Œæˆ‘æƒ³å…³æ³¨æˆ‘ä»¬åº”ç”¨äºŽMarkoçš„ä¼˜åŒ–ç»†èŠ‚ã€‚ å¤šä¸ªç¼–è¯‘è¾“å‡ºMarkoæ˜¯ä¸€ä¸ªåœ¨æœåŠ¡å™¨å’Œæµè§ˆå™¨ä¸­è¿è¡Œçš„åŒæž„UIåº“ã€‚æ­£å¦‚Michael Rawlingsåœ¨â€œ æœåŠ¡å™¨ç«¯æ¸²æŸ“æŸ“ â€ä¸­æåˆ°çš„ï¼Œå½“åœ¨æœåŠ¡å™¨ä¸Šå‘ˆçŽ°æ—¶ï¼ŒMarkoç›´æŽ¥å‘ˆçŽ°å¯ä»¥ä½œä¸ºHTTPå“åº”å‘é€çš„æ–‡æ¡£ï¼ˆHTMLï¼‰çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚ åœ¨æµè§ˆå™¨ä¸­å‘ˆçŽ°æ—¶ï¼Œå¿…é¡»è§£æžHTMLå­—ç¬¦ä¸²æ‰èƒ½æ›´æ–°DOMã€‚å› æ­¤ï¼ŒMarkoé€šè¿‡ç¨‹åºå°†è§†å›¾ç¼–è¯‘ä¸ºç›´æŽ¥å‘ˆçŽ°åˆ°è™šæ‹Ÿæ–‡æ¡£ï¼ˆVDOMï¼‰æ ‘ï¼Œè¿™å¯ä»¥é’ˆå¯¹æµè§ˆå™¨æœ‰æ•ˆåœ°æ›´æ–°çœŸå®žçš„DOMã€‚ ç»™å‡ºä»¥ä¸‹æ¨¡æ¿ï¼š 1&lt;div&gt;Hello $&#123;input.name&#125;!&lt;/div&gt; ç¼–è¯‘ä¸ºæœåŠ¡å™¨ç¼–è¯‘è¾“å‡ºé’ˆå¯¹æœåŠ¡å™¨ä¸Šçš„HTMLè¾“å‡ºè¿›è¡Œäº†ä¼˜åŒ–ï¼š 123456789var marko_template = require("marko/html").t(__filename), marko_helpers = require("marko/runtime/html/helpers"), marko_escapeXml = marko_helpers.x;function render(input, out) &#123; out.w("&lt;div&gt;Hello " + marko_escapeXml(input.name) + "!&lt;/div&gt;");&#125; ç¼–è¯‘ä¸ºæµè§ˆå™¨ç¼–è¯‘è¾“å‡ºé’ˆå¯¹æµè§ˆå™¨ä¸­çš„è™šæ‹ŸDOMæ¸²æŸ“è¿›è¡Œäº†ä¼˜åŒ–ï¼š 12345678var marko_template = require("marko/vdom").t(__filename);function render(input, out) &#123; out.e("DIV", null, 3) .t("Hello ") .t(input.name) .t("!");&#125; æ¨¡å—åŒ–è¿è¡Œæ—¶Markoè¿è¡Œæ—¶å¹¶ä¸ä½œä¸ºå•ä¸ªJavaScriptæ–‡ä»¶åˆ†å‘ã€‚ç›¸åï¼ŒMarkoç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªJavaScriptæ¨¡å—ï¼Œè¯¥æ¨¡å—ä»…å¯¼å…¥å®žé™…éœ€è¦çš„è¿è¡Œæ—¶éƒ¨åˆ†ã€‚è¿™å…è®¸æˆ‘ä»¬å‘Markoæ·»åŠ æ–°åŠŸèƒ½ï¼Œè€Œä¸ä¼šä½¿çŽ°æœ‰åº”ç”¨ç¨‹åºè†¨èƒ€ã€‚ä¾‹å¦‚ï¼Œç»™å‡ºä»¥ä¸‹æ¨¡æ¿ï¼š 12$ var color = 'red';&lt;div style=&#123;backgroundColor: color&#125;&gt;&lt;/div&gt; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œéœ€è¦é¢å¤–çš„è¿è¡Œæ—¶ä»£ç æ¥æ ¹æ®æ‰€æä¾›styleçš„JavaScriptå¯¹è±¡å‘ˆçŽ°å±žæ€§ã€‚å¯¼å…¥styleAttråŠ©æ‰‹çš„ç¼–è¯‘ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910var marko_styleAttr = require("marko/runtime/vdom/helper-styleAttr");function render(input, out) &#123; var color = 'red'; out.e("DIV", &#123; style: marko_styleAttr(&#123; backgroundColor: color &#125;) &#125;, 0, 4);&#125; é«˜æ€§èƒ½çš„æœåŠ¡å™¨ç«¯æ¸²æŸ“ä¸ŽåŸºäºŽä¸“é—¨è¿›è¡Œè™šæ‹ŸDOMæ¸²æŸ“çš„JSXçš„è§£å†³æ–¹æ¡ˆç›¸æ¯”ï¼ŒMarkoåœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æ–¹é¢å…·æœ‰å·¨å¤§çš„ä¼˜åŠ¿ã€‚å½“æ¸²æŸ“åˆ°æœåŠ¡å™¨ä¸Šçš„è™šæ‹ŸDOMæ ‘æ—¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸¤æ­¥çš„è¿‡ç¨‹æ¥å‘ˆçŽ°HTMLï¼š é¦–å…ˆåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„è™šæ‹ŸDOMæ ‘ ç¬¬äºŒéå°†è™šæ‹ŸDOMæ ‘åºåˆ—åŒ–ä¸ºå¯ä»¥é€šè¿‡çº¿è·¯å‘é€çš„HTMLå­—ç¬¦ä¸²ï¼ˆè¿™éœ€è¦éåŽ†æ•´ä¸ªæ ‘ç»“æž„ï¼‰ ç›¸æ¯”ä¹‹ä¸‹ï¼ŒMarkoç›´æŽ¥ä¸€æ¬¡æ€§æ¸²æŸ“ä¸€æ•´ä¸ªHTMLæµã€‚æ²¡æœ‰ä¸­é—´æ ‘æ•°æ®ç»“æž„ã€‚ é™æ€å­æ ‘çš„ç¼–è¯‘æ—¶ä¼˜åŒ–ç»™å‡ºä»¥ä¸‹æ¨¡æ¿ï¼š 1&lt;div&gt;This is a &lt;strong&gt;static&lt;/strong&gt; node&lt;/div&gt; Markoå°†ä¼šè®¤è¯†åˆ°ï¼Œæ¨¡æ¿ç‰‡æ®µæ¯æ¬¡éƒ½ä¼šäº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œå› æ­¤ä¼šåƒä»¥ä¸‹ç¼–è¯‘è¾“å‡ºä¸€æ ·åˆ›å»ºä¸€ä¸ªè™šæ‹ŸDOMèŠ‚ç‚¹ï¼š 123456789var marko_node0 = marko_createElement("DIV", null, 3, ...) .t("This is a ") .e("STRONG", null, 1) .t("static") .t(" node");function render(input, out) &#123; out.n(marko_node0);&#125; æ¸²æŸ“é™æ€å­æ ‘å‡ ä¹Žæ˜¯é›¶æˆæœ¬ã€‚æ­¤å¤–ï¼ŒMarkoå°†è·³è¿‡å¯¹æ¯”/ä¿®è¡¥é™æ€å­æ ‘ã€‚ åŒæ ·ï¼Œåœ¨æœåŠ¡å™¨ä¸Šï¼ŒMarkoä¼šå°†æ¨¡æ¿çš„é™æ€éƒ¨åˆ†åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼š 123function render(input, out) &#123; out.w("&lt;div&gt;This is a &lt;strong&gt;static&lt;/strong&gt; node&lt;/div&gt;");&#125; é™æ€å±žæ€§çš„ç¼–è¯‘æ—¶ä¼˜åŒ–Markoè¿˜å°†ä¼˜åŒ–åŠ¨æ€å…ƒç´ çš„é™æ€å±žæ€§ã€‚ ç»™å‡ºä»¥ä¸‹æ¨¡æ¿ï¼š 1&lt;div.hello&gt;Hello $&#123;input.name&#125;!&lt;/div&gt; Markoå°†äº§ç”Ÿä»¥ä¸‹ç¼–è¯‘è¾“å‡ºï¼š 12345678910var marko_attrs0 = &#123; "class": "hello" &#125;;function render(input, out) &#123; out.e("DIV", marko_attrs0, 3) .t("Hello ") .t(input.name) .t("!");&#125; è¯·æ³¨æ„ï¼Œå±žæ€§å¯¹è±¡åªåˆ›å»ºä¸€æ¬¡ï¼Œå®ƒç”¨äºŽæ¯ä¸ªæ¸²æŸ“ã€‚å¦å¤–ï¼Œé™æ€å±žæ€§ä¸ä¼šå‘ç”Ÿ diffing/patchingã€‚ æ™ºèƒ½ç¼–è¯‘å™¨ä½¿ç”¨Markoï¼Œæˆ‘ä»¬å€¾å‘äºŽåœ¨ç¼–è¯‘æ—¶å°½å¯èƒ½å¤šåœ°æ‰§è¡Œã€‚è¿™ä½¿æˆ‘ä»¬çš„ç¼–è¯‘å™¨æ›´åŠ å¤æ‚ï¼Œä½†å®ƒåœ¨è¿è¡Œæ—¶ç»™æˆ‘ä»¬å¸¦æ¥äº†å¾ˆå¤§çš„æ”¶èŽ·ã€‚æˆ‘ä»¬æœ‰ã€œ90ï¼…çš„ä»£ç è¦†ç›–çŽ‡å’Œè¶…è¿‡2000ä¸ªæµ‹è¯•ï¼Œä»¥ç¡®ä¿ç¼–è¯‘å™¨æ­£å¸¸å·¥ä½œã€‚æ­¤å¤–ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼ŒMarkoç¼–è¯‘å™¨ä¸ºç»™å®šçš„æ¨¡æ¿æä¾›è¿è¡Œæ—¶æç¤ºï¼Œä»¥ä¾¿è¿è¡Œæ—¶å¯ä»¥é’ˆå¯¹ç‰¹å®šæ¨¡å¼è¿›è¡Œä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼Œè¯†åˆ«çš„Markoå¦‚æžœHTMLå…ƒç´ ä»…å…·æœ‰class/id/styleå®šä¹‰å’Œåšç‰ˆæœ¬æ¯”è¾ƒæ—¶/ä¿®è¡¥è¿è¡Œæ—¶ä¼˜åŒ–äº†è¿™äº›è™šæ‹ŸDOMèŠ‚ç‚¹ï¼ˆMarkoç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç ï¼Œæ ‡è®°ç®€å•çš„è™šæ‹ŸDOMèŠ‚ç‚¹ç”¨äºŽé’ˆå¯¹ diffing/patching é€»è¾‘ï¼‰ã€‚ äº‹ä»¶å§”æ‰˜å¦‚æžœä½ æ­£åœ¨å»ºç«‹ä¸€ä¸ªUIç»„ä»¶ï¼Œæ‚¨å°†å¾ˆå¯èƒ½éœ€è¦ç¼–å†™ä»£ç æ¥å¤„ç†ä¸åŒçš„DOMäº‹ä»¶ï¼ˆclickï¼Œsubmitï¼Œç­‰ï¼‰ã€‚å¼€å‘äººå‘˜å¸¸å¸¸ç¼–å†™ä½¿ç”¨el.addEventListener(...)æˆ–ä½¿ç”¨è¯¸å¦‚jQueryçš„åº“æ¥æ·»åŠ DOMäº‹ä»¶ç›‘å¬å™¨çš„ä»£ç ã€‚å½“æ‚¨ä½¿ç”¨Markoæž„å»ºUIç»„ä»¶æ—¶ï¼Œæ‚¨ä»ç„¶å¯ä»¥æ‰§è¡Œæ­¤æ“ä½œï¼Œä½†æ˜¯åœ¨åˆå§‹åŒ–å¤§é‡ç»„ä»¶æ—¶ï¼Œåœ¨é™„åŠ ä¾¦å¬å™¨æ—¶ä¼šå‡ºçŽ°å¼€é”€ã€‚ç›¸åï¼ŒMarkoå»ºè®®ä½¿ç”¨å£°æ˜Žå¼äº‹ä»¶ç»‘å®šï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123&lt;button type="button" on-click("handleClick")&gt; Click Me&lt;/button&gt; å½“ä½¿ç”¨å£°æ˜Žæ€§äº‹ä»¶ç»‘å®šæ—¶ï¼Œäº‹å®žä¸Šæ²¡æœ‰é™„åŠ ä»»ä½•DOMäº‹ä»¶ä¾¦å¬å™¨ã€‚ç›¸åï¼ŒMarkoä¼šä¸ºæ¯ä¸ªDOMäº‹ä»¶ï¼ˆåœ¨å¯åŠ¨æ—¶å®Œæˆï¼‰ä¸ºé¡µé¢çš„æ ¹DOMå…ƒç´ é™„åŠ ä¸€ä¸ªç›‘å¬å™¨ã€‚å½“Markoåœ¨æ ¹èŠ‚ç‚¹å¤„æ”¶åˆ°äº‹ä»¶æ—¶ï¼Œå®ƒå°†æŠŠäº‹ä»¶å§”æ‰˜ç»™è¯¥äº‹ä»¶çš„ç›¸åº”ç»„ä»¶ã€‚è¿™æ˜¯é€šè¿‡æŸ¥çœ‹event.targetå±žæ€§æ¥æŸ¥çœ‹äº‹ä»¶å‘ç”Ÿçš„ä½ç½®ï¼Œç„¶åŽå‘ä¸ŠéåŽ†æ ‘æ¥æŸ¥æ‰¾éœ€è¦é€šçŸ¥çš„ç»„ä»¶ã€‚å› æ­¤ï¼Œå½“æ ¹ç›®å½•æ•èŽ·DOMäº‹ä»¶æ—¶ï¼Œä¼šåšæ›´å¤šçš„å·¥ä½œï¼Œä½†è¿™ç§æ–¹æ³•ä½¿ç”¨çš„å†…å­˜å°‘å¾—å¤šï¼Œå¹¶å‡å°‘äº†åˆå§‹åŒ–æ—¶éœ€è¦å®Œæˆçš„ã€‚å°†äº‹ä»¶å§”æ´¾ç»™ç»„ä»¶çš„é¢å¤–å¼€é”€å¹¶ä¸æ˜Žæ˜¾ï¼Œå› æ­¤è¿™æ˜¯ä¸€ä¸ªéžå¸¸æœ‰ç›Šçš„ä¼˜åŒ–ã€‚]]></content>
      <categories>
        <category>Marko</category>
      </categories>
      <tags>
        <tag>Marko</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[npm@5å‘å¸ƒæœ‰å“ªäº›æ”¹è¿›]]></title>
    <url>%2F2017%2F06%2F01%2Fnpm-5%E5%8F%91%E5%B8%83%E6%9C%89%E5%93%AA%E4%BA%9B%E6%94%B9%E8%BF%9B%2F</url>
    <content type="text"><![CDATA[ä»Žä»Šå¤©å¼€å§‹ï¼Œå¦‚æžœæ‚¨è¾“å…¥â€œnpm install npm@latest -gâ€ï¼Œé‚£ä¹ˆæ‚¨å°†è¢«æ›´æ–°ä¸ºnpmç‰ˆæœ¬5ã€‚å¦å¤–ï¼Œåœ¨æ‰€æœ‰Node.js 8çš„æ–°å®‰è£…ä¸­éƒ½æ†ç»‘äº†npm@5 ï¼Œå®ƒå·²ç»æ›¿ä»£äº†Node.js 7åœ¨Node Projectçš„å½“å‰ç‰ˆæœ¬ä¸­ã€‚ åœ¨è¿‡åŽ»ä¸€å¹´åŠçš„æ—¶é—´é‡Œï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨åŠªåŠ›è§£å†³å¤§é‡çš„ç—›ç‚¹ï¼Œå…¶ä¸­æœ‰äº›æ˜¯åˆ›å»ºnpmä»¥æ¥å°±å·²ç»å­˜åœ¨çš„ã€‚ä»Šå¤©çš„å‘å¸ƒæ˜¯å¯¹npmé€Ÿåº¦ï¼Œä¸€è‡´æ€§å’Œç”¨æˆ·ä½“éªŒçš„æœ€å¤§æ”¹è¿›ã€‚ å‘å¸ƒè¯´æ˜Žä¸­æœ‰ä»€ä¹ˆæ–°å†…å®¹å’Œæ›´æ”¹å†…å®¹çš„æ˜Žç¡®åˆ—è¡¨ï¼Œä½†è¿™é‡Œæœ‰ä¸€äº›äº®ç‚¹ï¼š é€Ÿåº¦å¾ˆå¿«é‡æ–°ç¼–æŽ’äº†åŒ…å…ƒæ•°æ®ï¼Œè½¯ä»¶åŒ…ä¸‹è½½å’Œè½¯ä»¶åŒ…ç¼“å­˜ï¼Œè¿™å¤§å¤§åŠ å¿«äº†å·¥ä½œã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒæœŸæœ›æ€§èƒ½æå‡20-100ï¼…; æˆ‘ä»¬è¿˜çœ‹åˆ°ä¸€äº›å®‰è£…å’Œç‰ˆæœ¬å†²çªçš„è¿è¡Œé€Ÿåº¦æé«˜äº†5å€ã€‚ ç”±äºŽnpmæœ€åˆçš„è®¾è®¡ï¼Œå¼€å‘äººå‘˜å·²ç»æ”¹å˜äº†ä»–ä»¬å¦‚ä½•ä½¿ç”¨npmã€‚npmç”Ÿæ€ç³»ç»Ÿä¸ä»…å‘ˆæŒ‡æ•°çº§å¢žé•¿ï¼Œè€Œä¸”ä»Ž2014å¹´èµ·ï¼Œå¹³å‡npmè½¯ä»¶åŒ…ä¸­çš„ä¾èµ–å…³ç³»æ•°é‡å¢žåŠ äº†250ï¼…ã€‚çŽ°åœ¨ï¼Œæ›´å¤šçš„å¼€å‘äººå‘˜çŽ°åœ¨å¯ä»¥åœ¨æœ¬åœ°å®‰è£…Babelï¼ŒWebpackå’ŒTapç­‰æœ‰ç”¨å·¥å…·ï¼Œè€Œä¸æ˜¯å…¨å±€ã€‚è¿™æ˜¯ä¸€ä¸ªæœ€ä½³å®žè·µï¼Œä½†è¿™æ„å‘³ç€â€œnpm installâ€å¯ä»¥åšæ›´å¤šçš„å·¥ä½œã€‚ é‰´äºŽæˆ‘ä»¬ç¤¾åŒºçš„è§„æ¨¡ï¼Œä»»ä½•é€Ÿåº¦ä¸Šå‡éƒ½ä¼šä¸ºæ•°ç™¾ä¸‡ç”¨æˆ·å¸¦æ¥å·¨å¤§çš„èŠ‚çœï¼Œæ›´ä¸ç”¨è¯´æˆ‘ä»¬çš„æ‰€æœ‰ç»„ç»‡å’Œnpmä¼ä¸šå®¢æˆ·ã€‚ä½¿npm @ 5å˜å¿«æˆä¸ºä¸€ä¸ªå¾ˆæ˜¾ç„¶çš„ç›®æ ‡ã€‚ ç›®æ ‡ä¸€è‡´é»˜è®¤é”æ–‡ä»¶Shrinkwrapå¾ˆæ—©å°±å·²ç»æ˜¯npmçš„ä¸€éƒ¨åˆ†ï¼Œä½†npm@5ä½¿lockfilesæˆä¸ºé»˜è®¤ï¼Œæ‰€ä»¥æ‰€æœ‰çš„npmå®‰è£…çŽ°åœ¨éƒ½æ˜¯å¯é‡çŽ°çš„ã€‚åœ¨å®‰è£…ç»™å®šç‰ˆæœ¬çš„è½¯ä»¶åŒ…æ—¶ï¼Œæ¯æ¬¡å®‰è£…å®ƒæ‚¨èŽ·å¾—çš„æ–‡ä»¶å°†æ˜¯ç›¸åŒçš„ã€‚ æˆ‘ä»¬å‘çŽ°æ— æ•°å¸¸è§ä¸”è€—æ—¶çš„é—®é¢˜å¯èƒ½ä¸Žä¸åŒå¼€å‘äººå‘˜çŽ¯å¢ƒåˆ©ç”¨ä¸åŒè½¯ä»¶åŒ…ç‰ˆæœ¬æ—¶å‘ç”Ÿçš„â€œæ¼‚ç§»â€ç›¸å…³ã€‚ä½¿ç”¨é»˜è®¤é”æ–‡ä»¶ï¼Œè¿™ä¸å†æ˜¯é—®é¢˜ã€‚ä½ ä¸ä¼šæµªè´¹æ—¶é—´ï¼Œè¯•å›¾æ‰¾å‡ºä¸€ä¸ªé”™è¯¯ï¼Œåªæ˜¯ä¸ºäº†äº†è§£å®ƒæ¥è‡ªè¿è¡Œä¸åŒç‰ˆæœ¬çš„å›¾ä¹¦é¦†çš„äººã€‚ SHA-512å“ˆå¸Œnpm@5å¢žåŠ äº†å¯¹Node.jsæ”¯æŒçš„ä»»ä½•tarball HashåŠŸèƒ½çš„æ”¯æŒï¼Œå¹¶ä»¥SHA-512 hashå‘å¸ƒã€‚é€šè¿‡æ£€æŸ¥æ‰€æœ‰ä¸‹è½½çš„è½¯ä»¶åŒ…ï¼Œæ‚¨å¯ä»¥é˜²æ­¢æ•°æ®æŸåå’Œæ¶æ„æ”»å‡»ï¼Œå¹¶ä¸”æ‚¨å¯ä»¥ç›¸ä¿¡æ‚¨ä»Žnpmä¸‹è½½çš„ä»£ç æ˜¯ä¸€è‡´å’Œå®‰å…¨çš„ã€‚ è‡ªæ„ˆç¼“å­˜æˆ‘ä»¬çš„æ–°ç¼“å­˜å¾ˆå®¹æ˜“æŸåï¼Œä½†ä¹Ÿæ›´å…·å¼¹æ€§ã€‚å¤šä¸ªnpmè¿›ç¨‹ä¸ä¼šç ´åå…±äº«ç¼“å­˜ï¼Œnpm@5å°†æ£€æŸ¥æ’å…¥å’Œæå–çš„æ•°æ®ï¼Œä»¥é˜²æ­¢å®‰è£…æŸåçš„æ•°æ®ã€‚å¦‚æžœç¼“å­˜é¡¹å¤±è´¥å®Œæ•´æ€§æ£€æŸ¥ï¼Œnpm@5å°†è‡ªåŠ¨åˆ é™¤å®ƒå¹¶é‡æ–°èŽ·å–ã€‚ æ›´æ˜“ä½¿ç”¨æ ¹æ®æ‚¨çš„åé¦ˆï¼Œæˆ‘ä»¬é€šè¿‡npm @ 5ä¸­çš„ä¼˜åŒ–æ”¹è¿›äº†ç”¨æˆ·ä½“éªŒã€‚å…¶ä¸­å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯è¾“å‡ºæ›´å¤šçš„æœ‰ç”¨çš„æç¤ºä¿¡æ¯ã€‚æœ€å¥½çš„ä¾‹å­æ˜¯ï¼Œnpmä¸å†æ˜¾ç¤ºpackageä¸Šçš„æ•´ä¸ªæ ‘; ç›¸åï¼Œæ‚¨å°†çœ‹åˆ°æœ‰å…³å®‰è£…å†…å®¹çš„æ‘˜è¦æŠ¥å‘Šã€‚ç”±äºŽå¹³å‡æ¯ä¸ªpackageä¸­çš„ä¾èµ–å…³ç³»è¾ƒå¤§ï¼Œå› æ­¤æˆ‘ä»¬è¿›è¡Œäº†æ­¤æ›´æ”¹ã€‚é€ä¸ªæ–‡ä»¶è¯»å‡ºç»“æžœæ˜¯è¶…è¿‡ä¸€å®šæ•°é‡å°±ä¼šæ˜¾å¾—éžå¸¸ç¬¨é‡ã€‚ æ¯”è¾ƒæœ‰ä¸€ä¸ªé¡¹ç›®ä½¿ç”¨ benchmark æ¯”è¾ƒäº† yarn, pnpm, npm çš„æ•ˆçŽ‡, ä¼ é€é—¨ ä¸‹é¢æ˜¯æ¯”è¾ƒç»“æžœï¼š Installer Average over 5 runs yarn â€“offline 5.88 pnpm â€“offline 6.72 pnpm (cached) 6.86 npm 5.x (shrinkpacked, compressed) 8.35 npm 5.x (shrinkpacked) 8.94 npm 5.x (cached) 11.36 npm 4.x (cached) 13.47 yarn 13.71 npm 5.x 14.93 pnpm 17.57 npm 4.x (shrinkpacked, compressed) 18.73 npm 4.x (shrinkpacked) 18.78 npm 4.x 29.73]]></content>
      <categories>
        <category>npm</category>
      </categories>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSXæ˜¯ä»€ä¹ˆé¬¼(WTF is JSX)]]></title>
    <url>%2F2017%2F05%2F30%2FJSX%E6%98%AF%E4%BB%80%E4%B9%88%E9%AC%BC%2F</url>
    <content type="text"><![CDATA[JSXå®žé™…ä¸Šå¾ˆç®€å•ï¼šåªéœ€è¦èŠ±1åˆ†é’Ÿé˜…è¯»è¿™ä¸ªï¼Œä½ ä¼šæ˜Žç™½æœ‰å…³è¿™ä¸ªæœ‰è¶£çš„æ›¿ä»£æ¨¡æ¿çš„ä¸€åˆ‡ã€‚ æ›¿æ¢æ ‡é¢˜ï¼šâ€œèžå…¥JSXâ€ Pragmaæ‚¨å¯ä»¥å£°æ˜Žæ¯ä¸ªæ–‡ä»¶æˆ–æ¯ä¸ªå‡½æ•°æ¥å‘Šè¯‰æ‚¨çš„transpilerï¼ˆä¾‹å¦‚ï¼šBabelï¼‰æ¯ä¸ªèŠ‚ç‚¹åœ¨è¿è¡Œæ—¶åº”è°ƒç”¨çš„å‡½æ•°çš„åç§°ï¼ˆè¯·å‚é˜…â€œTranspilationâ€ï¼‰ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¯´çš„æ˜¯â€œ h()ä¸ºæ¯ä¸ªèŠ‚ç‚¹æ³¨å…¥ä¸€ä¸ªå‡½æ•°â€ï¼š 1/** @jsx h */ Transpilationå¦‚æžœä½ è¿˜æ²¡æœ‰ä½¿ç”¨è§£æžå™¨ï¼Œä½ åº”è¯¥æ˜¯å°è¯•ä¸€ä¸‹ã€‚ä½¿ç”¨ES6 / ES2015 ç¼–å†™ï¼Œè°ƒè¯•ï¼Œæµ‹è¯•å’Œè¿è¡ŒJavaScriptæ—¶æ›´ä¸ºé«˜æ•ˆã€‚Babelæ˜¯æœ€å—æ¬¢è¿Žå’ŒæŽ¨èçš„é€æžå™¨ï¼Œæ‰€ä»¥æˆ‘ä¼šå‡è®¾ä½ æ­£åœ¨ä½¿ç”¨å®ƒã€‚ é™¤äº†å°†ES6 / ES7 +è¯­æ³•è½¬æ¢ä¸º ES5 ä»¥å¤–ï¼ŒBabelè¿˜åŒ…æ‹¬å¯¹JSX å¼€ç®±å³ç”¨çš„è½¬æ¢æ”¯æŒã€‚æ‚¨ä¸éœ€è¦æ·»åŠ æˆ–æ›´æ”¹ä»»ä½•å†…å®¹ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚ é€šè¿‡æŸ¥çœ‹ä¸€ä¸ªéžå¸¸ç®€å•çš„ä¾‹å­æ¥äº†è§£å®ƒçš„å·¥ä½œåŽŸç†æ˜¯æœ€ç®€å•çš„ï¼š è½¬æ¢å‰ :( ä½ å†™çš„ä»£ç ï¼‰ 12/** @jsx h */let foo = &lt;div id="foo"&gt;Hello!&lt;/div&gt;; è½¬æ¢åŽ :(ä½ è¿è¡Œçš„ä»£ç ï¼‰ 1var foo = h('div', &#123;id:"foo"&#125;, 'Hello!'); ä½ å¯èƒ½çœ‹ç¬¬äºŒä¸ªä»£ç ç‰‡æ®µçš„æ—¶å€™ï¼Œè®¤ä¸ºä½¿ç”¨å‡½æ•°æž„å»ºUIä¸ä¼šé‚£ä¹ˆç³Ÿç³• è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘åä¸Šäº† JSX çš„è½¦ï¼šå¦‚æžœå®ƒä»Žåœ°çƒä¸Šæ¶ˆå¤±äº†ï¼Œç”¨æ‰‹å†™çš„è¾“å‡ºä¾ç„¶ä¼šå¾ˆèˆ’æœã€‚ JSXåªæ˜¯ä¸€ç§å·²ç»ç›¸å½“ä¸é”™çš„è¯­æ³•çš„ç³–ã€‚ äººä»¬ç”šè‡³æŠŠå®ƒç”¨äºŽæ•´ä¸ªé¡¹ç›®ï¼šhyperscript æˆ‘ä»¬æ¥æž„å»ºä¸€ä¸ªJSXæ¸²æŸ“å™¨é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰è½¬æ¢ä»£ç åŽè°ƒç”¨çš„ h() å‡½æ•°ã€‚ ä½ è°ƒç”¨ä»»ä½•ä½ æƒ³è¦çš„ï¼Œæˆ‘ä½¿ç”¨h()ï¼Œå› ä¸ºè¿™ç§ç±»åž‹çš„â€œæž„å»ºå™¨â€åŠŸèƒ½çš„åŽŸå§‹æƒ³æ³•è¢«ç§°ä¸ºhyperscript (â€œhypertextâ€œ + â€œjavascriptâ€).ã€‚ 1234function h(nodeName, attributes, ...args) &#123; let children = args.length ? [].concat(...args) : null; return &#123; nodeName, attributes, children &#125;;&#125; å¥½çš„ï¼Œè¿™çœ‹èµ·æ¥å¾ˆç®€å•ï¼ˆps: åªå¤„ç†äº† childrenï¼‰ ä¸ç†Ÿæ‚‰ES6 / ES2015ï¼Ÿ è¿™â€¦åœ¨å‚æ•°åˆ—è¡¨æ˜¯ä¸€ä¸ªrest paramã€‚å®ƒå°†â€œå…¶ä½™â€çš„å‚æ•°æ”¶é›†åˆ°æ•°ç»„ä¸­ã€‚ è¯¥concat(â€¦args)ä½æ˜¯ä¸€ä¸ªæ‰©å±•è¿ç®—ç¬¦ï¼šå®ƒéœ€è¦è¯¥æ•°ç»„å¹¶å°†å…¶æ‰©å±•ä¸ºå‚æ•°concat()ã€‚è¿™é‡Œä½¿ç”¨çš„concat()æ˜¯å°†å­èŠ‚ç‚¹æŽ¨å…¥æ•°ç»„ã€‚ çŽ°åœ¨æˆ‘ä»¬æœ‰è¿™äº›åµŒå¥—çš„JSONå¯¹è±¡æˆ‘ä»¬çš„h()å‡½æ•°åå‡ºæ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªè¿™æ ·çš„â€œæ ‘â€ï¼š 1234567&#123; nodeName: "div", attributes: &#123; "id": "foo" &#125;, children: ["Hello!"]&#125; æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªæŽ¥å—è¯¥æ ¼å¼å¹¶æŠ›å‡ºå®žé™…DOMèŠ‚ç‚¹çš„å‡½æ•°ï¼š(å³æ²‰æŸ“vdom) 12345678910111213141516function render(vnode) &#123; // å­—ç¬¦ä¸²åªè½¬æ¢æˆ æ–‡æœ¬èŠ‚ç‚¹ï¼š if (vnode.split) return document.createTextNode(vnode); // ä½¿ç”¨ VDOM çš„ nodeName åˆ›å»ºä¸€ä¸ªDOM æ ‡ç­¾ let n = document.createElement(vnode.nodeName); // æ‹·è´æ‰€æœ‰å±žæ€§åˆ°æ–°èŠ‚ç‚¹ä¸Š let a = vnode.attributes || &#123;&#125;; Object.keys(a).forEach( k =&gt; n.setAttribute(k, a[k]) ); // æ¸²æŸ“å¹¶æ·»åŠ å­èŠ‚ç‚¹ (vnode.children || []).forEach( c =&gt; n.appendChild(render(c)) ); return n;&#125; ï¼šï¼‰ ä¸éš¾ç†è§£è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ å¦‚æžœæœ‰å¸®åŠ©ï¼Œæ‚¨å¯ä»¥å°†â€œè™šæ‹ŸDOMâ€è§†ä¸ºä¸€ä¸ªéžå¸¸ç®€å•çš„é…ç½®ï¼Œç”¨äºŽæž„å»ºç»™å®šçš„DOMç»“æž„ã€‚ è™šæ‹ŸDOMçš„å¥½å¤„æ˜¯å®ƒéžå¸¸è½»å·§ã€‚å°å¯¹è±¡å¼•ç”¨å…¶ä»–å°å¯¹è±¡ï¼Œä¸€ä¸ªç”±æ˜“äºŽä¼˜åŒ–çš„åº”ç”¨ç¨‹åºé€»è¾‘æž„æˆçš„ç»“æž„ã€‚ è¿™ä¹Ÿæ„å‘³ç€å®ƒä¸å—ä»»ä½•æ¸²æŸ“é€»è¾‘æˆ–ç¼“æ…¢çš„DOMæ–¹æ³•çš„æŸç¼šã€‚ ä½¿ç”¨JSXæˆ‘ä»¬çŸ¥é“JSXè¢«è½¬æ¢æˆh()å‡½æ•°è°ƒç”¨ã€‚ é‚£äº›å‡½æ•°è°ƒç”¨åˆ›å»ºä¸€ä¸ªç®€å•çš„â€œè™šæ‹Ÿâ€DOMæ ‘ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥render()å‡½æ•°æ¥åˆ¶ä½œä¸€ä¸ªåŒ¹é…çš„â€œçœŸå®žâ€DOMæ ‘ã€‚ è¿™å°±æ˜¯è¿™æ ·çš„ï¼š 12345678// JSX -&gt; VDOM:let vdom = &lt;div id="foo"&gt;Hello!&lt;/div&gt;;// VDOM -&gt; DOM:let dom = render(vdom);// add the tree to &lt;body&gt;:document.body.appendChild(dom); Partialsï¼Œè¿­ä»£ä¸Žé€»è¾‘ï¼šæ²¡æœ‰æ–°çš„è¯­æ³• æˆ‘ä»¬æ‹¥æœ‰æ‰€æœ‰çš„JavaScriptè¯­æ³•ï¼Œè€Œä¸æ˜¯æ¨¡æ¿è¯­è¨€å¼•å…¥çš„æœ‰é™æ¦‚å¿µã€‚ï¼ˆPS:è¿™æ˜¯JSXèƒœè¿‡æ¨¡æ¿è¯­è¨€çš„åœ°æ–¹ï¼‰ â€œPartialsâ€æ˜¯ç”±æ— é€»è¾‘/æœ‰é™é€»è¾‘æ¨¡æ¿å¼•æ“Žå¼•å…¥çš„æ¦‚å¿µï¼Œç”¨äºŽåœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­é‡å¤ä½¿ç”¨è§†å›¾å—ã€‚ è¿­ä»£ä¼¼ä¹Žæ˜¯æ¯ä¸ªæ–°çš„æ¨¡æ¿è¯­è¨€éƒ½é‡æ–°å‘æ˜Žçš„ä¸œè¥¿ï¼ˆæˆ‘å’Œä»»ä½•äººä¸€æ ·æœ‰ç½ªï¼‰ã€‚ä½¿ç”¨JSXï¼Œæ²¡æœ‰æ–°çš„è¯­æ³•æ¥å­¦ä¹ ï¼šè¿­ä»£æ‚¨åœ¨JavaScriptç¨‹åºä¸­çš„å…¶ä»–ä»»ä½•åœ°æ–¹ã€‚æ‚¨é€‰æ‹©æœ€é€‚åˆç»™å®šä»»åŠ¡è¿­ä»£å¼çš„ï¼š[].forEach()ï¼Œ[].map()ï¼Œforå’Œwhileå¾ªçŽ¯ç­‰ é€»è¾‘ï¼Œåƒè¿­ä»£ï¼Œæ˜¯æ¨¡æ¿è¯­è¨€å–œæ¬¢é‡æ–°å‘æ˜Žçš„ä¸œè¥¿ã€‚ä¸€æ–¹é¢ï¼Œæ— é€»è¾‘æ¨¡æ¿åœ¨å°†é€»è¾‘åµŒå…¥åˆ°è§†å›¾æ–¹æ³•éžå¸¸å¼±ï¼šæœ‰é™çš„ç»“æž„ï¼Œå¦‚\{\{ \#if value}}å°†é€»è¾‘æŽ¨å…¥æŽ§åˆ¶å™¨å±‚ï¼Œé¼“åŠ±è†¨èƒ€ã€‚è¿™è§„é¿äº†æž„å»ºè¯­è¨€æ¥æè¿°æ›´å¤æ‚çš„é€»è¾‘ï¼Œé¿å…å¯é¢„è§æ€§å’Œå®‰å…¨éšæ‚£ã€‚ åœ¨å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨ä»£ç ç”Ÿæˆï¼ˆä¸€ç§ä»Žç²—ç•¥åˆ°ä¸å¯åŽŸè°…çš„æŠ€æœ¯ï¼‰çš„å¼•æ“Žé€šå¸¸å…·æœ‰æ‰§è¡Œé€»è¾‘æˆ–ç”šè‡³è¿­ä»£ä»»æ„JavaScriptè¡¨è¾¾å¼çš„èƒ½åŠ›ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç†ç”±ï¼Œä¸æƒœä¸€åˆ‡ä»£ä»·é¿å…è¿™ç§æƒ…å†µï¼šæ‚¨çš„ä»£ç è¢«ä»ŽåŽŸå§‹ä½ç½®ï¼ˆä¹Ÿè®¸æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œé—­åŒ…æˆ–æ ‡è®°å†…ï¼‰ä¸­å‰¥ç¦»å‡ºæ¥ï¼Œå¹¶å¯¹â€œåˆ«çš„åœ°æ–¹â€è¯„ä¼°ã€‚è¿™å¯¹æˆ‘æ¥è¯´æ˜¯ä¸å¯é¢„æµ‹çš„æˆ–è¶³å¤Ÿå®‰å…¨çš„ã€‚ JSXå…è®¸æ‰€æœ‰ JavaScriptçš„è¯­è¨€åŠŸèƒ½ï¼Œè€Œä¸ä¾èµ–äºŽåœ¨æž„å»ºæ­¥éª¤ä¸­ç”Ÿæˆå¥‡æ€ªçš„ä»£ç ï¼Œæ²¡æœ‰eval()å’Œæ‰©å±•ã€‚ 1234567891011121314// å°†æ•°ç»„ä¸­çš„å­—ç¬¦ä¸²ä»¥åˆ—è¡¨çš„å½¢å¼å±•ç¤ºlet items = ['foo', 'bar', 'baz'];// åˆ›å»ºåˆ—è¡¨lifunction item(text) &#123; return &lt;li&gt;&#123;text&#125;&lt;/li&gt;;&#125;// ä¸€ä¸ªä½¿ç”¨è¿­ä»£å’Œå¤ç”¨çš„è§†å›¾let list = render( &lt;ul&gt; &#123; items.map(item) &#125; &lt;/ul&gt;); render()è¿”å›žä¸€ä¸ªDOMèŠ‚ç‚¹ï¼ˆåœ¨ä¸Šè¿°æƒ…å†µä¸‹æ˜¯è¿”å›žåˆ—è¡¨ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æŠŠå®ƒæ”¾åˆ°DOMä¸­ï¼š 1document.body.appendChild(list); æŠŠå®ƒæ”¾åœ¨ä¸€èµ·ä»¥ä¸‹æ˜¯å°åž‹è™šæ‹ŸDOMæ¸²æŸ“å™¨å’Œä½¿ç”¨å®ƒçš„è§†å›¾çš„å®Œæ•´æºç ã€‚ å…·æœ‰ä¸€äº›æ ·å¼çš„CodePenå¯åœ¨ä¸‹é¢èŽ·å¾—ã€‚ åŒæ ·ï¼Œæˆ‘ä¹Ÿå†™äº†ä¸€ä¸ªä¾‹å­ï¼šåœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨JSXæ¸²æŸ“DOM 1234567891011121314151617181920212223242526const ITEMS = 'hello there people'.split(' ');// turn an Array into list items:let list = items =&gt; items.map( p =&gt; &lt;li&gt; &#123;p&#125; &lt;/li&gt; );// view with a call out ("partial") to generate a list from an Array:let vdom = ( &lt;div id="foo"&gt; &lt;p&gt;Look, a simple JSX DOM renderer!&lt;/p&gt; &lt;ul&gt;&#123; list(ITEMS) &#125;&lt;/ul&gt; &lt;/div&gt;);// render() converts our "virtual DOM" (see below) to a real DOM tree:let dom = render(vdom);// append the new nodes somewhere:document.body.appendChild(dom);// Remember that "virtual DOM"? It's just JSON - each "VNode" is an object with 3 properties.let json = JSON.stringify(vdom, null, ' ');// The whole process (JSX -&gt; VDOM -&gt; DOM) in one step:document.body.appendChild( render( &lt;pre id="vdom"&gt;&#123; json &#125;&lt;/pre&gt; )); Codepenæ¼”ç¤º]]></content>
      <categories>
        <category>JSX</category>
        <category>react</category>
      </categories>
      <tags>
        <tag>JSX</tag>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RxJSäº‹ä»¶æ¡¥æŽ¥]]></title>
    <url>%2F2017%2F05%2F05%2FRxJS%E4%BA%8B%E4%BB%B6%E6%A1%A5%E6%8E%A5%2F</url>
    <content type="text"><![CDATA[äº‹ä»¶æ¡¥æŽ¥RxJS æä¾›å·¥åŽ‚æ–¹æ³•æ¥æ¡¥æŽ¥ DOM æˆ– Node.js ä¸­å·²å­˜åœ¨çš„å¼‚æ­¥æ•°æ®æºï¼Œæ‰€ä»¥ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸°å¯Œçš„åˆ›ä½œã€è¿‡æ»¤å’Œèµ„æºç®¡ç†åŠŸèƒ½å¯¹RxJSæä¾›çš„ä»»ä½•ç±»åž‹çš„æ•°æ®æµè¿›è¡Œæ“ä½œã€‚è¿™ç¯‡æ–‡ç« æŽ¢è®¨ fromEvent å’Œ fromEventPatternæ“ä½œç¬¦ï¼Œå®ƒå…è®¸å¯¼å…¥ä¸€ä¸ª DOM æˆ–è€…æ™®é€šäº‹ä»¶åˆ° RxJS çš„æ•°æ®æµã€‚æ¯æ¬¡å¼•å‘äº‹ä»¶æ—¶ï¼Œä¸€ä¸ª OnNext æ¶ˆæ¯å°†ä¼ é€’åˆ°æ•°æ®æµã€‚ç„¶åŽï¼Œå¯ä»¥åƒå…¶ä»–ä»»ä½•æ•°æ®æµä¸€æ ·æ“ä½œäº‹ä»¶æ•°æ®æµã€‚ RxJS ä¸æ‰“ç®—å–ä»£çŽ°æœ‰çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡åž‹å¦‚ Promises æˆ– callbacksã€‚ä½†æ˜¯ï¼Œå½“ä½ å°è¯•ç»„åˆäº‹ä»¶ï¼Œ RxJSçš„å·¥åŽ‚æ–¹æ³•ä¼šæä¾›ç®€ä¾¿çš„æ–¹æ³•ç»™ä½ ï¼Œä½ å®Œå…¨æ„Ÿå—ä¸åˆ°å½“å‰ä½¿ç”¨äº†ä½•ç§ç¼–ç¨‹æ¨¡å¼ã€‚è¿™çœŸçš„å¾ˆæ–¹ä¾¿ç»´æŠ¤ï¼ˆæ¯”å¦‚å–æ¶ˆè®¢é˜…ï¼‰å’Œç­›é€‰ï¼ˆæ¯”å¦‚é€‰æ‹©åˆé€‚çš„æ•°æ®ï¼‰æ•°æ®æºã€‚åœ¨æœ¬èŠ‚å’Œä¸‹èŠ‚ä¸­ï¼Œä½ å¯ä»¥å°è¯• RxJS çš„è¿™äº›ç‰¹æ€§å¦‚ä½•ååŠ©ä½ å®Œæˆå¼‚æ­¥ç¼–ç¨‹ã€‚ è‡ªç„¶ï¼ŒRxJS æ”¯æŒä¸€æ‰¹åº“å’Œä»–ä»¬çš„å‹¾å­å‡½æ•°åŽ»ä½¿ç”¨ä»–ä»¬çš„äº‹ä»¶ç³»ç»Ÿï¼Œæ¯”å¦‚ jQuery, Zepto.js, AngularJS, Ember.js å’Œ Backbone.jsã€‚è¿™ç§è¡Œä¸ºï¼Œä¸ç®¡æ€Žæ ·åªèƒ½é‡å†™æœ¬åœ°ç»‘å®šã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ RxJS ä¹Ÿæ”¯æŒ Node.js EventEmitter çš„äº‹ä»¶å‹¾å­ã€‚ å°†ä¸€ä¸ª DOM äº‹ä»¶è½¬æ¢æˆ RxJS æ•°æ®æµæŽ¥ä¸‹æ¥è¿™ä¸ªä¾‹å­ä¸ºé¼ æ ‡ç§»åŠ¨äº‹ä»¶åˆ›å»ºäº†ä¸€ä¸ª DOM äº‹ä»¶æ“ä½œï¼Œå¹¶ä¸”åœ¨é¡µé¢ä¸Šæ‰“å°å‡ºé¼ æ ‡çš„åæ ‡ã€‚ 123var result = document.getElementById('result');document.addEventListener('mousemove', e =&gt; result.innerHTML = e.clientX + ', ' + e.clientY, false); å¯¼å…¥ä¸€ä¸ªäº‹ä»¶åˆ° RxJS, ä½ å¯ä»¥ä½¿ç”¨ fromEvent æ“ä½œç¬¦ï¼Œå¹¶ä¸”ä¼ å…¥è¢«æ¡¥æŽ¥çš„äº‹ä»¶å‚æ•°ã€‚ç„¶åŽå®ƒä¼šå°†äº‹ä»¶è½¬æ¢æˆæ•°æ®æµã€‚ ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°† DOM çš„ mousemove äº‹ä»¶æµè½¬æ¢æˆäº‹ä»¶æµï¼ˆå¯è§‚å¯Ÿå¯¹è±¡ï¼‰ã€‚æ¯æ¬¡é¼ æ ‡ç§»åŠ¨äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œè®¢é˜…éƒ½ä¼šæŽ¥æ”¶åˆ°ä¸€ä¸ª onNext äº‹ä»¶ã€‚ç„¶åŽæˆ‘ä»¬å¯ä»¥æ£€æŸ¥è¿™ç§é€šçŸ¥çš„äº‹ä»¶å‚æ•°å¹¶èŽ·å¾—é¼ æ ‡çš„åæ ‡ã€‚ 12345var result = document.getElementById('result');var source = Rx.Observable.fromEvent(document, 'mousemove');var subscription = source.subscribe(e =&gt; result.innerHTML = e.clientX + ', ' + e.clientY); åœ¨è¿™ä¸ªä¾‹å­ä¸­è¦æ³¨æ„ï¼Œï¼ˆé¼ æ ‡ï¼‰ç§»åŠ¨å˜æˆä¸€ä¸ªæ•°æ®æµä»¥ä¾¿æˆ‘ä»¬è¿›ä¸€æ­¥æ“ä½œã€‚ Querying Observable Sequences è¿™ç¯‡æ–‡ç« å°†ä¼šå±•ç¤ºå¦‚ä½•å°†è¯¥åºåˆ—æŠ•å°„åˆ°ç‚¹ç±»åž‹é›†åˆä¸­å¹¶ç­›é€‰å…¶å†…å®¹ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºåªæŽ¥æ”¶æ»¡è¶³ä¸€å®šæ¡ä»¶çš„å€¼ã€‚ äº‹ä»¶å¤„ç†ç¨‹åºçš„é”€æ¯ç”± subscribe æ–¹æ³•è¿”å›žçš„ Disposable å¯¹è±¡å¤„ç†ã€‚è°ƒç”¨ dispose å°†ä¼šé‡Šæ”¾ç”±è¯¥åºåˆ—æ‰€ä½¿ç”¨çš„æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬åº•å±‚äº‹ä»¶å¤„ç†ç¨‹åºã€‚è¿™æœ¬è´¨ä¸Šæ˜¯å–æ¶ˆè®¢é˜…äº‹ä»¶ã€‚ fromEvent æ–¹æ³•è¿˜æ”¯æŒå‘å¤šä¸ªé¡¹ç›®æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼Œæ¯”å¦‚ä¸€æ•´ä¸ª DOM èŠ‚ç‚¹åˆ—è¡¨ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­å°†ä¼šç»™åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ æ·»åŠ  â€˜clickâ€™ äº‹ä»¶ã€‚ 123456var result = document.getElementById('result');var sources = document.querySelectorAll('div');var source = Rx.Observable.fromEvent(sources, 'click');var subscription = source.subscribe(e =&gt; result.innerHTML = e.clientX + ', ' + e.clientY); å¦å¤–ï¼ŒfromEvent ä¹Ÿæ”¯æŒç±»åº“ï¼Œåƒ jQuery, Zepto.js, AngularJS, Ember.js and Backbone.jsï¼š 123456var $result = $('#result');var $sources = $('div');var source = Rx.Observable.fromEvent($sources, 'click');var subscription = source.subscribe(e =&gt; $result.html(e.clientX + ', ' + e.clientY)); å¦‚æžœè¡¨çŽ°ä¸å¦‚é¢„æœŸï¼Œä½ å¯ä»¥é€šè¿‡è®¾ç½® Rx.config.useNativeEvents ä¸º true åŽ»é‡å†™å®ƒï¼Œè¿™ä¼šæ— è§†ä»»ä½•ç±»åº“ã€‚ 123456789// åªä½¿ç”¨åŽŸç”Ÿäº‹ä»¶ï¼Œå°½ç®¡å¼•ç”¨äº† jQueryRx.config.useNativeEvents = true;// åªä½¿ç”¨åŽŸç”Ÿäº‹ä»¶var result = document.getElementById('result');var source = Rx.Observable.fromEvent(document, 'mousemove');var subscription = source.subscribe(e =&gt; result.innerHTML = e.clientX + ', ' + e.clientY); å¦å¤–ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°ç»™äº‹ä»¶ç³»ç»Ÿçš„äº‹ä»¶æ·»åŠ è®¸å¤šå¿«æ·æ–¹å¼ï¼Œæ¯”å¦‚ mousemoveï¼Œ ç”šè‡³æ˜¯ Pointer and Touch äº‹ä»¶ã€‚ 1234567891011121314151617Rx.dom = &#123;&#125;;var events = "blur focus focusin focusout load resize scroll unload click dblclick " + "mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " + "change select submit keydown keypress keyup error contextmenu";if (root.PointerEvent) &#123; events += " pointerdown pointerup pointermove pointerover pointerout pointerenter pointerleave";&#125;if (root.TouchEvent) &#123; events += " touchstart touchend touchmove touchcancel";&#125;events.split(' ').forEach(e =&gt; &#123; Rx.dom[e] = (element, selector) =&gt; Rx.Observable.fromEvent(element, e, selector)&#125;); çŽ°åœ¨æˆ‘ä»¬å¯ä»¥é‡å†™å•ä¸ªé¼ æ ‡æ‹–æ‹½äº‹ä»¶ï¼š 1234567891011var draggable = document.getElementById('draggable');var mousedrag = Rx.dom.mousedown(draggable).flatMap(md =&gt; &#123; md.preventDefault(); var start = getLocation(md); return Rx.dom.mousemove(document) .map(mm =&gt; getDelta(start, mm)) .takeUntil(Rx.dom.mouseup(draggable));&#125;); æ³¨æ„è¿™åœ¨ RxJS-DOM é¡¹ç›®ä¸­å·²ç»å¯ç”¨ï¼Œä½†ä½ è‡ªå·±å®žçŽ°ä¹Ÿåªéœ€è¦å¾ˆå°‘é‡çš„ä»£ç ã€‚ å°† Node.js äº‹ä»¶è½¬æ¢æˆ RxJS æ•°æ®æµNode.js ä¹Ÿæ”¯æŒç±»ä¼¼ EventEmitter: 1234567891011var Rx = require('rx'), EventEmitter = require('events').EventEmitter;var eventEmitter = new EventEmitter();var source = Rx.Observable.fromEvent(eventEmitter, 'data')var subscription = source.subscribe(data =&gt; console.log('data: ' + data));eventEmitter.emit('data', 'foo');// =&gt; data: foo ä½¿ç”¨ FromEventPattern æ¡¥æŽ¥è‡ªå®šä¹‰äº‹ä»¶ä¸‹é¢æœ‰ä¸€ä¸ªä½¿ç”¨ç±»åº“å®žçŽ°äº‹ä»¶è®¢é˜…å’Œé€€è®¢çš„å®žä¾‹ã€‚fromEventPattern æ–¹æ³•å°±æ˜¯ä¸ºäº†è¿™ä¸ªç›®çš„è€Œåˆ›å»ºçš„ï¼Œç”¨æ¥æ¡¥æŽ¥è¿™äº›è‡ªå®šä¹‰äº‹ä»¶ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥æƒ³ä½¿ç”¨ jQuery on æ–¹æ³•åŽ»æ¡¥æŽ¥ã€‚æˆ‘ä»¬å¯ä»¥å°†ä¸‹åˆ—ä»£ç è½¬æ¢ä¸ºåŸºäºŽè¡¨æ ¼è¡Œå•å‡»çš„ alertã€‚ 1$( "#dataTable tbody" ).on('click', 'tr', e =&gt; alert($( e.target ).text())); ä½¿ç”¨ fromEventPattern æ–¹æ³•è½¬æ¢åŽçš„ä»£ç çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ã€‚æ¯ä¸ªå‡½æ•°åœ¨å¤„ç†å‡½æ•°ä¸­ä¼ é€’ï¼Œå…è®¸æ‚¨è°ƒç”¨ on å’Œ off æ–¹æ³•æ¥æ­£ç¡®å¤„ç†äº‹ä»¶çš„å¤„ç†ã€‚ 1234567var $tbody = $('#dataTable tbody');var source = Rx.Observable.fromEventPattern( function addHandler (h) &#123; $tbody.on('click', 'tr', h); &#125;, function delHandler (h) &#123; $tbody.off('click', 'tr', h); &#125;);var subscription = source.subscribe(e =&gt; alert($( e.target ).text())); é™¤äº†è¿™ç§å¸¸ç”¨çš„æ”¯æŒå¤–ï¼Œæˆ‘ä»¬ä¹Ÿæ”¯æŒ addHandler è¿”å›žä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¯ä»¥é€šè¿‡ removeHandler åŽ»å®Œå…¨é€€è®¢ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Dojo Toolkit å’Œ on æ¨¡å—ã€‚ 123456789101112131415161718192021require(['dojo/on', 'dojo/dom', 'rx', 'rx.async', 'rx.binding'], (on, dom, rx) =&gt; &#123; var input = dom.byId('input'); var source = Rx.Observable.fromEventPattern( function addHandler (h) &#123; return on(input, 'click', h); &#125;, function delHandler (_, signal) &#123; signal.remove(); &#125; ); var subscription = source.subscribe( x =&gt; console.log('Next: Clicked!'), err =&gt; console.log('Error: ' + err), () =&gt; console.log('Completed')); on.emit(input, 'click'); // =&gt; Next: Clicked!&#125;); ç›¸å…³å†…å®¹æ¦‚å¿µ Querying Observable Sequences æœ¬æ–‡ç¿»è¯‘åœ¨: RxJSä¸­æ–‡æ–‡æ¡£]]></content>
      <categories>
        <category>RxJS</category>
      </categories>
      <tags>
        <tag>RxJS</tag>
        <tag>bridging</tag>
        <tag>event</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨RxJSåˆ›å»ºå’Œè®¢é˜…å•ä¸€æ•°æ®æµ]]></title>
    <url>%2F2017%2F05%2F04%2F%E5%88%9B%E5%BB%BA%E5%92%8C%E8%AE%A2%E9%98%85%E5%8D%95%E4%B8%80%E6%95%B0%E6%8D%AE%E6%B5%81%2F</url>
    <content type="text"><![CDATA[æ¥è‡ª åˆ›å»ºå’Œè®¢é˜…å•ä¸€å¯è§‚å¯Ÿåºåˆ—ä½ ä¸éœ€è¦åŽ»å®žçŽ° Observable ç±»åŽ»åˆ›å»ºä¸€ä¸ªå¯è§‚å¯Ÿåºåˆ—ã€‚ åŒæ ·çš„ï¼Œä½ ä¹Ÿä¸éœ€è¦åŽ»å®žçŽ° Observer åŽ»è®¢é˜…æ•°æ®æµã€‚é€šè¿‡å®‰è£… Rx åº“ï¼Œä½ å¯ä»¥åˆ©ç”¨ Observableç±»åž‹ï¼Œå®ƒæä¾›äº†è®¸å¤šæ“ä½œç¬¦æ¥æ ¹æ®é›¶ä¸ªï¼Œä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åŽ»åˆ›å»ºä¸€ä¸ªæ•°æ®æµã€‚å¦å¤–ï¼Œ RxJS è¿˜æä¾› subscribe æ–¹æ³•å…è®¸ä½ ä½¿ç”¨ onNext, onError å’Œ onCompleted å‡½æ•°ã€‚ ä»Žé›¶åˆ›å»ºä¸€ä¸ªæ•°æ®æµåœ¨ä½¿ç”¨æ“ä½œç¬¦ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€çœ‹æ€Žæ ·ä½¿ç”¨ Rx.Observable.create æ–¹æ³•ä»Žé›¶åˆ›å»º Observable ã€‚ é¦–å…ˆï¼Œ æˆ‘ä»¬éœ€è¦ç¡®è®¤å¼•ç”¨äº† rx.js æ ¸å¿ƒæ–‡ä»¶ã€‚ 1&lt;script src="rx.js"&gt;&lt;/script&gt; å¦‚æžœæˆ‘ä»¬ä½¿ç”¨ Node.jsï¼Œ æˆ‘ä»¬å¯ä»¥è¿™æ ·å¼•å…¥: 1var Rx = require('rx'); åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ æˆ‘ä»¬å°†åªäº§ç”Ÿä¸€ä¸ªå•ä¸€å€¼42ï¼Œç„¶åŽæ ‡è®°ä¸ºå®Œæˆã€‚ å¦‚æžœä¸éœ€è¦æ¸…é™¤ï¼Œè¿”å›žå€¼æ˜¯å®Œå…¨å¯é€‰çš„ã€‚ 12345678910111213141516171819var source = Rx.Observable.create(observer =&gt; &#123; // äº§ç”Ÿä¸€ä¸ªå•ä¸€å€¼ç„¶åŽå®Œæˆã€‚ observer.onNext(42); observer.onCompleted(); // ä»»ä½•æ¸…é™¤çš„é€»è¾‘å†™åœ¨è¿™é‡Œ return () =&gt; console.log('disposed')&#125;);var subscription = source.subscribe( x =&gt; console.log('onNext: %s', x), e =&gt; console.log('onError: %s', e), () =&gt; console.log('onCompleted'));// =&gt; onNext: 42// =&gt; onCompletedsubscription.dispose();// =&gt; disposed å¯¹äºŽå¤§å¤šæ•°æ“ä½œï¼Œ è¿™å®Œå…¨æ˜¯å¤šä½™çš„ï¼Œä½†è¿™å±•ç¤ºäº†éžå¸¸åŸºç¡€çš„å¤§éƒ¨åˆ† RxJS æ“ä½œç¬¦æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ åˆ›å»ºåŠè®¢é˜…å•ä¸€æ•°æ®æµæŽ¥ä¸‹æ¥çš„ä¾‹å­ä½¿ç”¨ Observable ç±»çš„ range æ“ä½œç¬¦æ¥åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€äº›æ•°å­—çš„å•ä¸€æ•°æ®æµã€‚è§‚å¯Ÿè€…ä½¿ç”¨ Observable ç±»çš„ Subscribe è®¢é˜…è¿™ä¸ªæ•°æ®æµé›†åˆï¼Œ å¹¶ä¸”å¤„ç†å›žè°ƒ onNext, onError and onCompletedã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªä»Ž x å¼€å§‹çš„æ•´æ•°åºåˆ—ï¼Œç„¶åŽæŽ¥ä¸‹æ¥äº§ç”Ÿ y ä¸ªã€‚ åªè¦è®¢é˜…äº†æ•°æ®æµï¼Œæ•°æ®å°±ä¼šå‘é€ç»™è§‚å¯Ÿè€…ã€‚onNextå‡½æ•°ä¼šæ‰“å°å‡ºè¿™ä¸ªå€¼ã€‚ 123456789101112131415// åˆ›å»ºä¸€ä¸ªä»Ž 1 å¼€å§‹ï¼ŒåŒ…å« 5 ä¸ªæ•´æ•°çš„æ•°æ®æµvar source = Rx.Observable.range(1, 5);// æ‰“å°æ¯ä¸ªå€¼var subscription = source.subscribe( x =&gt; console.log('onNext: %s', x), e =&gt; console.log('onError: %s', e), () =&gt; console.log('onCompleted'));// =&gt; onNext: 1// =&gt; onNext: 2// =&gt; onNext: 3// =&gt; onNext: 4// =&gt; onNext: 5// =&gt; onCompleted å½“ä¸€ä¸ªè§‚å¯Ÿè€…è®¢é˜…äº†ä¸€ä¸ªæ•°æ®æµï¼Œ subscribe æ–¹æ³•èƒŒåŽä½¿ç”¨çš„å¼‚æ­¥æ“ä½œå–å†³äºŽæ“ä½œç¬¦ã€‚å› äº›ï¼Œ subscribe çš„è°ƒç”¨æ˜¯å¼‚æ­¥çš„ï¼Œå› ä¸ºè°ƒç”¨è€…åœ¨å®Œæˆåºåˆ—è§‚å¯Ÿä¹‹å‰ä¸ä¼šè¢«é˜»å¡žã€‚è¿™ç¯‡æ–‡ç«  Using Schedulers æä¾›äº†æ›´å¤šä¿¡æ¯ã€‚ æ³¨æ„ subscribe æ–¹æ³•è¿”å›žä¸€ä¸ª Disposableï¼Œæ‰€ä»¥ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°é€€è®¢å’Œé”€æ¯å®ƒã€‚å½“ä½ åœ¨å¯è§‚å¯Ÿå¯¹è±¡ä¸Šè°ƒç”¨ dispose æ–¹æ³•æ—¶ï¼Œè§‚å¯Ÿè€…å°†ä¼šåœæ­¢ç›‘å¬æ•°æ®æµã€‚æ­£å¸¸æ¥è¯´ï¼Œä½ ä¸éœ€è¦ç²¾ç¡®åœ°è°ƒç”¨ dispose é™¤éžä½ éœ€è¦æå‰é€€è®¢ï¼Œæˆ–è€…å½“æ•°æ®æµçš„ç”Ÿå‘½å‘¨æœŸæ¯”è§‚å¯Ÿè€…çš„è¿˜é•¿ã€‚ Rx çš„è®¢é˜…è¢«è®¾è®¡æˆ è§¦å‘-ä¸¢å¼ƒ çš„åœºæ™¯ï¼Œå¹¶ä¸éœ€è¦ç»ˆç»“è€…ã€‚æ³¨æ„åˆ°ï¼Œå¯è§‚å¯Ÿå¯¹è±¡çš„æ“ä½œç¬¦çš„é»˜è®¤è¡¨çŽ°æ˜¯ åªè¦æœ‰å¯èƒ½ï¼ˆæ¯”å¦‚ï¼ŒonCompleted æˆ– onError æ¶ˆæ¯è¢«å‘é€æ—¶ï¼‰ï¼Œè®¢é˜…å°±ä¼šè¢«é”€æ¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢çš„ä»£ç å°†ä¼šè®¢é˜… a å’Œ b ä¸¤ä¸ªæ•°æ®æµã€‚å¦‚æžœ a æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œ x ä¼šç«‹å³é€€è®¢ b ã€‚ 1var x = Rx.Observable.zip(a, b, (a1, b1) =&gt; a1 + b1).subscribe(); è¿˜å¯ä»¥è°ƒæ•´ä»£ç ç¤ºä¾‹ä»¥ä½¿ç”¨è§‚å¯Ÿè€…çš„ Create è¿ç®—ç¬¦ï¼Œåˆ›å»ºå¹¶ä»ŽæŒ‡å®šçš„ OnNext, OnError, å’Œ OnCompleted å›žè°ƒè¿”å›žä¸€ä¸ªè§‚å¯Ÿè€…ã€‚ç„¶åŽä½ å¯ä»¥ä¼ é€’ observer ç»™ observable çš„ subscribe æ–¹æ³•ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†è¿™ç§å†™æ³•ã€‚ 123456789101112131415161718// åˆ›å»ºåŒ…å« 5ä¸ªæ•´æ•°çš„æ•°æ®æµï¼Œä»Ž 1 å¼€å§‹var source = Rx.Observable.range(1, 5);// åˆ›å»ºè§‚å¯Ÿè€…var observer = Rx.Observer.create( x =&gt; console.log('onNext: %s', x), e =&gt; console.log('onError: %s', e), () =&gt; console.log('onCompleted'));// æ‰“å°æ¯ä¸ªç»“æžœvar subscription = source.subscribe(observer);// =&gt; onNext: 1// =&gt; onNext: 2// =&gt; onNext: 3// =&gt; onNext: 4// =&gt; onNext: 5// =&gt; onCompleted å¦å¤–ï¼Œä»Žé›¶åˆ›å»ºä¸€ä¸ªæ•°æ®æµï¼Œä½ ä¹Ÿå¯ä»¥å°†å·²å­˜åœ¨çš„ æ•°æ®ï¼Œ äº‹ä»¶ï¼Œå›žè°ƒä»¥åŠ promise è½¬æ¢æˆæ•°æ®æµã€‚ä¸‹ä¸€èŠ‚çš„ä¸»é¢˜å°†ä¼šæ•™ä½ æ€Žä¹ˆåšã€‚ æ³¨æ„ï¼Œè¿™ä¸€èŠ‚åªå±•ç¤ºäº†å¯ä»¥ä»Žé›¶åˆ›å»ºæ•°æ®æµçš„å¾ˆå°‘ä¸€éƒ¨åˆ†æ“ä½œç¬¦ã€‚å­¦ä¹ æ›´å¤šå…¶ä»–çš„ LINQ æ“ä½œç¬¦ï¼Œ å¯ä»¥æŸ¥çœ‹ Querying Observable Sequences. ä½¿ç”¨å®šæ—¶å™¨æŽ¥ä¸‹æ¥çš„ä¾‹å­ä½¿ç”¨ timer æ“ä½œç¬¦åŽ»åˆ›å»ºä¸€ä¸ªæ•°æ®æµã€‚ è¿™ä¸ªæ•°æ®æµå°†åœ¨5ç§’åŽè¾“å‡ºç¬¬ä¸€ä¸ªå€¼ï¼ŒæŽ¥ç€æ¯1ç§’è¾“å‡ºåŽé¢çš„å€¼ã€‚ä¸ºäº†è¯´æ˜Žï¼Œ æˆ‘ä»¬é…åˆ timestamp æ“ä½œç¬¦åŽ»æŸ¥è¯¢ï¼Œä½¿æ¯ä¸€ä¸ªè¢«æŽ¨å‡ºæ¥çš„å€¼å°†åœ¨å‘å¸ƒæ—¶è¿½åŠ æ—¶é—´æˆ³ã€‚è¿™æ ·ï¼Œå½“æˆ‘ä»¬è®¢é˜…è¿™ä¸ªæ•°æ®æºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŽ¥æ”¶åˆ°å€¼å’Œæ—¶é—´æˆ³ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç¡®è®¤æˆ‘ä»¬æ˜¯å¦åœ¨æµè§ˆå™¨å¼•å…¥äº†ç›¸å…³çš„æ–‡ä»¶ã€‚æ³¨æ„ RxJS NPM åŒ…å·²ç»é»˜è®¤åŒ…å«äº†æ‰€æœ‰æ“ä½œç¬¦ã€‚ 12&lt;script src="rx.js"&gt;&lt;/script&gt;&lt;script src="rx.time.js"&gt;&lt;/script&gt; ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ä¾‹å­ï¼š 123456789101112131415console.log('Current time: ' + Date.now());var source = Rx.Observable.timer( 5000, /* 5 ç§’ */ 1000 /* 1 ç§’ */) .timestamp();var subscription = source.subscribe( x =&gt; console.log(x.value + ': ' + x.timestamp));/* è¾“å‡ºå¯èƒ½åƒè¿™æ ·å­ */// Current time: 1382560697820// 0: 1382560702820// 1: 1382560703820// 2: 1382560704820 é€šè¿‡ä½¿ç”¨ timestamp æ“ä½œç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥è¯å®žï¼Œç¬¬ä¸€ä¸ªå€¼ç¡®å®žæ˜¯å¼€å§‹5ç§’åŽè¾“å‡ºï¼Œç„¶åŽæ¯1ç§’è¾“å‡ºä¸€ä¸ªå€¼ã€‚ å°†æ•°ç»„å’Œå¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºæ•°æ®æµä½¿ç”¨ Rx.Observable.from æ“ä½œç¬¦ï¼Œä½ å¯ä»¥å°†ä¸€ä¸ªæ•°ç»„è½¬æ¢ä¸ºæ•°æ®æµã€‚ 1234567891011121314151617var array = [1,2,3,4,5];// å°†æ•°ç»„è½¬æ¢ä¸ºæ•°æ®æµvar source = Rx.Observable.from(array);// è¾“å‡ºæ¯ä¸ªå€¼var subscription = source.subscribe( x =&gt; console.log('onNext: %s', x), e =&gt; console.log('onError: %s', e), () =&gt; console.log('onCompleted'));// =&gt; onNext: 1// =&gt; onNext: 2// =&gt; onNext: 3// =&gt; onNext: 4// =&gt; onNext: 5// =&gt; onCompleted ä½ ä¹Ÿå¯ä»¥è½¬æ¢ç±»æ•°ç»„ç»“æž„ï¼Œæ¯”å¦‚åŒ…å« length å±žæ€§å’Œæ•°å­—ç´¢å¼•çš„å¯¹è±¡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªç®€å•æœ‰ä¸€ä¸ªåŒ…å«é•¿åº¦ä¸º5çš„å¯¹è±¡ã€‚ 1234567891011121314151617var arrayLike = &#123; length: 5 &#125;;// è½¬æ¢æ•°ç»„ä¸ºæ•°æ®æµvar source = Rx.Observable.from(arrayLike, (v, k) =&gt; k);// è¾“å‡ºæ¯ä¸ªå€¼var subscription = source.subscribe( x =&gt; console.log('onNext: %s', x), e =&gt; console.log('onError: %s', e), () =&gt; console.log('onCompleted'));// =&gt; onNext: 1// =&gt; onNext: 2// =&gt; onNext: 3// =&gt; onNext: 4// =&gt; onNext: 5// =&gt; onCompleted å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ ES6 å¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚ Map å’Œ Set ä½¿ç”¨ from è½¬æ¢æˆæ•°æ®æµã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†èŽ·å–ä¸€ä¸ª Set å¯¹è±¡ï¼Œå¹¶ä¸”å°†å®ƒè½¬æ¢æˆæ•°æ®æµã€‚ 1234567891011121314151617var set = new Set([1,2,3,4,5]);// è½¬æ¢ Set ä¸ºæ•°æ®æµvar source = Rx.Observable.from(set);// è½¬å‡ºæ¯ä¸ªå€¼var subscription = source.subscribe( x =&gt; console.log('onNext: %s', x), e =&gt; console.log('onError: %s', e), () =&gt; console.log('onCompleted'));// =&gt; onNext: 1// =&gt; onNext: 2// =&gt; onNext: 3// =&gt; onNext: 4// =&gt; onNext: 5// =&gt; onCompleted æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å®ƒåº”ç”¨åœ¨ Map å¯¹è±¡ä¸Šé¢ã€‚ 1234567891011121314var map = new Map([['key1', 1], ['key2', 2]]);// å°† Map è½¬æ¢æˆæ•°æ®æµvar source = Rx.Observable.from(map);// æ‰“å°æ¯ä¸ªå€¼var subscription = source.subscribe( x =&gt; console.log('onNext: %s', x), e =&gt; console.log('onError: %s', e), () =&gt; console.log('onCompleted'));// =&gt; onNext: key1, 1// =&gt; onNext: key2, 2// =&gt; onCompleted from æ–¹æ³•ä¹Ÿæ”¯æŒ ES6 generatorsï¼Œå¯ä»¥ä½ çš„æµè§ˆå™¨å·²ç»æ”¯æŒï¼Œæˆ–å°†è¦æ”¯æŒã€‚è¿™å…è®¸æˆ‘ä»¬å®žçŽ°ä¸€äº›åƒ æ–æ³¢é‚£å¥‘åºåˆ— ç­‰ï¼Œå¹¶å°†å®ƒä»¬è½¬æ¢æˆæ•°æ®æµã€‚ 1234567891011121314151617181920212223242526function* fibonacci () &#123; var fn1 = 1; var fn2 = 1; while (1)&#123; var current = fn2; fn2 = fn1; fn1 = fn1 + current; yield current; &#125;&#125;// å°† generator è½¬æ¢æˆæ•°æ®æµvar source = Rx.Observable.from(fibonacci()).take(5);// æ‰“å°æ¯ä¸ªå€¼var subscription = source.subscribe( x =&gt; console.log('onNext: %s', x), e =&gt; console.log('onError: %s', e), () =&gt; console.log('onCompleted'));// =&gt; onNext: 1// =&gt; onNext: 1// =&gt; onNext: 2// =&gt; onNext: 3// =&gt; onNext: 5// =&gt; onCompleted å†·ï¼ˆæƒ°æ€§ï¼‰ vs. çƒ­ï¼ˆéžæƒ°æ€§ï¼‰ æ•°æ®æµå†·æ•°æ®æµçš„å¼€å§‹è¿è¡Œå–å†³äºŽè®¢é˜…ï¼Œæ¯”å¦‚ï¼Œæ•°æ®æµåªæœ‰å½“ subscribe è°ƒç”¨çš„æ—¶å€™æ‰å¼€å§‹è¾“å‡ºå€¼ã€‚ç”¨æˆ·ä¹‹é—´ä¹Ÿæ²¡æœ‰å…±äº«å€¼ã€‚è¿™äº›æ˜¯ä¸Žçƒ­æ•°æ®æµçš„ä¸åŒä¹‹å¤„ï¼Œçƒ­æ•°æ®åƒæµé¼ æ ‡ç§»åŠ¨äº‹ä»¶æˆ–è‚¡ç¥¨ä»£ç è¿™æ ·çš„è®¢é˜…æ—¶å°±å·²ç»ä¸æ–­è¾“å‡ºå€¼ã€‚å½“è§‚å¯Ÿè€…è®¢é˜…çƒ­æ•°æ®æµæ—¶ï¼Œå®ƒå°†ä¼šèŽ·å–æµçš„å®žæ—¶å€¼ã€‚çƒ­æ•°æ®æµæ˜¯ä¸Žæ‰€æœ‰è®¢é˜…è€…å…±äº«çš„ï¼Œæ¯ä¸ªè®¢é˜…è€…æŒ‰é¡ºåºæŽ¨é€ä¸‹ä¸€ä¸ªå€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå°±ç®—æ²¡æœ‰äººè®¢é˜…ä¸€ä¸ªç‰¹å®šçš„è‚¡ç¥¨ï¼Œè‚¡ç¥¨å¸‚åœºä¹Ÿå°†ç»§ç»­æ ¹æ®å¸‚åœºåŠ¨å‘æ›´æ–°å…¶ä»·å€¼ã€‚å½“æœ‰æ³¨å†Œè€…å¯¹è¿™æ”¯è‚¡ç¥¨æ„Ÿå…´è¶£æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨èŽ·å¾—è‚¡ç¥¨çš„æœ€æ–°å€¼ã€‚ ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºäº†ä¸€ä¸ªå†·æ•°æ®æµã€‚è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Interval æ“ä½œç¬¦åŽ»åˆ›å»ºä¸€ä¸ªå•ä¸€æ•°æ®æµå¹¶åœ¨ç‰¹å®šçš„æ—¶é—´é—´éš”è¾“å‡ºå€¼ï¼Œè¿™ä¸ªä¾‹å­ä¸­æ˜¯é—´éš”1ç§’ã€‚ ä¸¤ä¸ªè§‚å¯Ÿè€…è®¢é˜…è¿™ä¸ªæ•°æ®æµå¹¶æ‰“å°è¾“å‡ºå€¼ã€‚ä½ ä¼šæ³¨æ„åˆ°æ•°æ®æµä¼šä¸ºæ¯ä¸ªè®¢é˜…è€…é‡ç½®ï¼Œç¬¬äºŒä¸ªè®¢é˜…è€…ä¹Ÿæ˜¯ä»Žç¬¬1ä¸ªå€¼å¼€å§‹çš„ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨æµè§ˆå™¨ä¸­å¼•å…¥äº†ç›¸å…³æ–‡ä»¶ã€‚æ³¨æ„ RxJS NPM åŒ…å·²ç»é»˜è®¤åŒ…å«äº†æ‰€æœ‰æ“ä½œç¬¦ã€‚ 1&lt;script src="rx.lite.js"&gt;&lt;/script&gt; ç„¶åŽæ˜¯ä¾‹å­ï¼š 12345678910111213141516171819202122232425var source = Rx.Observable.interval(1000);var subscription1 = source.subscribe( x =&gt; console.log('Observer 1: onNext: ' + x), e =&gt; console.log('Observer 1: onError: ' + e.message), () =&gt; console.log('Observer 1: onCompleted'));var subscription2 = source.subscribe( x =&gt; console.log('Observer 2: onNext: ' + x), e =&gt; console.log('Observer 2: onError: ' + e.message), () =&gt; console.log('Observer 2: onCompleted'));setTimeout(() =&gt; &#123; subscription1.dispose(); subscription2.dispose();&#125;, 5000);// =&gt; Observer 1: onNext: 0// =&gt; Observer 2: onNext: 0// =&gt; Observer 1: onNext: 1// =&gt; Observer 2: onNext: 1// =&gt; Observer 1: onNext: 2// =&gt; Observer 2: onNext: 2// =&gt; Observer 1: onNext: 3// =&gt; Observer 2: onNext: 3 æŽ¥ä¸‹æ¥çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ publish æ“ä½œç¬¦å°†å‰é¢çš„å†·æ•°æ®æºè½¬æ¢æˆçƒ­æ•°æ®æºï¼Œè¿”å›žä¸€ä¸ª ConnectableObservable å®žä¾‹ï¼Œæˆ‘ä»¬ç§°ä¸º hotã€‚publish æ“ä½œç¬¦é€šè¿‡å‘å¤šä¸ªè®¢é˜…æœåŠ¡å™¨å¹¿æ’­å•ä¸ªè®¢é˜…æ¥æä¾›å…±äº«è®¢é˜…çš„æœºåˆ¶ã€‚hotå˜é‡ä½œä¸ºä»£ç†è®¢é˜… sourceï¼Œå› ä¸ºå®ƒä»Ž source æŽ¥æ”¶å€¼ï¼ŒæŽ¨åˆ°è‡ªå·±çš„ç”¨æˆ·. æˆ‘ä»¬ä½¿ç”¨ ConnectableObservable.prototype.connect å»ºç«‹è®¢é˜…çš„å¤‡ä»½æºï¼Œå¹¶å¼€å§‹æŽ¥æ”¶å€¼ã€‚å› ä¸º ConnectableObservable ç»§æ‰¿è‡ª Observableï¼Œ æˆ‘ä»¬å¯ä»¥åœ¨å®ƒè¿è¡Œä¹‹å‰ä½¿ç”¨ subscribe åŽ»è®¢é˜…è¿™ä¸ªçƒ­æ•°æ®æµã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­è¦æ³¨æ„ï¼Œå½“ subscription1è®¢é˜…å®ƒçš„æ—¶å€™çƒ­æ•°æ®æµè¿˜æ²¡æœ‰å¼€å§‹ã€‚å› äº›ï¼Œæ²¡æœ‰å€¼è¾“å‡ºç»™è®¢é˜…è€…ã€‚åªæœ‰è°ƒç”¨ Connect ä¹‹åŽï¼Œè¾“å‡ºå€¼æ‰ä¼šæŽ¨é€ç»™ subscription1ã€‚3ç§’çš„å»¶è¿Ÿä¹‹åŽï¼Œsubscription2 è®¢é˜…äº†çƒ­æ•°æ®æµï¼Œå¹¶ä¸”ç«‹å³å¼€å§‹æŽ¥æ”¶å½“å‰è¾“å‡ºå€¼ï¼ˆå½“å‰å€¼æ˜¯3ï¼‰ï¼Œä¸€ç›´åˆ°æœ€åŽã€‚è¾“å‡ºç»“æžœçœ‹èµ·æ¥åƒè¿™æ ·ï¼š 123456789101112// =&gt; Current time: 1382562433256// =&gt; Current Time after 1st subscription: 1382562433260// =&gt; Current Time after connect: 1382562436261// =&gt; Observer 1: onNext: 0// =&gt; Observer 1: onNext: 1// =&gt; Current Time after 2nd subscription: 1382562439262// =&gt; Observer 1: onNext: 2// =&gt; Observer 2: onNext: 2// =&gt; Observer 1: onNext: 3// =&gt; Observer 2: onNext: 3// =&gt; Observer 1: onNext: 4// =&gt; Observer 2: onNext: 4 é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç¡®è®¤æˆ‘ä»¬å¼•å…¥äº†ç›¸å…³æ–‡ä»¶ã€‚æ³¨æ„ RxJS NPMåŒ…å·²ç»é»˜è®¤åŒ…å«äº†æ‰€æœ‰æ“ä½œç¬¦ã€‚ 1&lt;script src="rx.lite.js"&gt;&lt;/script&gt; æŽ¥ä¸‹æ¥æ˜¯ä¾‹å­ï¼ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849console.log('Current time: ' + Date.now());// åˆ›å»ºä¸€ä¸ªæ•°æ®æµvar source = Rx.Observable.interval(1000);// å°†æ•°æ®æµè½¬æ¢æˆçƒ­æ•°æ®æµvar hot = source.publish();// ç¬¬ä¸€ä¸ªè®¢é˜…æ—¶æ²¡æœ‰å€¼è¾“å‡ºvar subscription1 = hot.subscribe( x =&gt; console.log('Observer 1: onNext: %s', x), e =&gt; console.log('Observer 1: onError: %s', e), () =&gt; console.log('Observer 1: onCompleted'));console.log('Current Time after 1st subscription: ' + Date.now());// ç©ºé—² 3 ç§’setTimeout(() =&gt; &#123; // çƒ­æ•°æ®æºè¿žæŽ¥å¹¶å¼€å§‹è¾“å‡ºå€¼ç»™è®¢é˜…è€… hot.connect(); console.log('Current Time after connect: ' + Date.now()); // åˆç©ºé—² 3 ç§’ setTimeout(() =&gt; &#123; console.log('Current Time after 2nd subscription: ' + Date.now()); var subscription2 = hot.subscribe( x =&gt; console.log('Observer 2: onNext: %s', x), e =&gt; console.log('Observer 2: onError: %s', e), () =&gt; console.log('Observer 2: onCompleted')); &#125;, 3000);&#125;, 3000);// =&gt; Current Time after connect: 1431197578426// =&gt; Observer 1: onNext: 0// =&gt; Observer 1: onNext: 1// =&gt; Observer 1: onNext: 2// =&gt; Current Time after 2nd subscription: 1431197581434// =&gt; Observer 1: onNext: 3// =&gt; Observer 2: onNext: 3// =&gt; Observer 1: onNext: 4// =&gt; Observer 2: onNext: 4// =&gt; Observer 1: onNext: 5// =&gt; Observer 2: onNext: 5// =&gt; ... ç±»æŽ¨ è¿™æœ‰åŠ©äºŽæ€è€ƒå†·çƒ­æ•°æ®æºçš„å…³ç³»ï¼Œå°±åƒä¸€ä¸ªäººçœ‹ï¼ˆsubscribeï¼‰ç”µå½±å’Œè¡¨æ¼”ã€‚ å†·æ•°æ®æµï¼šç”µå½±ã€‚ çƒ­æ•°æ®æµï¼šçŽ°åœºæ¼”å‡º é‡æ’­çƒ­æ•°æ®æµï¼šå½•æ’­çŽ°åœºæ¼”å‡º ä½ ç®¡ä½ ä½•æ—¶è§‚çœ‹ç”µå½±ï¼Œä½ çœ‹ç”µå½±å’Œåˆ«äººçœ‹éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå°½ç®¡æ‰€æœ‰è§‚çœ‹è€…çœ‹çš„éƒ½æ˜¯ç›¸åŒçš„å†…å®¹ã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€ä¸ªè¡¨æ¼”æ˜¯ä¸Žå¤šä¸ªè§‚çœ‹éƒ½ä¸€èµ·åˆ†äº«çš„ã€‚å¦‚æžœä½ è¿Ÿåˆ°äº†ï¼Œä½ å°†ä¼šé”™è¿‡ä¸€éƒ¨åˆ†ã€‚ä¸ç®¡æ€Žæ ·ï¼Œå¦‚æžœè®°å½•ä¸‹æ¥äº†ï¼ˆåœ¨ RxJSä¸­å¯ä»¥ä½¿ç”¨ BehaviorSubject æˆ– ReplaySubjectï¼‰ï¼Œä½ ä¹Ÿå¯åƒçœ‹ç”µå½±ä¸€æ ·çœ‹çŽ°åœºæ¼”å‡ºã€‚.publish().refCount() çŽ°åœºè¡¨æ¼”æ˜¯è‰ºæœ¯å®¶åœ¨æ²¡æœ‰äººè§‚çœ‹çš„æƒ…å†µä¸‹é€€å‡ºæ¯”èµ›ï¼Œå½“è§‚ä¼—ä¸­è‡³å°‘æœ‰ä¸€äººå‡ºçŽ°æ—¶ï¼Œä»–ä¼šé‡æ–°å¼€å§‹æ¼”å¥ã€‚]]></content>
      <categories>
        <category>RxJS</category>
      </categories>
      <tags>
        <tag>RxJS</tag>
        <tag>Observable</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Coverageé’ˆå¯¹jså’Œcssçš„ä»£ç è¦†ç›–æ£€æµ‹-Chrome_devtoolsçš„æ–°åŠŸèƒ½]]></title>
    <url>%2F2017%2F04%2F06%2FCoverage%E9%92%88%E5%AF%B9js%E5%92%8Ccss%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A6%86%E7%9B%96%E6%A3%80%E6%B5%8B-Chrome-devtools%E7%9A%84%E6%96%B0%E5%8A%9F%E8%83%BD%2F</url>
    <content type="text"><![CDATA[ä¹Ÿè®¸ä½ ä¹‹å‰ç”¨è¿‡ä¸€äº›åƒ css usageã€css used è¿™æ ·çš„æµè§ˆå™¨æ’ä»¶åŽ»æ£€æµ‹ä»£ç è¦†ç›–çŽ‡ã€‚ä½†çŽ°åœ¨ï¼ŒChromeçš„å®žéªŒç‰ˆæœ¬Canaryç»ˆäºŽå®žçŽ°äº†ä»£ç è¦†ç›–çŽ‡æ£€æµ‹ï¼Œè¿™æ„å‘³ç€å®ƒå°†å¾ˆå¿«æ™®åŠåˆ°æ­£å¼ç‰ˆæœ¬ã€‚è¿™æ˜¯ä¸€ä¸ªä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼Œåœ¨ä½¿ç”¨JavaScriptå’ŒCSSæ—¶éžå¸¸æœ‰ç”¨ï¼Œæ‰€ä»¥æˆ‘ä¼šåšä¸€ä¸ªå¿«é€Ÿçš„æ¼”ç¤ºï¼Œå¹¶æŽ¢ç´¢å®ƒå¦‚ä½•ä½¿ç”¨ã€‚ å®ƒåšäº†äº›ä»€ä¹ˆäº‹æƒ…ä»£ç è¦†ç›–å¯ä»¥åœ¨æ‚¨è¿è¡Œæ‚¨çš„Webåº”ç”¨ç¨‹åºçš„æ—¶å€™ï¼ŒéåŽ†æ¯ä¸ªJS / CSSæ–‡ä»¶ï¼Œçœ‹çœ‹å“ªäº›ä»£ç è¡Œè¿è¡Œï¼Œå“ªäº›ä»£ç æ²¡æœ‰è¿è¡Œã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘åšäº†ä¸€ä¸ªç®€å•çš„é™æ€ç½‘é¡µï¼ŒChromeç”Ÿæˆäº†é¡µé¢ä¸Šå­˜åœ¨çš„CSSå’ŒJSæ–‡ä»¶çš„é—®é¢˜æ±‡æ€»ã€‚å³ä¾§çš„æ æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„ç›¸å¯¹å¤§å°ï¼Œçº¢è‰²è¡¨ç¤ºæœªä½¿ç”¨çš„ä»£ç ï¼Œç»¿è‰²æ˜¾ç¤ºè¿è¡Œçš„ä»£ç ã€‚ è®°å½•ä»£ç è¦†ç›–èŒƒå›´ä¸Ždevtoolsæ—¶é—´è½´ç±»ä¼¼ï¼Œæ‚¨ç‚¹å‡»å¼€å§‹è®°å½•ï¼Œç„¶åŽåœ¨æ‚¨çš„ç«™ç‚¹è¿›è¡Œæ­£å¸¸çš„äº¤äº’ã€‚å®ŒæˆåŽï¼ŒChromeä¼šè¿›è¡Œä¸€äº›è®¡ç®—å¹¶ç”Ÿæˆè¯»æ•°ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å¾ˆå¥½å¥‡ç½‘ç«™ä¸Šæœ‰å¤šå°‘æœªä½¿ç”¨çš„CSSï¼Œæ‰€ä»¥æˆ‘å¯¼èˆªåˆ°å„ä¸ªå­é¡µé¢ï¼Œä»¥ç¡®ä¿æˆ‘è§¦åŠåˆ°æ¯ä¸ªcssã€‚æžœç„¶ï¼Œè¿™é‡Œæœ‰å¾ˆå¤šæ”¹è¿›çš„ç©ºé—´ï¼Œå› ä¸ºæˆ‘çš„ç½‘ç«™ä¸Šçš„cssçš„97ï¼…æ²¡æœ‰ä½¿ç”¨ï¼ Chromeè¿˜å¯è®©æ‚¨æ·±å…¥ç ”ç©¶å•ä¸ªæ–‡ä»¶çš„ä»£ç èŒƒå›´ã€‚åœ¨è¿™é‡Œï¼Œå·¦è¾¹çš„çº¢è‰²/ç»¿è‰²æ¡æ˜¾ç¤ºå“ªä¸€è¡Œæ‰§è¡Œäº†ï¼Œå“ªä¸€è¡Œæ²¡æœ‰ã€‚è¯·æ³¨æ„ï¼Œå½“æ£€æŸ¥æœ€å°åŒ–çš„æ–‡ä»¶æ—¶ï¼Œå¯ä»¥æŒ‰æ–‡ä»¶å·¦ä¸‹è§’çš„æŒ‰é’®æ¥â€œprettifyâ€ä»£ç ã€‚ è¿™æœ‰ä»€ä¹ˆç”¨åœ¨ä¸€ä¸ªå¤æ‚çš„æˆ–é•¿æœŸçš„é¡¹ç›®ä¸Šå·¥ä½œæ—¶ï¼Œå¾ˆå®¹æ˜“ç§¯ç´¯å†—ä½™ä»£ç ã€‚å¦‚æžœä½ ä½¿ç”¨ webpack æˆ–å¦ä¸€ä¸ªJSæž„å»ºç³»ç»Ÿï¼Œå¯ä»¥é˜²æ­¢å¤§å¤šæ•°æ— ç”¨çš„JSä»£ç ã€‚ä½†æ˜¯å¯¹äºŽCSSæ¥è¯´ï¼Œè¿™æ ·åšå¯èƒ½ä¼šæœ‰ç‚¹æ£˜æ‰‹ã€‚æœ‰äº†è¿™ä¸ªè¦†ç›–å·¥å…·ï¼Œåœ¨Chromeæ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„æ–¹å¼æ¥å¿«é€Ÿäº†è§£å¤šå°‘å†—ä½™çš„ä»£ç åœ¨è¿è¡Œï¼Œå“ªäº›æ–‡ä»¶éœ€è¦ä¼˜åŒ–ã€‚ å¦‚ä½•æ‰èƒ½ä½¿ç”¨å®ƒä¸‹è½½Chromeçš„å®žéªŒç‰ˆæœ¬Canaryæˆ–ç­‰å¾…æ­¤åŠŸèƒ½æ›´æ–°åˆ°æ­£å¼ç‰ˆæœ¬ã€‚ ã€è¯‘æ–‡å‚è€ƒã€‘ï¼šhttps://blog.logrocket.com/using-the-chrome-devtools-new-code-coverage-feature-ca96c3dddcaf]]></content>
      <categories>
        <category>Chrome_devtools</category>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>coverage</tag>
        <tag>Chrome_devtools</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­¦ä¹ RxJSéœ€è¦çŸ¥é“çš„å¥‡æ·«æŠ€å·§]]></title>
    <url>%2F2017%2F04%2F05%2F%E5%AD%A6%E4%B9%A0RxJS%E9%9C%80%E8%A6%81%E7%9F%A5%E9%81%93%E7%9A%84%E5%A5%87%E6%B7%AB%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨ Rx çš„å¥‡æ·«æŠ€å·§å°è¯•ç”»ç å®å›¾ä¸ºä½ æƒ³åˆ›å»ºçš„æµç”»ä¸€ä¸ªç å®å›¾ã€‚ é€šè¿‡ç”»ç å®å›¾ï¼Œä½ å°†ä¼šå¾ˆæ¸…æ¥šä½ åº”è¯¥ä½¿ç”¨å“ªäº›æ“ä½œç¬¦ã€‚ ç å®å›¾å°±æ˜¯æ¯ä¸ªç å®è¡¨ç¤ºå½“å‰çš„ä¸€ä¸ªäº‹ä»¶æˆ–çŠ¶æ€ã€‚ç å®å›¾éœ€è¦åŒ…å«è¾“å…¥å’Œè¾“å‡ºæµã€‚ é€šè¿‡ç”»ç å®å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨å¼‚æ­¥è°ƒç”¨äº‹ä»¶å›žè°ƒä¹‹å‰ï¼Œéœ€è¦å»¶è¿Ÿæ£€æµ‹ç”¨æˆ·çš„è¾“å…¥ã€‚åœ¨è¿™ä¸ªä¾‹å›¾é‡Œå±•ç¤ºçš„æ˜¯throttleæ“ä½œç¬¦çš„å»¶è¿Ÿã€‚ä»Žä¸€ä¸ªæµåˆ›å»ºå¦ä¸€ä¸ªæµï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ flatMap æˆ– selectMany æ“ä½œç¬¦ã€‚ç„¶åŽå°±æœ‰äº†ä¸‹é¢çš„ä»£ç ï¼š 1var dictionarySuggest = userInput.throttle(250).flatMap(input =&gt; serverCall(input)); ä½•æ—¶å¿½ç•¥è¿™æ¡æŒ‡å—å¦‚æžœä½ æ„Ÿè§‰ä½ å·²ç»å¯ä»¥å¾ˆç†Ÿç»ƒåœ°ç¼–å†™å‡ºä½ æƒ³è¦çš„æµï¼Œä½ å¯ä»¥çœåŽ»ç”»ç å®å›¾è¿™ä¸€æ­¥ã€‚ä¸ç®¡æ€Žæ ·ï¼Œå°±ç®—æ˜¯ Rx å›¢é˜Ÿçš„æˆå‘˜åœ¨å†™ä»£ç çš„æ—¶å€™ä¹Ÿä»ç„¶ä¼šå…ˆç”»ä¸€ç”»ç å®å›¾ã€‚ è°ƒç”¨ subscribe æ—¶ä¼ é€’å¤šä¸ªå‚æ•°ä¸ºäº†æ–¹ä¾¿ï¼Œ Rx æä¾›ä¸€ä¸ªsubscribeæ–¹æ³•æ¥åŠ è½½è§‚å¯Ÿè€…çš„å›žè°ƒå‡½æ•°ã€‚ è§‚å¯Ÿè€…åªéœ€è¦å®žçŽ°è¿™ä¸‰ä¸ªæ–¹æ³•ï¼ˆonNext, onError &amp; onCompletedï¼‰ã€‚ subscribeæ–¹æ³•çš„æ‰©å±•å…è®¸å¼€å‘äººå‘˜ä½¿ç”¨è¿™äº›æ–¹æ³•çš„é»˜è®¤é€‰é¡¹ã€‚ æ¯”å¦‚ï¼š å½“è°ƒç”¨subscribeæ–¹æ³•æ—¶åªæœ‰ä¸€ä¸ªonNextå‚æ•°ï¼ŒonErrorå°†æ•èŽ·æ¥è‡ªäº‹ä»¶æµçš„å¼‚å¸¸ã€‚onCompletedåœ¨è¿™é‡Œä»€ä¹ˆä¹Ÿä¸ä¼šåšã€‚ å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå¤„ç†å¼‚å¸¸æ˜¯å¾ˆé‡è¦çš„ï¼ˆä¸ç®¡æ˜¯å¯¹äºŽæ¢å¤è¿˜æ˜¯ä¸­æ–­åº”ç”¨ç¨‹åºï¼‰ã€‚ çŸ¥é“äº‹ä»¶æµæ˜¯å¦å®Œæˆä¹Ÿç»å¸¸æ˜¯å¾ˆé‡è¦çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‘Šè¯‰ç”¨æˆ·ä»–çš„æ“ä½œæ˜¯å¦å®Œæˆäº†ã€‚ æ‰€ä»¥ï¼Œæœ€å¥½æä¾›å®Œæ•´çš„ä¸‰ä¸ªå‚æ•°ç»™ subscribe æ“ä½œç¬¦ã€‚ RxJSè¿˜æä¾›äº†ä¸‰ç§æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå…¶ä»…è®¢é˜…æ‰€æœŸæœ›çš„åºåˆ—çš„ä¸€éƒ¨åˆ†ã€‚å…¶ä»–çš„å¤„ç†ç¨‹åºä¼šé»˜è®¤ä¸ºåŽŸæ¥çš„è¡Œä¸ºã€‚æœ‰ä¸‰ä¸ªè¿™æ ·çš„åŠŸèƒ½ï¼š subscribeOnNext: åªå¯¹åº” onNext æ¶ˆæ¯ subscribeOnError: åªå¯¹åº” onError æ¶ˆæ¯ subscribeOnCompleted: åªå¯¹åº” onCompleted æ¶ˆæ¯. ä½•æ—¶å¿½ç•¥è¿™æ¡æŒ‡å— å½“æµç¡®å®šä¸ä¼šæœ‰å®ŒæˆçŠ¶æ€ï¼Œæ¯”å¦‚ keyupäº‹ä»¶ã€‚ å½“æµç¡®å®šä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ¯”å¦‚ä¸€ä¸ªäº‹ä»¶ï¼Œä¸€ä¸ªå®Œå…¨ç¡®å®šçš„æµã€‚ å½“é»˜è®¤è¡Œä¸ºæ˜¯ç¬¦åˆé¢„æœŸçš„æ—¶å€™ã€‚ è€ƒè™‘é€šè¿‡ç‰¹å®šçš„è°ƒåº¦ç¨‹åºå¹¶å‘å¼•å…¥æ“ä½œç¬¦ç›¸æ¯”ä½¿ç”¨observeonæ“ä½œç¬¦æ¥æ”¹å˜å¯è§‚å¯Ÿåºåˆ—äº§ç”Ÿæ¶ˆæ¯çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ›´å¥½çš„åšæ³•æ˜¯åœ¨æ­£ç¡®çš„åœ°æ–¹å¼€å§‹åˆ›å»ºå¹¶å‘ã€‚ é€šè¿‡æ­£ç¡®çš„è°ƒåº¦å™¨å°†ä¼šå‡å°‘ ObserveOnæ“ä½œç¬¦çš„ä½¿ç”¨ã€‚ ä¾‹1Rx.Observable.range(0, 90000, Rx.Scheduler.requestAnimationFrame).subscribe(draw); åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¥è‡ªrangeæ“ä½œç¬¦çš„å›žè°ƒå°†ä¼šé€šè¿‡window.requestAnimationFrameä¼ é€’ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ rangeæ“ä½œç¬¦çš„å›žè°ƒå°†è¢«è°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“é€’å½’è°ƒç”¨ç«‹å³æ‰§è¡Œæ—¶ï¼Œrangeè¿‡è½½å°†ä¼šä»£æ›¿ onNextåœ¨Rx.Scheduler.currentThreadä¸Šçš„è°ƒç”¨ã€‚ é€šè¿‡æä¾›Rx.Scheduler.requestAnimationFrameè°ƒåº¦ç¨‹åºï¼Œ æ‰€æœ‰æ¥è‡ªobservableçš„æ¶ˆæ¯éƒ½å°†ä¼šåœ¨ window.requestAnimationFrameå›žè°ƒä¸­äº§ç”Ÿã€‚ ä½•æ—¶å¿½ç•¥è¿™æ¡æŒ‡å—å½“ç»“åˆæ¥è‡ªä¸åŒæ‰§è¡Œä¸Šä¸‹æ–‡çš„å‡ ä¸ªäº‹ä»¶æ—¶ï¼Œä½¿ç”¨æŒ‡å—4.4å°†æ‰€æœ‰æ¶ˆæ¯å°½å¯èƒ½æ™šåœ°æ”¾åœ¨ç‰¹å®šçš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ å°½å¯èƒ½å°‘ä¸”å°½å¯èƒ½è¿Ÿåœ°è°ƒç”¨observeOn æ“ä½œç¬¦é€šè¿‡ä½¿ç”¨ observeOn æ“ä½œç¬¦ï¼Œ ä¸€ä¸ªé¢„å®šçš„åŠŸèƒ½æ˜¯é€šè¿‡åŽŸå§‹çš„æ¶ˆæ¯æµæ¥èŽ·å–ä¿¡æ¯ã€‚è¿™å¯èƒ½ä¼šæ”¹å˜æ—¶åºä¿¡æ¯ä»¥åŠå¯¹ç³»ç»Ÿæ–½åŠ é¢å¤–çš„åŽ‹åŠ›ã€‚åœ¨æŸ¥è¯¢ä¸­å»¶è¿Ÿä½¿ç”¨è¿™ä¸ªæ“ä½œç¬¦å¯ä»¥æ”¹å–„è¿™ä¸¤ä¸ªé—®é¢˜ã€‚ Sample12345var result = xs.throttle(1000) .flatMap(x =&gt; ys.takeUntil(zs).sample(250).map(y =&gt; x + y)) .merge(ws) .filter(x =&gt; x &lt; 10) .observeOn(Rx.Scheduler.requestAnimationFrame); è¿™ä¸ªä¾‹å­åˆå¹¶äº†å¤šä¸ª è¿è¡Œåœ¨ä¸åŒä¸Šä¸‹æ–‡çš„ observable ã€‚è¿™ä¸ªæŸ¥è¯¢ç­›é€‰æŽ‰äº†å¤§éƒ¨åˆ†ä¿¡æ¯ã€‚å°†observeOnæ“ä½œç¬¦æ”¾åœ¨æŸ¥è¯¢ä¸­çš„å‰é¢ä¼šå¯¹ç­›é€‰å‡ºæ¥çš„æ¶ˆæ¯åšé¢å¤–çš„å·¥ä½œã€‚æœ€åŽæ‰è°ƒç”¨ observeOn å°†ä¼šæœ€å¤§é™åº¦åœ°æé«˜æ€§èƒ½ã€‚ ä½•æ—¶å¿½ç•¥è¿™æ¡æŒ‡å—å¦‚æžœä½ ä½¿ç”¨çš„ observable å¹¶æ²¡æœ‰æŒ‡å®šä¸åŒçš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä¸å¿…ä½¿ç”¨ observeOn æ“ä½œç¬¦ã€‚ å…³æ³¨å†…å­˜é™åˆ¶RxJS æœ‰å¾ˆå¤šæ“ä½œç¬¦å’Œç±»å¯ä»¥åœ¨å†…å­˜ä¸­åˆ›å»º observable, æ¯”å¦‚ï¼šreplay æ“ä½œç¬¦ã€‚å½“è¿™äº›å†…å­˜å­˜å‚¨ç€ observable æ—¶ï¼Œè¿™äº›ç¼“å­˜çš„å¤§å°å°†å–å†³äºŽ observable çš„æ“ä½œã€‚å¦‚æžœç¼“å­˜è¿‡å¤§ï¼Œå°†ä¼šé€ æˆå†…å­˜æº¢å‡ºã€‚æœ‰è®¸å¤šç¼“å†²æ“ä½œç¬¦æä¾›ç­–ç•¥æ¥é™åˆ¶ç¼“å†²åŒºï¼Œä¸ç®¡æ˜¯ä»Žæ—¶é—´æ–¹é¢è¿˜æ˜¯å¤§å°ã€‚æä¾›è¿™ä¸ªé™åˆ¶å°†è§£å†³å†…å­˜åŽ‹åŠ›é—®é¢˜ã€‚ ä¾‹å­1var result = xs.replay(null, 10000, 1000 * 60 /* 1 hr */).refCount(); è¿™ä¸ªä¾‹å­ä¸­ï¼Œreplay æ“ä½œç¬¦åˆ›å»ºäº†ä¸€ä¸ª buffer. æˆ‘ä»¬æœ‰é™åˆ¶è¿™ä¸ª buffer æœ€å¤šåŒ…å« 10,000 æ¡ä¿¡æ¯ä»¥åŠæœ€å¤šä¿ç•™è¿™äº›ä¿¡æ¯1å°æ—¶ã€‚ ä½•æ—¶å¿½ç•¥è¿™æ¡æŒ‡å—å½“ observable åˆ›å»ºäº†å¤§é‡çš„ä¿¡æ¯åªå¡«å……äº†ä¸€å°å— bufferï¼Œ æˆ–è€…å½“ bufferæœ¬èº«æœ‰å¤§å°é™åˆ¶ã€‚ ä½¿ç”¨ do/tap æ“ä½œç¬¦çš„å‰¯ä½œç”¨å¾ˆæ˜Žæ˜¾æœ‰å¾ˆå¤š Rx æ“ä½œç¬¦ä½¿ç”¨å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™å¯ä»¥åœ¨è¿™äº›å‚æ•°ä¸­ä¼ é€’ä»»ä½•æœ‰æ•ˆçš„ç”¨æˆ·ä»£ç ã€‚è¿™äº›ä»£ç å¯ä»¥æ”¹å˜å…¨å±€çŠ¶æ€ï¼ˆæ¯”å¦‚æ”¹å˜å…¨å±€å˜é‡ï¼Œè¯»å†™ç¡¬ç›˜ç­‰ç­‰ï¼‰ã€‚ Rx æ˜¯é€šè¿‡æ¯ä¸ªæ“ä½œç¬¦ç»„åˆèµ·æ¥è¿è¡Œçš„ï¼ˆé™¤äº†å…±äº«æ“ä½œç¬¦ï¼Œä¾‹å¦‚â€œpublishâ€ï¼‰ã€‚è¿™å°†ä½¿å‰¯ä½œç”¨å‘ç”Ÿåœ¨æ¯ä¸ªè®¢é˜…ã€‚ å¦‚æžœè¿™ç§è¡¨çŽ°æ˜¯æœŸæœ›çš„è¡Œä¸ºï¼Œæœ€å¥½å¼„æ¸…æ¥šåœ¨ do/tap æ“ä½œç¬¦ä¸­æœ‰å‰¯ä½œç”¨çš„è¿™éƒ¨åˆ†ä»£ç ã€‚è¿™äº›æ–¹æ³•ä¼šè¿‡è½½ï¼Œåªèƒ½è°ƒç”¨æŒ‡å®šçš„æ–¹æ³•ï¼Œæ¯”å¦‚ doOnNext/tapOnNextï¼ŒdoOnError/tapOnError,doOnCompleted/tapOnCompleted ä¾‹1var result = xs.filter(x =&gt; x.failed).tap(x =&gt; log(x)); è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿‡æ»¤å¤±è´¥çš„æ¶ˆæ¯ã€‚å°†å®ƒä»¬åˆ†å‘åˆ°è®¢é˜…observableçš„ä»£ç ä¹‹å‰è®°å½•è¯¥æ¶ˆæ¯ã€‚æ­¤è®°å½•æœ‰ä¸€ä¸ªå‰¯ä½œç”¨ï¼ˆæ¯”å¦‚ï¼šå°†æ¶ˆæ¯æ”¾ç½®åœ¨è®¡ç®—æœºçš„äº‹ä»¶æ—¥å¿—ä¸­ï¼‰å¹¶æ˜Žç¡®åœ°é€šè¿‡è°ƒç”¨do/tapæ“ä½œç¬¦ã€‚ å‡è®¾æ¶ˆæ¯å¯ä»¥ä¼ è¾¾ï¼Œç›´åˆ°é€€è®¢å®Œæˆç”±äºŽRxJS ä½¿ç”¨æŽ¨æ¨¡å¼ï¼Œæ¶ˆæ¯å¯ä»¥é€šè¿‡ä¸åŒçš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒå‘é€ã€‚ å½“é€€è®¢çš„æ—¶å€™ï¼Œæ¶ˆæ¯å¯èƒ½è¿˜åœ¨è·¯ä¸Šã€‚å½“é€€è®¢è¿˜æ²¡æœ‰å®Œæˆçš„æ—¶å€™ï¼Œè¿™äº›æ¶ˆæ¯ä»ç„¶å¯ä»¥è¢«ä¼ è¾¾ã€‚å½“æŽ§åˆ¶æƒè¢«è¿”å›žæ—¶ï¼Œæ¶ˆæ¯å°†ä¸èƒ½å†ä¼ è¾¾ã€‚é€€è®¢è¿‡ç¨‹å¯ä»¥æ˜¯åœ¨ä¸€ä¸ªä¸åŒçš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒä¸­è¿›è¡Œã€‚ ä½•æ—¶å¿½ç•¥è¿™æ¡æŒ‡å—ä¸€æ—¦ onCompleted æˆ– onError æ–¹æ³•è¢«è°ƒç”¨ï¼ŒRxJSè¯­æ³•å¯ä»¥ä¿è¯è®¢é˜…å·²ç»“æŸã€‚ ä½¿ç”¨ publish æ“ä½œç¬¦åˆ†äº«å‰¯ä½œç”¨å› ä¸ºè®¸å¤š observableæ˜¯å†·é—¨çš„(see cold vs. hot on Channel 9), æ¯ä¸ªè®¢é˜…éƒ½æœ‰å•ç‹¬çš„å‰¯ä½œç”¨ã€‚ æŸäº›æƒ…å†µä¸‹ï¼Œè¿™äº›å‰¯ä½œç”¨åªå‘ç”Ÿä¸€æ¬¡ã€‚publish æ“ä½œç¬¦é€šè¿‡å‘å¤šä¸ªç”¨æˆ·å¹¿æ’­å•ä¸ªè®¢é˜…æ¥æä¾›å…±äº«è®¢é˜…çš„æœºåˆ¶ã€‚ æœ‰å‡ ä¸ªè¿‡è½½publishè¿ç®—ç¬¦ã€‚æœ€æ–¹ä¾¿çš„è¿‡è½½æ˜¯é‚£äº›æä¾›äº†ä¸€ä¸ªå‡½æ•°å°è£… observable å…±äº«çš„å‰¯ä½œç”¨çš„å‚æ•°ã€‚ ä¾‹1234567891011var xs = Rx.Observable.create(observer =&gt; &#123; console.log('Side effect'); observer.onNext('hi!'); observer.onCompleted();&#125;);xs.publish(sharedXs =&gt; &#123; sharedXs.subscribe(console.log); sharedXs.subscribe(console.log); return sharedXs;&#125;).subscribe(); è¿™ä¸ªä¾‹å­ä¸­ï¼Œxs æ˜¯ä¸€ä¸ªæœ‰å‰¯ä½œç”¨çš„ï¼ˆå†™å…¥consoleï¼‰ observableã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå•ç‹¬çš„è®¢é˜…éƒ½ä¼šè§¦å‘è¿™äº›å‰¯ä½œç”¨ã€‚ publish æ“ä½œç¬¦ä½¿ç”¨xså•ç‹¬ç»™æ‰€æœ‰è®¢é˜…è€… sharedXs å˜é‡åŽ»è®¢é˜…ã€‚ ä½•æ—¶å¿½ç•¥è¿™æ¡æŒ‡å—åªæœ‰å½“ publish æ“ä½œç¬¦éœ€è¦å…±äº«å‰¯ä½œç”¨æ—¶æ‰ä½¿ç”¨è¿™æ¡æŒ‡å—ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥åˆ›å»ºå•ç‹¬çš„è®¢é˜…ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼šä¸ç®¡æ˜¯è®¢é˜…æ²¡æœ‰å‰¯ä½œç”¨çš„æˆ–æ˜¯å‰¯ä½œç”¨å¯ä»¥æ‰§è¡Œå¤šæ¬¡æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ã€‚ å‚è€ƒ åŒæ­¥ç¿»è¯‘è‡³RxJSä¸­æ–‡æ–‡æ¡£]]></content>
      <categories>
        <category>RxJS</category>
      </categories>
      <tags>
        <tag>RxJS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸ºä»€ä¹ˆé€‰æ‹© RxJS?]]></title>
    <url>%2F2017%2F04%2F04%2Fwhy-rxjs%2F</url>
    <content type="text"><![CDATA[Why RxJS?ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆé€‰æ‹© RxJS? ä¸ºä»€ä¹ˆä¸æ˜¯ Promises? Promises å¯ä»¥å¾ˆå¥½åœ°è§£å†³å¼‚æ­¥æ“ä½œï¼Œåƒä½¿ç”¨ XMLHttpRequest åŽ»æŸ¥è¯¢æœåŠ¡å™¨, å®ƒé¢„æœŸä¼šè¿”å›žå€¼å¹¶ä¸”æœ€ç»ˆå®Œæˆè¯·æ±‚ã€‚ The Reactive Extensions ç»Ÿä¸€äº† JavaScript ä¸­çš„ Promises, callbacks ä»¥åŠäº‹ä»¶æ•°æ®ï¼Œæ¯”å¦‚ DOMè¾“å…¥, Web Workers, Web Sockets. ä¸€æ—¦æˆ‘ä»¬ç»Ÿä¸€äº†è¿™äº›æ¦‚å¿µï¼Œå°±å¯ä»¥è¿›è¡Œå„ç§å„æ ·çš„ç»„åˆ. ä¸ºäº†è®©æ‚¨äº†è§£ä¸°å¯Œçš„ç»„åˆï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨å®ŒæˆåŠŸèƒ½ï¼Œå®ƒä»Žæ–‡æœ¬è¾“å…¥ä¸­æŽ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼Œç„¶åŽæŸ¥è¯¢æœåŠ¡ï¼Œç¡®ä¿ä¸ä¼šå¯¹æ¯ä¸ªé”®ç›˜è¾“å…¥çš„è¿›è¡Œæ³›æ»¥åœ°è°ƒç”¨ï¼Œè€Œæ˜¯ä»¥ä¸€ç§æ›´è‡ªç„¶çš„æ–¹å¼è°ƒç”¨ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å°†å¼•ç”¨JavaScriptæ–‡ä»¶ï¼ŒåŒ…æ‹¬jQueryï¼Œå°½ç®¡RxJSæ²¡æœ‰ä¾èµ–äºŽjQuery â€¦ 12&lt;script src="http://code.jquery.com/jquery.js"&gt;&lt;/script&gt;&lt;script src="rx.lite.js"&gt;&lt;/script&gt; æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»Žè¾“å…¥æ¡†èŽ·å–ç”¨æˆ·è¾“å…¥ï¼Œä½¿ç”¨Rx.Observable.fromEvent æ–¹æ³•ç›‘å¬ keyup äº‹ä»¶. å¦‚æžœ jQuery, Zepto, AngularJS and Ember.js å¯ç”¨ï¼Œå°†ä¼šä½¿ç”¨å®ƒä»¬æ¥ç»‘å®šäº‹ä»¶, å¦åˆ™å°†ä½¿ç”¨åŽŸç”Ÿäº‹ä»¶ç»‘å®š. è¿™è·Ÿæ‚¨çš„æ¡†æž¶æ€è€ƒäº‹ä»¶çš„ä¸€è‡´æ–¹å¼ï¼Œå› æ­¤æ²¡æœ‰ä»»ä½•æƒŠå–œã€‚ 12345678910111213var $input = $('#input'), $results = $('#results');/* åªä»Ž keyup äº‹ä»¶èŽ·å¾—è¾“å…¥å€¼ */var keyups = Rx.Observable.fromEvent($input, 'keyup') .map(e =&gt; e.target.value) .filter(text =&gt; text.length &gt; 2);/* å‡½æ•°èŠ‚æµè¾“å‡ºè®¾ç½®ä¸º 500ms */var throttled = keyups.throttle(500 /* ms */);/* çŽ°åœ¨åˆ¤æ–­å€¼æ˜¯å¦æœ‰æ”¹å˜ï¼ŒåªèŽ·å–ä¸åŒçš„å€¼ */var distinct = throttled.distinctUntilChanged(); çŽ°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥æŸ¥è¯¢ç»´åŸºç™¾ç§‘ï¼åœ¨RxJSä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç«‹å³é€šè¿‡Rx.Observable.fromPromiseæ–¹æ³•ç»‘å®šåˆ°ä»»ä½•Promises A+çš„å®žçŽ°ä¸Šï¼Œæˆ–è€…ç›´æŽ¥è¿”å›žå®ƒï¼Œå¹¶å°†å…¶å°è£…ã€‚ 1234567891011function searchWikipedia (term) &#123; return $.ajax(&#123; url: 'http://en.wikipedia.org/w/api.php', dataType: 'jsonp', data: &#123; action: 'opensearch', format: 'json', search: term &#125; &#125;).promise();&#125; ä¸€æ—¦åˆ›å»ºï¼ŒçŽ°åœ¨æˆ‘ä»¬å¯ä»¥å°†ä¸åŒçš„èŠ‚æµè¾“å…¥ç»‘å®šåœ¨ä¸€èµ·ï¼Œç„¶åŽæŸ¥è¯¢æœåŠ¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†è°ƒç”¨flatMapLatestèŽ·å–è¯¥å€¼ï¼Œå¹¶ç¡®ä¿æˆ‘ä»¬ä¸ä¼šæœ‰ä»»ä½•æ··ä¹±çš„è°ƒç”¨ã€‚ 1var suggestions = distinct.flatMapLatest(searchWikipedia); æœ€åŽï¼Œæˆ‘ä»¬å°†åœ¨å¯è§‚å¯Ÿå¯¹è±¡ä¸Šè°ƒç”¨subscribeæ–¹æ³•å¼€å§‹æ‹‰æ•°æ®ã€‚ 12345678910111213suggestions.subscribe(data =&gt; &#123; var res = data[1]; /* Do something åƒæ•°æ®ç»‘å®š */ $results.empty(); $.each(res, (_, value) =&gt; $('&lt;li&gt;' + value + '&lt;/li&gt;').appendTo($results));&#125;, error =&gt; &#123; /* handle any errors */ $results.empty(); $('&lt;li&gt;Error: ' + error + '&lt;/li&gt;').appendTo($results);&#125;); ç¿»è¯‘å‚è€ƒ åŒæ­¥å‘å¸ƒRxJSä¸­æ–‡æ–‡æ¡£]]></content>
      <categories>
        <category>RxJS</category>
      </categories>
      <tags>
        <tag>RxJS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Lerpçš„åº”ç”¨-åˆ©ç”¨ç®€å•çº¿æ€§æ’å€¼æ¥å¹³æ»‘åŠ¨ç”»æ•ˆæžœ]]></title>
    <url>%2F2017%2F03%2F20%2FLerp%E7%9A%84%E5%BA%94%E7%94%A8-%E5%88%A9%E7%94%A8%E7%AE%80%E5%8D%95%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E6%9D%A5%E5%B9%B3%E6%BB%91%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡çš„ RxJSçš„åŠ¨ç”»ç®€ä»‹ é‡Œæåˆ°ä¸€ä¸ªåŠ¨ç”»å¹³æ»‘çš„å°æŠ€å·§, è¿™é‡Œå±•ç¤ºå‡ ä¸ªä¾‹å­ï¼Œå®ƒçœŸçš„å¾ˆç®€å•å´å¾ˆæœ‰ç”¨ã€‚ Lerpæ˜¯ä¸¤ç‚¹ä¹‹é—´çš„çº¿æ€§æ’å€¼çš„åˆ«ç§°ã€‚è¿™æ˜¯ä¸€ä¸ªå®žçŽ°èµ·æ¥ç›¸å½“ç®€å•çš„æ•ˆæžœï¼Œä½†å¯ä»¥çœŸæ­£æ”¹å–„ä½ çš„åŠ¨ç”»çš„å¤–è§‚ï¼Œå¦‚æžœä½ å°†ä¸€ä¸ªå¯¹è±¡ä»Žç‚¹Aç§»åŠ¨åˆ°ç‚¹B. å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿå¦‚æžœæ‚¨æœ‰ä¸€ä¸ªå¯¹è±¡çš„å½“å‰ä½ç½®å’Œç›®æ ‡çš„ä½ç½®ï¼Œæ‚¨å¯ä»¥çº¿æ€§å†…æ’è¿™äº›ç‚¹ä¹‹é—´çš„è·ç¦»çš„ç™¾åˆ†æ¯”ï¼Œå¹¶åœ¨æ¯ä¸ªåŠ¨ç”»å¸§ä¸Šæ›´æ–°è¯¥ä½ç½®ã€‚ 12345function lerp(position, targetPosition) &#123;// è®¡ç®—å½“å‰ä½ç½®ä¸Žç›®æ ‡ä½ç½®å·®å€¼çš„ 20% position.x += (targetPosition.x - position.x)*0.2; position.y += (targetPosition.y - position.y)*0.2;&#125; é€šè¿‡è¿™æ ·åšï¼Œå¯¹è±¡ç§»åŠ¨çš„é‡éšç€ä½ç½®å’Œç›®æ ‡ä¹‹é—´çš„è·ç¦»å‡å°è€Œå˜å°ã€‚è¿™æ„å‘³ç€å¯¹è±¡å°†è¶Šæ¥è¶ŠæŽ¥è¿‘å®ƒçš„ç›®æ ‡ï¼Œé€Ÿåº¦å°†å‡æ…¢ï¼Œè¿™åˆ›é€ ä¸€ä¸ªå¾ˆå¥½çš„ç¼“å’Œæ•ˆæžœã€‚ ä¸€äº›ä¾‹å­è¿™é‡Œæœ‰ä¸€ä¸ªçƒè·Ÿéšç”¨æˆ·çš„é¼ æ ‡æˆ–è§¦æ‘¸è¿åŠ¨çš„ä¾‹å­ã€‚å¦‚æžœæˆ‘ä»¬ä½¿çƒç§»åŠ¨åˆ°é¼ æ ‡ç§»åŠ¨çš„åœ°æ–¹ï¼Œçƒçš„ç§»åŠ¨å¯ä»¥éžå¸¸å¿«ä½†çœ‹èµ·æ¥æœ‰ç‚¹è„±èŠ‚ã€‚å¦‚æžœæˆ‘ä»¬å¿«é€Ÿç§»åŠ¨é¼ æ ‡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°å•ç‹¬çš„â€œçƒå½±â€ã€‚ è¿™é‡Œæ˜¯åŒæ ·çš„æ¼”ç¤ºï¼Œé™¤äº†è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨lerpã€‚ä¸æ˜¯å°†çƒç«‹å³å‘å³ç§»åŠ¨åˆ°é¼ æ ‡ä½ç½®ï¼Œæˆ‘ä»¬æ¯æ¬¡å°†å®ƒç§»åŠ¨10ï¼…çš„è·ç¦»ã€‚ æ³¨æ„çƒçš„è¿åŠ¨å¾ˆå¹³æ»‘ï¼Œæ•´ä½“æ›´ä»¤äººæ„‰å¿«çš„æ•ˆæžœã€‚ è¿™é‡Œæ˜¯ä½¿ç”¨lerpçš„å¦ä¸€ä¸ªä¾‹å­ã€‚è¿™æ¬¡æˆ‘ä»¬æœ‰ä¸€ä¸ªæ»šåŠ¨æŒ‡ç¤ºå™¨ï¼Œå½“æ‚¨å‘ä¸‹æ»šåŠ¨â€œé¡µé¢â€æ—¶æ›´æ–°ã€‚ æ‰€ä»¥ï¼Œlerpâ€œæŠŠæˆâ€æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„å·¥å…·ï¼Œæˆ‘ä»¬çš„ç½‘ç»œåŠ¨ç”»å¥—è·¯ï¼Œä»¥å¯¹æŠ—çº¿æ€§æˆ–é”¯é½¿çŠ¶çš„è¿åŠ¨ã€‚]]></content>
      <categories>
        <category>animate</category>
      </categories>
      <tags>
        <tag>animate</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RxJSçš„åŠ¨ç”»ç®€ä»‹]]></title>
    <url>%2F2017%2F03%2F19%2FRxJS%E7%9A%84%E5%8A%A8%E7%94%BB%E7%AE%80%E4%BB%8B%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è¯‘è‡ª An Animated Intro to RxJS ä½ å¯èƒ½å¬è¯´è¿‡RxJSï¼ŒReactiveXï¼Œæˆ–ååº”å¼ç¼–ç¨‹ï¼Œæˆ–è€…ç”šè‡³åªå¬è¿‡å‡½æ•°å¼ç¼–ç¨‹ã€‚è¿™äº›æœ¯è¯­åœ¨è°ˆè®ºæœ€æ–°å’Œæœ€å‰æ²¿çš„å‰ç«¯æŠ€æœ¯æ—¶å˜å¾—è¶Šæ¥è¶Šçªå‡ºã€‚å¦‚æžœä½ åƒæˆ‘ä¸€æ ·ï¼Œå½“ä½ ç¬¬ä¸€æ¬¡å°è¯•å­¦ä¹ å®ƒæ—¶ï¼Œä½ æ„Ÿåˆ°å¾ˆå›°æƒ‘ã€‚ æ ¹æ®ReactiveX.ioï¼š ReactiveXæ˜¯ä¸€ä¸ªåº“ï¼Œç”¨äºŽé€šè¿‡ä½¿ç”¨å¯è§‚å¯Ÿåºåˆ—æ¥ç»„æˆå¼‚æ­¥å’ŒåŸºäºŽäº‹ä»¶çš„ç¨‹åºã€‚ è¿™å¥è¯åŒ…å«äº†å¾ˆå¤šè¦æ¶ˆåŒ–çš„å†…å®¹ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†é‡‡ç”¨ä¸€ç§ä¸åŒçš„æ–¹æ³•æ¥å­¦ä¹ RxJSï¼ˆReactiveXçš„JavaScriptå®žçŽ°ï¼‰å’ŒObservablesï¼Œé€šè¿‡åˆ›å»ºååº”å¼åŠ¨ç”»ã€‚ ç†è§£Observableæ•°ç»„æ˜¯å…ƒç´ çš„é›†åˆï¼Œä¾‹å¦‚[1, 2, 3, 4, 5]ã€‚ä½ å¯ä»¥ç«‹å³å¾—åˆ°æ‰€æœ‰çš„å…ƒç´ ï¼Œä½ å¯ä»¥åšçš„äº‹æƒ…åƒmapï¼Œfilterå’Œæ˜ å°„ä»–ä»¬ã€‚è¿™å…è®¸ä½ ä»¥ä»»ä½•ä½ æƒ³è¦çš„æ–¹å¼è½¬æ¢å…ƒç´ çš„é›†åˆã€‚ çŽ°åœ¨å‡è®¾é˜µåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ éšæ—¶é—´å‘ç”Ÿ; ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸æ˜¯ç«‹å³å¾—åˆ°æ‰€æœ‰çš„å…ƒç´ ï¼Œè€Œæ˜¯ä¸€æ¬¡ä¸€ä¸ªã€‚ä½ å¯èƒ½å¾—åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ åœ¨ç¬¬1ç§’ï¼Œä¸‹ä¸€ä¸ªåœ¨ç¬¬3ç§’ï¼Œä¾æ­¤ç±»æŽ¨ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•è¡¨ç¤ºï¼š è¿™å¯ä»¥è¢«æè¿°ä¸ºå€¼çš„æµï¼Œæˆ–äº‹ä»¶åºåˆ—ï¼Œæˆ–æ›´ç¡®åˆ‡åœ°ï¼Œç§°ä¸ºobservableã€‚ observableæ˜¯éšæ—¶é—´çš„å€¼çš„é›†åˆã€‚ å°±åƒä½¿ç”¨æ•°ç»„ä¸€æ ·ï¼Œæ‚¨å¯ä»¥å¯¹è¿™äº›å€¼è¿›è¡Œæ˜ å°„ï¼Œè¿‡æ»¤ç­‰æ“ä½œï¼Œä»¥åˆ›å»ºå’Œç»„åˆæ–°çš„observableã€‚æœ€åŽï¼Œä½ å¯ä»¥è®¢é˜…è¿™äº›observableï¼Œå¹¶åœ¨steamçš„å€¼ä¹‹åŽæ‰§è¡Œä½ æƒ³è¦åšçš„äº‹ã€‚è¿™æ˜¯RxJSçš„æºã€‚ RxJSèµ·æ­¥å¼€å§‹ä½¿ç”¨RxJSçš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨CDNï¼Œè™½ç„¶æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥å®‰è£…ï¼Œè¿™å–å†³äºŽé¡¹ç›®çš„éœ€è¦ã€‚ 12&lt;!-- the latest, minified version of RxJS --&gt;&lt;script src="https://unpkg.com/@reactivex/rxjs@latest/dist/global/Rx.min.js"&gt;&lt;/script&gt; ä¸€æ—¦ä½ çš„é¡¹ç›®ä¸­æœ‰RxJSï¼Œä½ å¯ä»¥ä»Žä»»ä½•ä¸œè¥¿ä¸­åˆ›å»ºä¸€ä¸ªobservable ï¼š 123456789101112131415161718const aboutAnything = 42;// ä»Žå˜é‡åˆ›å»º// The observable emits that value, then completes.const meaningOfLife$ = Rx.Observable.just(aboutAnything);// ä»Žæ•°ç»„æˆ–å¯éåŽ†çš„ç»“æž„ä¸­åˆ›å»º// The observable emits each item from the array, then completes.const myNumber$ = Rx.Observable.from([1, 2, 3, 4, 5]);// From a promise.// The observable emits the result eventually, then completes (or errors).const myData$ = Rx.Observable.fromPromise(fetch('http://example.com/users'));// ä»Žäº‹ä»¶ä¸­åˆ›å»º// The observable continuously emits events from the event listener.const mouseMove$ = Rx.Observable .fromEvent(document.documentElement, 'mousemove'); æ³¨æ„ï¼šå˜é‡æœ«å°¾çš„ç¾Žå…ƒç¬¦å·$æ˜¯ä¸€ä¸ªçº¦å®šï¼Œè¡¨ç¤ºè¯¥å˜é‡æ˜¯ä¸€ä¸ªå¯è§‚å¯Ÿè€…ã€‚Observableå¯ä»¥ç”¨æ¥å¯¹ä»»ä½•å¯ä»¥è¡¨ç¤ºä¸ºéšæ—¶é—´å˜åŒ–çš„å€¼çš„æµè¿›è¡Œå»ºæ¨¡ï¼Œä¾‹å¦‚äº‹ä»¶ï¼ŒPromisesï¼Œè®¡æ—¶å™¨ï¼Œé—´éš”å’ŒåŠ¨ç”»ã€‚ å› ä¸ºï¼Œè¿™äº›å¯è§‚å¯Ÿçš„ä¸œè¥¿ä¸åšä»»ä½•äº‹æƒ…ï¼Œè‡³å°‘ç›´åˆ°ä½ å®žé™…è§‚å¯Ÿä»–ä»¬ã€‚ä¸€ä¸ªç®€å•çš„è®¢é˜…å°†åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½¿ç”¨åˆ›å»º.subscribe()ï¼š 12345678myNumber$.subscribe(number =&gt; console.log(number));// Result:// &gt; 1// &gt; 2// &gt; 3// &gt; 4// &gt; 5 è®©æˆ‘ä»¬å®žè·µçœ‹çœ‹ï¼š 12345678910const docElm = document.documentElement;const cardElm = document.querySelector('#card');const titleElm = document.querySelector('#title');const mouseMove$ = Rx.Observable .fromEvent(docElm, 'mousemove');mouseMove$.subscribe(event =&gt; &#123; titleElm.innerHTML = `$&#123;event.clientX&#125;, $&#123;event.clientY&#125;`&#125;); ä»ŽmouseMove$è§‚å¯Ÿåˆ°çš„ï¼Œæ¯æ¬¡mousemoveäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œè®¢é˜…æ”¹å˜titleElmçš„.innerHTMLçš„é¼ æ ‡çš„ä½ç½®ã€‚è¯¥.mapæ“ä½œï¼ˆæ®å·¥ä½œåŽŸç†ç±»ä¼¼Array.prototype.mapæ–¹æ³•ï¼‰å¯å¸®åŠ©ç®€åŒ–äº‹æƒ…ï¼š 1234// Produces e.g., &#123;x: 42, y: 100&#125; instead of the entire eventconst mouseMove$ = Rx.Observable .fromEvent(docElm, 'mousemove') .map(event =&gt; (&#123; x: event.clientX, y: event.clientY &#125;)); ä½¿ç”¨ä¸€äº›æ•°å­¦å’Œå†…è”æ ·å¼ï¼Œæ‚¨å¯ä»¥ä½¿å¡ç‰‡æœå‘é¼ æ ‡æ—‹è½¬ã€‚pos.y / clientHeightå’Œpos.x / clientWidthè®¡ç®—ä¸º0å’Œ1ä¹‹é—´çš„å€¼ï¼Œæ‰€ä»¥ä¹˜ä»¥ç”±50å‡åŽ»ä¸€åŠï¼ˆ25ï¼‰äº§ç”Ÿçš„å€¼ä»Ž-25åˆ°25ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„æ—‹è½¬å€¼ï¼š 123456789101112131415161718const docElm = document.documentElement;const cardElm = document.querySelector('#card');const titleElm = document.querySelector('#title');const &#123; clientWidth, clientHeight &#125; = docElm;const mouseMove$ = Rx.Observable .fromEvent(docElm, 'mousemove') .map(event =&gt; (&#123; x: event.clientX, y: event.clientY &#125;))mouseMove$.subscribe(pos =&gt; &#123; const rotX = (pos.y / clientHeight * -50) - 25; const rotY = (pos.x / clientWidth * 50) - 25; cardElm.style = ` transform: rotateX($&#123;rotX&#125;deg) rotateY($&#123;rotY&#125;deg); `;&#125;); ä½¿ç”¨ .merge åˆå¹¶çŽ°åœ¨è®©æˆ‘ä»¬å‡è®¾ä½ æƒ³è®©è¿™ä¸ªé€‚åº”è§¦æ‘¸è®¾å¤‡ï¼Œä¸ç®¡æ˜¯é¼ æ ‡äº‹ä»¶æˆ–æ˜¯è§¦æ‘¸åŠ¨ä½œã€‚æ²¡æœ‰ä»»ä½•æ··ä¹±çš„å›žè°ƒï¼Œä½ å¯ä»¥é€šè¿‡RxJSä½¿ç”¨å¾ˆå¤šæ–¹æ³•æ¥ç»“åˆObservableã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯ä»¥ä½¿ç”¨.mergeå®žçŽ°ã€‚å°±åƒäº¤é€šå¤šæ¡è½¦é“åˆå¹¶æˆä¸€ä¸ªå•ä¸€çš„è½¦é“ï¼Œè¿™å°†è¿”å›žä¸€ä¸ªåŒ…å«æ‰€æœ‰æ•°æ®çš„Observableé€šè¿‡åˆå¹¶å¤šä¸ªObservable. 123456789101112const touchMove$ = Rx.Observable .fromEvent(docElm, 'touchmove') .map(event =&gt; (&#123; x: event.touches[0].clientX, y: event.touches[0].clientY &#125;));const move$ = Rx.Observable.merge(mouseMove$, touchMove$);move$.subscribe(pos =&gt; &#123; // ...&#125;); ç»§ç»­ï¼Œå°è¯•åœ¨è§¦æ‘¸å±è®¾å¤‡ä¸Šå¹³ç§»å·¦å³ï¼š è¿˜æœ‰å¾ˆå¤šå…¶ä»–æœ‰ç”¨çš„Observableåˆå¹¶æ–¹æ³•ï¼Œå¦‚.switch()ï¼Œ.combineLatest()å’Œ.withLatestFrom()ï¼Œæˆ‘ä»¬ç»§ç»­å…³æ³¨ä¸‹ä¸€ä¸ªç‚¹ã€‚ æ·»åŠ å¹³æ»‘çš„è¿åŠ¨æ—‹è½¬å¡åŠ¨ä½œæœ‰ç‚¹å¤ªæ­»æ¿ã€‚åªè¦é¼ æ ‡ï¼ˆæˆ–æ‰‹æŒ‡ï¼‰åœæ­¢ï¼Œæ—‹è½¬å³åˆ»åœæ­¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œçº¿æ€§å†…æ’ï¼ˆçº¿æ€§æ’å€¼ï¼‰éƒ½å¯ä»¥ä½¿ç”¨ã€‚ä¸€èˆ¬æŠ€æœ¯ä¸­æè¿°è¿™ä¸ªä¼Ÿå¤§çš„æ•™ç¨‹ç”±é›·åˆ‡å°”Â·å²å¯†æ–¯ã€‚æœ¬è´¨ä¸Šï¼Œè€Œä¸æ˜¯ä»ŽAç‚¹è·³åˆ°Bï¼Œçº¿æ€§æ’å€¼ä¼šåœ¨æ¯ä¸€ä¸ªåŠ¨ç”»è¿è¡Œä¸€å°éƒ¨åˆ†ã€‚è¿™å°†äº§ç”Ÿä¸€ä¸ªå¹³æ»‘çš„è¿‡æ¸¡ï¼Œç”šè‡³å½“é¼ æ ‡/è§¦æ‘¸ç§»åŠ¨å·²åœæ­¢ã€‚ è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼šè®¡ç®—ç»™å®šåˆå§‹å€¼å’Œç»ˆå€¼ä¸‹ä¸€ä¸ªå€¼ï¼Œé‡‡ç”¨çº¿æ€§æ’å€¼ï¼š 123456789function lerp(start, end) &#123; const dx = end.x - start.x; const dy = end.y - start.y; return &#123; x: start.x + dx * 0.1, y: start.y + dy * 0.1, &#125;;&#125; éžå¸¸ç®€çº¦ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ªçº¯å‡½æ•°æ¯æ¬¡è¿”å›žä¸€ä¸ªæ–°çš„ï¼Œçº¿æ€§å†…æ’çš„ä½ç½®å€¼ï¼Œé€šè¿‡ç§»åŠ¨å½“å‰çš„ï¼ˆå¼€å§‹ï¼‰æŽ¥è¿‘æ¯ä¸ªåŠ¨ç”»å¸§ä¸Šçš„ä¸‹ä¸€ä¸ªï¼ˆå®Œï¼‰ä½ç½®10ï¼…çš„ä½ç½®ã€‚ è°ƒåº¦å’Œ.intervalé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨RxJSä¸­è¡¨ç¤ºåŠ¨ç”»å¸§ï¼ŸåŽŸæ¥ï¼ŒRxJSæœ‰ä¸€ä¸ªå«åšSchedulersçš„ä¸œè¥¿ï¼Œå®ƒæŽ§åˆ¶ä»€ä¹ˆæ—¶å€™ä»Žä¸€ä¸ªobservableå‘å‡ºæ•°æ®ï¼Œå½“è®¢é˜…éƒ½å¼€å§‹æŽ¥æ”¶å€¼ã€‚ ä½¿ç”¨Rx.Observable.interval()ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªobservableï¼Œå®ƒåœ¨å›ºå®šçš„æ—¶é—´é—´éš”å‘å‡ºå€¼ï¼Œä¾‹å¦‚æ¯éš”ä¸€ç§’ï¼ˆRx.Observable.interval(1000)ï¼‰ã€‚å¦‚æžœåˆ›å»ºä¸€ä¸ªéžå¸¸å¾®å°çš„æ—¶é—´é—´éš”ï¼Œä¾‹å¦‚Rx.Observable.interval(0)ï¼Œå¹¶å¸Œæœ›å®ƒåªåœ¨æ¯ä¸ªåŠ¨ç”»å¸§ä¸Šå‘å‡ºå€¼ï¼Œé‚£ä¹ˆåœ¨åŠ¨ç”»å¸§å†…Rx.Scheduler.animationFrameæ¯éš”16åˆ°17mså°±ä¼šå‘å‡ºä¸€ä¸ªå€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1const animationFrame$ = Rx.Observable.interval(0, Rx.Scheduler.animationFrame); ç»“åˆ.withLatestFromè¦åˆ›å»ºå¹³æ»‘çº¿æ€§æ’å€¼ï¼Œæ‚¨åªéœ€è¦å…³å¿ƒæ¯ä¸ªåŠ¨ç”»å¸§çš„æœ€æ–°é¼ æ ‡æˆ–è§¦æ‘¸ä½ç½®ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæœ‰ä¸€ä¸ªæ“ä½œç¬¦å«.withLatestFrom()ï¼š 12const smoothMove$ = animationFrame$ .withLatestFrom(move$, (frame, move) =&gt; move); çŽ°åœ¨ï¼ŒsmoothMove$æ˜¯ä¸€ä¸ªæ–°çš„observableï¼Œmove$ åªæœ‰å½“animationFrame$å‘å‡ºä¸€ä¸ªå€¼æ—¶ï¼Œæ‰ä¼šå‘å‡ºæœ€æ–°çš„å€¼ã€‚è¿™æ˜¯å¿…é¡»çš„ - ä½ å¹¶ä¸æƒ³è¦çš„åŠ¨ç”»å¸§å¤–å‘å‡ºçš„å€¼ï¼ˆé™¤éžä½ çœŸçš„å–œæ¬¢jankï¼‰ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯æè¿°å½“ç»„åˆæ¥è‡ªæ¯ä¸ªå¯è§‚å¯Ÿçš„æœ€æ–°å€¼æ—¶è¦åšä»€ä¹ˆçš„å‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå”¯ä¸€é‡è¦çš„å€¼æ˜¯moveå€¼ï¼Œè¿™æ˜¯æ‰€æœ‰è¿”å›žçš„å€¼ã€‚ ä¸Žè¿‡æ¸¡.scançŽ°åœ¨ä½ æœ‰ä¸€ä¸ªobservableä»Žmove$æ¯ä¸ªåŠ¨ç”»å¸§å‘å‡ºæœ€æ–°çš„å€¼ï¼Œæ˜¯æ—¶å€™æ·»åŠ çº¿æ€§æ’å€¼äº†ã€‚.scan()è¿ç®—ç¬¦â€œç§¯ç´¯â€ä»Žå¯è§‚å¯Ÿåˆ°çš„å½“å‰å€¼å’Œä¸‹ä¸€ä¸ªå€¼ï¼Œæä¾›ç»™éœ€è¦è¿™äº›å€¼çš„å‡½æ•°ã€‚ è¿™å¯¹äºŽæˆ‘ä»¬çš„çº¿æ€§æ’å€¼ç”¨ä¾‹æ˜¯å®Œç¾Žçš„ã€‚è®°ä½ï¼Œæˆ‘ä»¬çš„lerp(start, end)å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼šstartï¼ˆcurrentï¼‰å€¼å’Œendï¼ˆnextï¼‰å€¼ã€‚ 1234const smoothMove$ = animationFrame$ .withLatestFrom(move$, (frame, move) =&gt; move) .scan((current, next) =&gt; lerp(current, next)); // or simplified: .scan(lerp) çŽ°åœ¨ï¼Œæ‚¨å¯ä»¥è®¢é˜…smoothMove$ä»£æ›¿move$åœ¨æ“ä½œä¸­æŸ¥çœ‹çº¿æ€§æ’å€¼ï¼š ç»“è®ºRxJS ä¸æ˜¯ä¸€ä¸ªåŠ¨ç”»åº“ï¼Œå½“ç„¶ï¼Œä½†å¯¹äºŽå¤„ç†éšæ—¶é—´å˜åŒ–çš„å€¼ï¼Œå®ƒçš„å¯ç»„åˆä»¥åŠå£°æ˜Žæ€§çš„æ–¹å¼æ˜¯ReactiveXæ¼”ç¤ºåŠ¨ç”»çš„æ ¸å¿ƒæ¦‚å¿µã€‚ååº”å¼ç¼–ç¨‹æ˜¯è€ƒè™‘ç¼–ç¨‹çš„å¦ç±»æ–¹å¼ï¼Œå…·æœ‰è®¸å¤šä¼˜ç‚¹ï¼š å®ƒæ˜¯å£°æ˜Žæ€§çš„ï¼Œå¯ç»„åˆçš„å’Œä¸å¯å˜çš„ï¼Œé¿å…å›žè°ƒåœ°ç‹±ï¼Œå¹¶ä½¿ä½ çš„ä»£ç æ›´ç®€æ´ï¼Œå¯é‡ç”¨å’Œæ¨¡å—åŒ–ã€‚ å®ƒåœ¨å¤„ç†æ‰€æœ‰ç±»åž‹çš„å¼‚æ­¥æ•°æ®æ—¶éžå¸¸æœ‰ç”¨ï¼Œæ— è®ºæ˜¯èŽ·å–æ•°æ®ï¼Œé€šè¿‡WebSocketsè¿›è¡Œé€šä¿¡ï¼Œç›‘å¬æ¥è‡ªå¤šä¸ªæºçš„å¤–éƒ¨äº‹ä»¶ï¼Œç”šè‡³æ˜¯åŠ¨ç”»ã€‚ â€œå…³æ³¨çš„åˆ†ç¦»â€ - æ‚¨ä½¿ç”¨Observableå’Œè¿ç®—ç¬¦å£°æ˜Žæ€§åœ°è¡¨ç¤ºæ‚¨æœŸæœ›çš„æ•°æ®ï¼Œç„¶åŽåœ¨ä¸€ä¸ªå•ç‹¬çš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒä¸­å¤„ç†.subscribe()ï¼Œè€Œä¸ä¼šåœ¨æ‚¨çš„åŽŸä»£ç ä¸Šäº§ç”Ÿå‰¯ä½œç”¨ã€‚ æœ‰è¿™ä¹ˆå¤šè¯­è¨€çš„å®žçŽ°äº†å®ƒ - Javaï¼ŒPHPï¼ŒPythonï¼ŒRubyï¼ŒCï¼ƒï¼ŒSwiftå’Œå…¶ä»–ä½ å¯èƒ½æ²¡æœ‰å¬è¯´è¿‡çš„ã€‚ å®ƒä¸æ˜¯ä¸€ä¸ªæ¡†æž¶ï¼Œå®ƒä¸Žè®¸å¤šæµè¡Œçš„æ¡†æž¶ï¼ˆå¦‚Reactï¼ŒAngularå’ŒVueï¼‰å¯ä»¥éžå¸¸å¥½åœ°èžåˆåœ¨ä¸€èµ·ã€‚ ä½ å¯ä»¥å¾—åˆ°è¡Œå®¶æŒ‡ç‚¹ï¼Œå¦‚æžœä½ æƒ³è¦ï¼Œä½†ReactiveXä»Žè¢«æå‡ºåˆ°çŽ°åœ¨å®žæ–½äº†è¿‘åå¹´å‰ï¼ˆ2009å¹´ï¼‰ï¼Œç”±åˆ›æ„æ‰€äº§ç”Ÿçš„Conal Elliottå’Œä¿ç½—Â·èƒ¡è¾¾å…‹ 2å¹´å‰ï¼ˆ1997å¹´ï¼‰ï¼Œåœ¨æè¿°åŠŸèƒ½æ€§ååº”çš„åŠ¨ç”»ï¼ˆæƒŠå–œæƒŠå–œï¼‰ã€‚ä¸ç”¨è¯´ï¼Œå®ƒç»è¿‡äº†è¶³å¤Ÿçš„æµ‹è¯•ã€‚ æœ¬æ–‡æŽ¢è®¨äº†ä¸€äº›æœ‰ç”¨çš„éƒ¨åˆ†å’ŒRxJSçš„æ¦‚å¿µ-åˆ›å»ºä¸Žè®¢é˜….fromEvent()å’Œ.interval()ï¼Œå¯¹è®¢é˜…æ“ä½œ.map()å’Œ.scan()ï¼Œå¤šä¸ªè®¢é˜…ç›¸ç»“åˆ.merge()å’Œ.withLatestFrom()ï¼Œå¹¶ä¸Žå¼•å…¥è°ƒåº¦Rx.Scheduler.animationFrameã€‚æœ‰å¾ˆå¤šå…¶ä»–æœ‰ç”¨çš„èµ„æºå­¦ä¹ RxJSï¼š ReactiveXï¼šRxJS - å®˜æ–¹æ–‡æ¡£ RxMarbles - ç”¨äºŽå¯è§†åŒ–è§‚å¯Ÿ Reactiveç¼–ç¨‹çš„ä»‹ç» å¦‚æžœä½ æƒ³è¿›ä¸€æ­¥æ·±å…¥RxJSåŠ¨ç”»ï¼ˆå’Œä½¿ç”¨æ›´å¤šçš„CSSå˜é‡ï¼‰ï¼Œè¯·æŸ¥çœ‹æˆ‘çš„å¹»ç¯ç‰‡ä»ŽCSS Dev Conf 2016å’Œæˆ‘2016å¹´çš„æ¼”è®²ä»ŽJSConfå†°å²›å…³äºŽååº”å¼åŠ¨ç”»ä¸ŽCSSå˜é‡ã€‚è¿™é‡Œæœ‰ä¸€äº›ä½¿ç”¨RxJSåˆ›å»ºçš„åŠ¨ç”»å¯èƒ½å¯¹è§¦å‘çµæ„Ÿæœ‰å¸®åŠ©ï¼š 3Dæ•°å­—æ—¶é’Ÿ å¿ƒè„appæ¦‚å¿µ é€è§†ä½¿ç”¨RxJSæ‹–åŠ¨]]></content>
      <categories>
        <category>RxJS</category>
      </categories>
      <tags>
        <tag>RxJS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡åŠ¨å›¾ç®€å•é€šä¿—åœ°äº†è§£Flexboxçš„å·¥ä½œåŽŸç†]]></title>
    <url>%2F2017%2F03%2F13%2F%E9%80%9A%E8%BF%87%E5%8A%A8%E5%9B%BE%E7%AE%80%E5%8D%95%E9%80%9A%E4%BF%97%E5%9C%B0%E4%BA%86%E8%A7%A3Flexbox%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è¯‘è‡ª Scott Domes Flexå±žæ€§æ˜¯ä¸€ä¸ªå¤åˆå±žæ€§ï¼Œè€Œå¤§éƒ¨åˆ†æ•™ç¨‹ä¸­éƒ½åªè®¾ç½®ä¸€ä¸ªå€¼ï¼Œä½†å…¶å®žå®ƒåŒ…å«äº† flex-basisã€flex-growã€flex-shrink. è®©æˆ‘ä»¬æ·±å…¥äº†è§£Flexbox - ä»¥åŠå¦‚ä½•åˆ©ç”¨å®ƒæ¥æž„å»ºé€‚åº”æ€§å¼ºå’Œæ¼‚äº®çš„å¸ƒå±€. å±žæ€§ä¸€ï¼š Flex-Basisåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦æŠŠå®ƒç”¨äºŽå¤–éƒ¨å®¹å™¨ä¸­ã€‚è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬è¯•ç€æŠŠå®ƒç”¨åœ¨å®¹å™¨å†…çš„å­å…ƒç´ ä¸­ã€‚ è¿™æ˜¯ä¸€ä¸ªå¾ˆä¸èµ·çœ¼çš„å±žæ€§ï¼Œä½†ä¹Ÿå¾ˆç›´æŽ¥ã€‚ Flex-basis æŽ§åˆ¶ç€ä¸€ä¸ªå…ƒç´ çš„é»˜è®¤å¤§å°ï¼Œåœ¨å…¶ä»– flex å±žæ€§åº”ç”¨ä¹‹å‰ã€‚ åœ¨ä¸‹é¢çš„ GIF çœ‹æ¥ï¼Œå®ƒçš„ä½œç”¨å’Œ width çš„ä½œç”¨ä¸€æ ·ï¼š æ˜¯ä»€ä¹ˆè®© flex-basis è¡¨çŽ°å¾—å’Œ width ä¸€æ ·ï¼Ÿäº‹å®žä¸Šï¼Œå®ƒå¯¹åº”ç€ flex çš„åæ ‡è½´ã€‚ flex-basis å½±å“æ— ç´ åœ¨ä¸»è½´ä¸Šçš„å¤§å° è®©æˆ‘ä»¬çœ‹çœ‹ä¿æŒ flex-basis çš„å€¼ä¸å˜ï¼Œä½†æ˜¯æ”¹å˜ä¸»è½´æ–¹å‘ä¼šæœ‰ä»€ä¹ˆå˜åŒ–ï¼š æ³¨æ„åˆ°ï¼Œæˆ‘ä»Žæ‰‹åŠ¨è®¾ç½®é«˜åº¦å˜æˆæ‰‹åŠ¨è®¾ç½®å®½åº¦ã€‚ Flex-basis å½±å“å®½åº¦è¿˜æ˜¯é«˜åº¦å–å†³äºŽ flex-direction çš„å€¼ã€‚ å±žæ€§äºŒï¼šFlex GrowçŽ°åœ¨ï¼Œæˆ‘ä»¬æ¥ç‚¹æ›´å¤æ‚çš„ã€‚ é¦–å…ˆï¼Œè®©æˆ‘ä»¬è®¾ç½®ç»™æ‰€æœ‰æ–¹å—è®¾ç½®ç›¸åŒçš„å®½åº¦ï¼Œ120px: çŽ°åœ¨ï¼Œå½“å®ƒåŠ ä¸Šå±žæ€§ flex-growï¼ˆé»˜è®¤å€¼ä¸º0ï¼‰.è¿™æ„å‘³ç€ï¼Œä¸å…è®¸æ–¹å—è‡ªåŠ¨å……æ»¡å®¹å™¨ã€‚ æ²¡ç†è§£ï¼ŸçŽ°åœ¨ç»™æ¯ä¸ªæ–¹å—çš„ flex-grow å±žæ€§è®¾ç½®ä¸º 1ï¼š æ‰€æœ‰æ–¹å—å…±åŒå……æ»¡äº†å®¹å™¨çš„æ•´ä¸ªå®½åº¦ï¼Œå¹¶ä¸”æ˜¯å¹³å‡åˆ†ã€‚ flex-grow å±žæ€§è¦†ç›–äº† width å±žæ€§ã€‚ è®©äººå›°æƒ‘çš„æ˜¯ flex-grow çš„å€¼åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ flex-grow: 1 æ„å‘³ç€ä»€ä¹ˆï¼Ÿ å¥½å§ï¼Œä¸‹å›¾æ˜¯ç»™æ¯ä¸ªæ–¹å—è®¾ç½® flex-grow å€¼ä¸º 999 çš„è¡¨çŽ°ï¼š è¿™çœŸæ˜¯ã€‚ã€‚å®Œå…¨ä¸€æ ·ã€‚ é‚£æ˜¯å› ä¸º flex-grow ä¸æ˜¯ä¸€ä¸ªç»å¯¹çš„å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªç›¸å¯¹çš„å€¼ã€‚ é‡è¦çš„ä¸æ˜¯ä¸€ä¸ªæ–¹å— flex-grow å€¼çš„æœ¬èº«ï¼Œè€Œæ˜¯è¿™ä¸ªå€¼å’Œå…¶ä»–æ–¹å—çš„å€¼çš„å…³ç³»ã€‚ å¦‚æžœç»™æ¯ä¸ªæ–¹å—è®¾ç½® flex-grow: 1ï¼Œ ç„¶åŽè°ƒæ•´ç¬¬3ä¸ªæ–¹å—çš„ flex-grow å±žæ€§ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å˜åŒ–ï¼š æƒ³è¦çœŸæ­£æ˜Žç™½è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Œè®©æˆ‘ä»¬å¿«é€Ÿç•¥è¿‡ä¸€ä¸ªç®€å•çš„æ•°å­¦è®¡ç®—ã€‚ æ¯ä¸ªæ­£æ–¹å½¢éƒ½ä»¥flex-growä¸º1å¼€å§‹ã€‚å¦‚æžœæˆ‘ä»¬å°†æ¯ä¸ªæ­£æ–¹å½¢çš„flex-growç›¸åŠ ï¼Œåˆ™æ€»å’Œä¸º6ã€‚å› æ­¤ï¼Œå®¹å™¨è¢«åˆ†æˆ6ä¸ªå•ç‹¬çš„éƒ¨åˆ†ã€‚æ¯ä¸ªæ­£æ–¹å½¢å¢žé•¿åˆ°å¯ç”¨ç©ºé—´çš„1/6ä»¥å¡«æ»¡å®¹å™¨ã€‚ å½“è®¾ç½®ç¬¬3ä¸ªæ–¹å—çš„flex-grow ä¸º 2ï¼Œ çŽ°åœ¨å®¹å™¨è¢«åˆ†æˆ7ä»½ï¼Œå› ä¸º flex-grow å±žæ€§çš„å€¼çš„æ€»å’Œä¸º 1+1+2+1+1+1. æ–¹å—3èŽ·å¾— 2/7 çš„å®½åº¦ï¼Œå‰©ä¸‹çš„èŽ·å¾— 1/7ã€‚ å½“è®¾ç½®ç¬¬3ä¸ªæ–¹å—ä¸º flex-grow: 3ï¼Œ å®¹å™¨è¢«åˆ†æˆ8ä»½ï¼ˆ1+1+3+1+1+1ï¼‰, æ–¹å—3å  3/8, å‰©ä¸‹çš„å  1/8. ä»¥æ­¤ç±»æŽ¨ã€‚ flex-growæ˜¯å æ‰€æœ‰å€¼æ€»å’Œçš„æ¯”ä¾‹ã€‚å¦‚æžœç»™æ‰€æœ‰æ–¹å—è®¾ç½®flex-grow: 4, æ–¹å—3è®¾ç½® flex-grow: 12, æ•ˆæžœå’Œç»™å®ƒä»¬åˆ†åˆ«è®¾ç½® 1 å’Œ 3 æ˜¯ä¸€æ ·çš„ã€‚ æœ€åŽä¸€ç‚¹ï¼Œflex-grow å’Œ flex-basis éƒ½å’Œä¸»è½´å¯¹åº”ã€‚æˆ‘ä»¬çš„æ–¹å—åªä¼šå¢žé•¿å®½åº¦ï¼Œé™¤éžè®¾ç½® flex-direction ä¸º column. å±žæ€§ä¸‰ï¼š Flex Shrinkflex-shrink å’Œ flex-growæ­£å¥½ç›¸åï¼Œå†³å®šæ¯ä¸ªæ–¹å—å¯ä»¥æ”¶ç¼©å¤šå°‘ã€‚ å®ƒåªæœ‰åœ¨å…ƒç´ å¿…é¡»æ”¶ç¼©ä»¥é€‚åº”å…¶å®¹å™¨æ—¶æ‰èµ·ä½œç”¨ - å³å½“å®¹å™¨å¤ªå°æ—¶ã€‚ å®ƒçš„ä¸»è¦ç”¨é€”æ˜¯æŒ‡å®šå“ªäº›å…ƒç´ è¦ç¼©å°ï¼Œå“ªäº›å…ƒç´ ä¸ç”¨ç¼©å°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ–¹å—çš„ flex-shrink å€¼ä¸º1 - è¿™æ„å‘³ç€å®ƒä¼šéšç€å®¹å™¨çš„æ”¶ç¼©è€Œæ”¶ç¼©ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„è¡¨çŽ°ã€‚åœ¨ä¸‹é¢çš„GIFSä¸­ï¼Œæ­£æ–¹å½¢çš„flex-growä¸º1ï¼Œå› æ­¤å®ƒä»¬å¡«å……äº†å®¹å™¨ï¼Œå¹¶ä¸”flex-shrinkä¸º1ï¼Œå› æ­¤å®ƒä»¬è¢«å…è®¸æ”¶ç¼©. çŽ°åœ¨è®©æˆ‘ä»¬å°†æ–¹å—3çš„flex-shrinkè®¾ç½®ä¸º0.å®ƒç¦æ­¢æ”¶ç¼©ï¼Œæ‰€ä»¥å®ƒä¼šå¢žé•¿ä»¥é€‚åº”å®¹å™¨ï¼Œä½†å®ƒæ‹’ç»æ”¶ç¼©åˆ°å…¶è®¾ç½®çš„120pxå®½åº¦ä»¥ä¸‹ã€‚ flex-shrinkçš„é»˜è®¤å€¼æ˜¯1 - è¿™æ„å‘³ç€ä½ çš„å…ƒç´ ä¼šæ”¶ç¼©ï¼Œé™¤éžè®¾ç½®ä¸º0åŽ»ç¦æ­¢å®ƒã€‚ åŒæ ·ï¼Œflex-shrink æ˜¯æŒ‰æ¯”ä¾‹çš„ã€‚å¦‚æžœä¸€ä¸ªç›’å­çš„flex-shrinkä¸º6ï¼Œå…¶ä½™çš„flex-shrinkä¸º2ï¼Œä¸€ä¸ªç›’å­å°†ä»¥3å€çš„é€Ÿåº¦ç¼©å‡ï¼Œå½“ç©ºé—´è¢«åŽ‹ç¼©ã€‚ æ³¨æ„è¿™é‡Œè¯´çš„æ˜¯ï¼šå…·æœ‰3xå¼¹æ€§æ”¶ç¼©çš„æ–¹å—å°†æ¯”å…¶ä»–æ–¹å—ç¼©çŸ­3å€ã€‚è¿™å¹¶ä¸æ„å‘³ç€å®ƒå°†æ”¶ç¼©1/3çš„å®½åº¦ã€‚ ç¨åŽï¼Œæˆ‘ä»¬ä¼šæ·±å…¥äº†è§£è¿™åˆ°åº•ä¼šæ”¶ç¼©æˆ–å¢žé•¿å¤šå°‘ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹æœ€åŽä¸€ä¸ªå±žæ€§ï¼Œå¹¶æŠŠæ‰€æœ‰æ··åœ¨ä¸€èµ·ã€‚ å±žæ€§å››ï¼š Flexflex æ˜¯ grow, shrink ä»¥åŠ basis çš„ç¼©å†™ï¼Œå¤åˆå±žæ€§ã€‚ å®ƒçš„é»˜è®¤å€¼æ˜¯ 0(grow) 1ï¼ˆshrinkï¼‰auto(basis). æœ€åŽä¸€ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬ç®€åŒ–åˆ°ä¸¤ä¸ª boxs è¿™æ˜¯å®ƒä»¬çš„å±žæ€§ï¼š 123456.square#one &#123; flex: 2 1 300px;&#125;.square#two &#123; flex: 1 2 300px;&#125; ä¸¤è€…éƒ½æœ‰ç›¸åŒçš„ flex-basiså±žæ€§ã€‚è¿™æ„å‘³ç€å¦‚æžœå®ƒä»¬éƒ½æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼ˆå®¹å™¨æ˜¯600pxåŠ ä¸Šè¾¹è·å’Œå¡«å……ç©ºé—´ï¼‰ï¼Œå®ƒä»¬éƒ½å°†æ˜¯300pxå®½åº¦ã€‚ ä½†éšç€å®¹å™¨çš„å¢žé•¿ï¼ŒSquare 1ï¼ˆå…·æœ‰æ›´é«˜çš„flex-growï¼‰å°†å¢žé•¿ä¸¤å€ã€‚éšç€ç›’å­çš„æ”¶ç¼©ï¼ŒSquare 2ï¼ˆå…·æœ‰æ›´é«˜çš„flex-shrinkï¼‰å°†ç¼©çŸ­ä¸¤å€ã€‚ å®ƒæ˜¯å¦‚ä½•å¢žé•¿å’Œæ”¶ç¼©çš„è¿™é‡Œæœ‰å¯èƒ½ä¼šæ··æ·†ï¼šå½“Square 1å¢žé•¿æ—¶ï¼Œå®ƒä¸ä¼šå¢žé•¿åˆ°Square 2çš„ä¸¤å€ã€‚åŒæ ·ï¼Œå½“Square 2ç¼©å°æ—¶ï¼Œå®ƒä¸ä¼šç¼©å°åˆ°Square 1çš„ä¸€åŠå¤§å° - å³ä½¿æ¯”çŽ‡çš„æ”¶ç¼©çŽ‡ä¸º2æ¯”1ã€‚ è¿™ä¸æ˜¯ä»–ä»¬çš„å¤§å° 2æ¯”1æˆ–1æ¯”2.è¿™æ˜¯ä»–ä»¬çš„æ”¶ç¼©å’Œå¢žé•¿çš„é€Ÿåº¦çš„æ¯”ä¾‹ã€‚ ä¸€ç‚¹æ•°å­¦è®¡ç®—å®¹å™¨çš„èµ·å§‹å¤§å°ä¸º640åƒç´ ã€‚åœ¨å®¹å™¨çš„æ¯ä¸€è¾¹å ç”¨20pxçš„å¡«å……åŽï¼Œè¿™ç•™ä¸‹äº†è¶³å¤Ÿçš„ç©ºé—´ï¼Œä¸¤ä¸ªæ–¹å—æ¢å¤åˆ°å®ƒä»¬çš„flex-basisçš„300px. å½“å®¹å™¨è®¾ç½®ä¸º430pxæ—¶ï¼Œæˆ‘ä»¬ä¸¢å¤±äº†210pxçš„ç©ºé—´ã€‚æ­£æ–¹å½¢1ï¼Œflex-shrink:1ï¼Œå¤±åŽ»70pxã€‚æ–¹å½¢2ï¼Œflex-shrink: 2ï¼Œå¤±åŽ»140pxã€‚ å½“å®¹å™¨ç¼©å°åˆ°340pxæ—¶ï¼Œæˆ‘ä»¬çŽ°åœ¨å·²ç»å¤±åŽ»äº†300åƒç´ çš„ç©ºé—´ã€‚æ–¹å—1æŸå¤±100åƒç´ ï¼Œæ–¹å—2æŸå¤±200åƒç´ . æŸå¤±çš„ç©ºé—´æ ¹æ®å®ƒä»¬å„è‡ªçš„æ”¶ç¼©çŽ‡ï¼ˆ2:1ï¼‰çš„æ¯”çŽ‡æ¥åˆ†å‰²ã€‚ flex-growåŒæ ·ã€‚å½“å®¹å™¨å¢žé•¿åˆ°940pxï¼Œæˆ‘ä»¬èŽ·å¾—äº†300pxçš„ç©ºé—´ï¼ŒSquare 1èŽ·å¾—äº†é¢å¤–çš„200pxï¼ŒSquare 2èŽ·å¾—äº†é¢å¤–çš„100pxã€‚ åœ¨ä¸Šé¢çš„GIFä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å®½åº¦å¦‚ä½•æ ¹æ®æ¯”çŽ‡è¿›è¡Œè°ƒæ•´ï¼Œå¢žé‡ï¼ˆÎ”ï¼‰æ˜¾ç¤ºä¸ŽåŸºäºŽflex-basisçš„å·®å¼‚ã€‚]]></content>
      <categories>
        <category>Flexbox</category>
      </categories>
      <tags>
        <tag>Flexbox</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jséåŽ†Objectå¯¹è±¡å¯æžšä¸¾å±žæ€§ã€ä¸å¯æžšä¸¾å±žæ€§ã€åŽŸåž‹é“¾å±žæ€§å’Œè‡ªèº«å±žæ€§]]></title>
    <url>%2F2017%2F01%2F13%2Fjs%E9%81%8D%E5%8E%86Object%E5%8F%AF%E6%9E%9A%E4%B8%BE%E5%B1%9E%E6%80%A7%E3%80%81%E4%B8%8D%E5%8F%AF%E6%9E%9A%E4%B8%BE%E5%B1%9E%E6%80%A7%E3%80%81%E5%8E%9F%E5%9E%8B%E9%93%BE%E5%B1%9E%E6%80%A7%E5%92%8C%E8%87%AA%E8%BA%AB%E5%B1%9E%E6%80%A7%2F</url>
    <content type="text"><![CDATA[åˆ©ç”¨hasOwnPropertyã€getOwnPropertyNamesã€Object.keysã€forâ€¦inéåŽ†å¯¹è±¡çš„å¯æžšä¸¾å±žæ€§ã€ä¸å¯æžšä¸¾å±žæ€§ã€åŽŸåž‹é“¾ä¸Šçš„å±žæ€§å’Œè‡ªèº«å±žæ€§ã€‚ é¦–å…ˆæ¥çœ‹çœ‹å„ç§æ–¹æ³•çš„ç”¨æ³•åŠå…¼å®¹æ€§ã€‚ hasOwnPropertyObject.prototype.hasOwnProperty(name) æ–¹æ³•ç”¨æ¥åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å«æœ‰æŒ‡å®šçš„è‡ªèº«å±žæ€§ï¼Œå®ƒæœ¬èº«æ˜¯å¯¹è±¡åŽŸåž‹é“¾ä¸Šçš„é»˜è®¤æ–¹æ³•ã€‚ hasOwnProperty æ–¹æ³•æ˜¯ ES3 å°±æ ‡å‡†åŒ–äº†ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå…¼å®¹æ€§é—®é¢˜ã€‚ ä½†ç”±äºŽ hasOwnProperty æ˜¯åŽŸåž‹é“¾ä¸Šçš„æ–¹æ³•ï¼Œæ‰€ä»¥æœ‰å¯èƒ½è¢«å¯¹è±¡çš„è‡ªèº«æ–¹æ³•æ‰€å±è”½ã€‚å¦‚ï¼š 123456789101112var foo = &#123; hasOwnProperty: function() &#123; return false; &#125;, bar: 'Here be dragons'&#125;;foo.hasOwnProperty('bar'); // å§‹ç»ˆè¿”å›ž false// å¦‚æžœæ‹…å¿ƒè¿™ç§æƒ…å†µï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨åŽŸåž‹é“¾ä¸ŠçœŸæ­£çš„ hasOwnProperty æ–¹æ³•(&#123;&#125;).hasOwnProperty.call(foo, 'bar'); // trueObject.prototype.hasOwnProperty.call(foo, 'bar'); // true getOwnPropertyNamesObject.getOwnPropertyNames(obj)æ–¹æ³•è¿”å›žä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±žæ€§çš„å±žæ€§åï¼ˆåŒ…æ‹¬ä¸å¯æžšä¸¾å±žæ€§ï¼‰ç»„æˆçš„æ•°ç»„, è¯¥æ–¹æ³•ä¸ä¼šèŽ·å–åˆ°åŽŸåž‹é“¾ä¸Šçš„å±žæ€§ã€‚å¦‚ï¼š 12345678910111213141516171819// çˆ¶ç±»æž„é€ å‡½æ•°function ParentClass() &#123;&#125;ParentClass.prototype.inheritedMethod = function() &#123;&#125;;// ç»§æ‰¿var ChildClass = Object.create(ParentClass.prototype, &#123; // ä¸å¯æžšä¸¾å±žæ€§ getFoo: &#123; value: function() &#123; return this.foo; &#125;, enumerable: false &#125;&#125;);// è‡ªèº«å¯æžšä¸¾å±žæ€§ChildClass.foo = 1;// å†å®šä¹‰ä¸€ä¸ªåŽŸåž‹é“¾å±žæ€§ChildClass.prototype.prototypeMethod = function() &#123;&#125;;console.log(Object.getOwnPropertyNames(my_obj).sort()); // ["foo", "getFoo"] å…¼å®¹æ€§åˆ° IE9, es 5æ ‡å‡†ã€‚ Object.keys()è¿”å›žè¯¥å¯¹è±¡çš„æ‰€æœ‰å¯æžšä¸¾è‡ªèº«å±žæ€§çš„å±žæ€§åã€‚ 123//å…·æœ‰éšæœºé”®æŽ’åºçš„æ•°ç»„ç±»å¯¹è±¡var an_obj = &#123; 100: 'a', 2: 'b', 7: 'c' &#125;;console.log(Object.keys(an_obj)); // console: ['2', '7', '100'] è¿™äº›å±žæ€§çš„é¡ºåºä¸Žæ‰‹åŠ¨éåŽ†ï¼ˆå¦‚for..inï¼‰è¯¥å¯¹è±¡å±žæ€§æ—¶çš„ä¸€è‡´ã€‚ æ³¨æ„ï¼šObject.keys å’Œ getOwnPropertyNames ï¼Œåœ¨ES5ï¼Œå¦‚æžœæ­¤æ–¹æ³•çš„å‚æ•°ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆåŽŸå§‹çš„ï¼‰ï¼Œé‚£ä¹ˆå®ƒä¼šé€ æˆ TypeErrorã€‚åœ¨ES6ï¼Œéžå¯¹è±¡çš„å‚æ•°å°†è¢«å¼ºåˆ¶è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚ 12345678Object.keys("foo");Object.getOwnPropertyNames("foo");// TypeError: "foo" is not an object (ES5 code)Object.keys("foo");// ["0", "1", "2"] (ES6 code)Object.getOwnPropertyNames("foo");// ["0", "1", "2", "length"] (ES6 code) å…¼å®¹æ€§åˆ° IE9, es 5æ ‡å‡†ã€‚ for..inæ‰‹åŠ¨éåŽ†ï¼Œå¯ä»¥éåŽ†åˆ°è‡ªèº«å’ŒåŽŸåž‹é“¾ä¸Šæ‰€æœ‰å¯æžšä¸¾çš„å±žæ€§ã€‚ åªèŽ·å–è‡ªèº«å¯æžšä¸¾å±žæ€§ ç›´æŽ¥ç”¨ Object.keys() IE9 ä»¥ä¸‹å¯ä»¥é€šè¿‡hasOwnPropertyå®žçŽ°ï¼š 1234567if (!Object.keys) Object.keys = function(o) &#123; if (o !== Object(o)) throw new TypeError('Object.keys called on a non-object'); var k=[],p; for (p in o) if (Object.prototype.hasOwnProperty.call(o,p)) k.push(p); return k;&#125; åªèŽ·å–è‡ªèº«ä¸å¯æžšä¸¾å±žæ€§ é€šè¿‡ Object.keys() æŽ’é™¤å¯æžšä¸¾å±žæ€§ 12345678910111213141516var target = myObject;var enum_and_nonenum = Object.getOwnPropertyNames(target);// æŽ’é™¤å¯æžšä¸¾å±žæ€§var enum_only = Object.keys(target);var nonenum_only = enum_and_nonenum.filter(function(key) &#123; var indexInEnum = enum_only.indexOf(key); if (indexInEnum == -1) &#123; // not found in enum_only keys mean the key is non-enumerable, // so return true so we keep this in the filter return true; &#125; else &#123; return false; &#125;&#125;);console.log(nonenum_only); é€šè¿‡propertyIsEnumerableåˆ¤æ–­ï¼Œè¯¥æ–¹æ³•è¿”å›žBooleanå€¼ï¼Œä¸å¯æžšä¸¾è¿”å›žfalseã€‚ 123456789var target = myObject;var enum_and_nonenum = Object.getOwnPropertyNames(target);var enum_only = Object.keys(target);var nonenum_only = enum_and_nonenum.filter(function(key) &#123; // ç­›é€‰ä¸å¯æžšä¸¾å±žæ€§ return !target.propertyIsEnumerable(key)&#125;);console.log(nonenum_only); åªèŽ·å–åŽŸåž‹é“¾ä¸Šçš„å¯æžšä¸¾å±žæ€§ ç›´æŽ¥ç”¨ for..in 1234var o = Object.getPrototypeOf(targetObj); // è·³è¿‡éåŽ†è‡ªèº«å±žæ€§ï¼Œç›´æŽ¥ä»ŽåŽŸåž‹ä¸Šå¼€å§‹var k=[],p;for (p in o) if (Object.prototype.hasOwnProperty.call(o,p)) k.push(p);return k; æ³¨æ„ï¼Œè¿™æ ·éåŽ†å‡ºæ¥çš„å±žæ€§ä¹Ÿä¸ä¸€å®šèƒ½è®¿é—®ï¼Œ å› ä¸ºè‡ªèº«å±žæ€§å¯èƒ½ä¼šå±è”½æŽ‰åŽŸåž‹ä¸Šçš„å±žæ€§ã€‚ åªèŽ·å–åŽŸåž‹é“¾ä¸Šçš„ä¸å¯æžšä¸¾å±žæ€§æ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚æžœä½¿ç”¨ getOwnPropertyNamesï¼Œåªèƒ½å•ç‹¬èŽ·å–ä¸€å±‚åŽŸåž‹é“¾ï¼Œå¿…é¡»ä¸€çº§ä¸€çº§éåŽ†å¾€ä¸Šæ‰¾ï¼Œè€Œä¸”è¿™ä¹Ÿä¸ä¸€å®šæœ‰åœºæ™¯ï¼Œå› ä¸ºåŽŸåž‹é“¾ä¸Šçš„æ–¹æ³•é‡åæ˜¯ä¼šè¢«å±è”½çš„ã€‚]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>getOwnPropertyNames</tag>
        <tag>hasOwnProperty</tag>
        <tag>Object.keys</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¯”è¾ƒinstanceofä¸ŽisPrototypeOf]]></title>
    <url>%2F2017%2F01%2F12%2F%E6%AF%94%E8%BE%83instanceof%E4%B8%8EisPrototypeof%2F</url>
    <content type="text"><![CDATA[åœ¨javascriptä¸­ï¼Œinstanceof å’Œ isPrototypeOf éƒ½å¯ä»¥åˆ¤æ–­ä¸€ä¸ªåŽŸåž‹æ˜¯å¦åœ¨å¦ä¸€ä¸ªå®žä¾‹çš„åŽŸåž‹é“¾ä¸­ï¼Œé‚£ä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Œä¸ºä»€ä¹ˆè¯´ isPrototypeOf å¯ä»¥æ›¿ä»£ instanceof ã€‚ instanceof ç”¨æ³•123456789101112function Super() &#123; // init code&#125;function Sub() &#123; Super.call(this); // other init code&#125;Sub.prototype = new Super();var sub = new Sub(); å¯¹äºŽä¸Šé¢çš„ä»£ç ï¼Œç”¨ instanceof å¯ä»¥åƒè¿™æ ·ç¡®å®šä»–ä»¬çš„å…³ç³»ï¼š 1sub instanceof Super; // true isPrototypeOf ç”¨æ³•å¤ç”¨ä¸Šé¢çš„ä»£ç ï¼Œç”¨ isPrototypeOf å¯ä»¥è¿™æ ·å†™ï¼š 1Super.prototype.isPrototypeOf(sub); // true åŒºåˆ«ä¹ä¸€çœ‹ï¼Œéƒ½å¯ä»¥ç”¨ï¼Œä½†æŸç§æƒ…å†µä¸‹æ˜¯æœ‰åŒºåˆ«çš„ï¼Œä¾‹å¦‚ï¼š 1234567891011var super = &#123; // some super properties&#125;var sub = Object.create(super);sub.someProp = 5;var sub = Object.create(sub);console.log(super.isPrototypeOf(sub)); // trueconsole.log(sub instanceof super); // TypeError è¿™æ—¶å€™ super å¹¶ä¸æ˜¯æž„é€ å‡½æ•°ï¼Œæ— æ³•ä½¿ç”¨ instanceof, åªèƒ½ä½¿ç”¨ isPrototypeOf. ç»“è®ºç»“è®ºå°±æ˜¯ isPrototypeOf èƒ½ä½¿ç”¨çš„åœºæ™¯æ›´å¹¿ï¼Œå®Œå…¨å¯ä»¥æ›¿ä»£ instanceofï¼Œ åªæ˜¯å†™èµ·æ¥æ²¡é‚£ä¹ˆç®€æ´ã€‚]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>instanceof</tag>
        <tag>isPrototypeOf</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javascripté€šè¿‡Vibration APIå®žçŽ°æ‰‹æœºæŒ¯åŠ¨åé¦ˆæé«˜ç”¨æˆ·ä½“éªŒ]]></title>
    <url>%2F2017%2F01%2F10%2Fjavascript%E5%AE%9E%E7%8E%B0%E6%89%8B%E6%9C%BA%E6%8C%AF%E5%8A%A8%E5%8F%8D%E9%A6%88%E6%8F%90%E9%AB%98%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C%2F</url>
    <content type="text"><![CDATA[ç›®å‰å¤§å¤šæ•°çš„ç§»åŠ¨è®¾å¤‡å‡å…·å¤‡ç¡¬ä»¶èƒ½åŠ›æ”¯æŒæŒ¯åŠ¨ï¼Œè®©è½¯ä»¶ä»£ç é€šè¿‡ä½¿è®¾å¤‡æ‘‡æ™ƒæ¥å‘ç”¨æˆ·æä¾›ç‰©ç†åé¦ˆã€‚Vibration API ä¸º Webåº”ç”¨ç¨‹åºæä¾›è®¿é—®æ­¤ç¡¬ä»¶çš„èƒ½åŠ›ã€‚å¦‚æžœè®¾å¤‡ä¸æ”¯æŒï¼Œåˆ™ä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæžœã€‚ æŒ¯åŠ¨æè¿°æŒ¯åŠ¨è¢«æŠ½è±¡æˆã€å¼€-å…³ã€‘è„‰å†²çš„æ¨¡å¼ï¼Œä¸”å¯ä»¥å…·æœ‰å˜åŒ–çš„é•¿åº¦ã€‚å‚æ•°å¯ä»¥æ˜¯å•ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæŒç»­æŒ¯åŠ¨çš„æ¯«ç§’æ•° (ms)ï¼›æˆ–å¯ç”±å¤šä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„ï¼Œè¾¾åˆ°æŒ¯åŠ¨å’Œæš‚åœå¾ªçŽ¯çš„æ•ˆæžœã€‚åªè¦å•ä¸€ window.navigator.vibrate() å‡½å¼å³å¯æŽ§åˆ¶æŒ¯åŠ¨ã€‚ å•æ¬¡æŒ¯åŠ¨ä½ å¯æŒ‡å®šå•ä¸€æ•°å€¼ï¼Œæˆ–ç”¨åªæœ‰ä¸€ä¸ªæ•°å€¼æˆå‘˜çš„æ•°ç»„ï¼Œè®©è®¾å¤‡æŒ¯åŠ¨ 1 æ¬¡ï¼š 12window.navigator.vibrate(200);window.navigator.vibrate([200]); ä»¥ä¸Šä¸¤ä¸ªä¾‹å­éƒ½å¯ä»¥ä½¿è®¾å¤‡æŒ¯åŠ¨ 200 ms. å¤šæ¬¡æŒ¯åŠ¨ä¸€ä¸ªæ•°ç»„çš„å€¼æè¿°äº†è£…ç½®æŒ¯åŠ¨ä¸Žä¸æŒ¯åŠ¨çš„äº¤æ›¿æ—¶é—´æ®µã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå€¼éƒ½è½¬æ¢ä¸ºæ•´æ•°ï¼Œç„¶åŽäº¤æ›¿è§£é‡Šä¸ºè®¾å¤‡åº”è¯¥æŒ¯åŠ¨çš„æ¯«ç§’æ•°å’Œä¸æŒ¯åŠ¨çš„æ¯«ç§’æ•°ã€‚ä¾‹å¦‚: 1window.navigator.vibrate([200, 100, 200]); è¿™ä¼šä½¿è®¾å¤‡æŒ¯åŠ¨200 msï¼Œç„¶åŽæš‚åœ100 msï¼Œç„¶åŽå†æ¬¡æŒ¯åŠ¨è®¾å¤‡200 msã€‚ æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è®¾å®šå¤šä¸ªæŒ¯åŠ¨/æš‚åœå¯¹ï¼Œæ•°ç»„çš„å€¼å¯ä»¥æ˜¯å¶æ•°æˆ–å¥‡æ•°ä¸ªï¼› å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±äºŽæŒ¯åŠ¨åœ¨æ¯ä¸ªæŒ¯åŠ¨å‘¨æœŸç»“æŸæ—¶è‡ªåŠ¨åœæ­¢ï¼Œå› æ­¤æ‚¨ä¸å¿…æä¾›æœ€åŽä¸€ä¸ªå€¼åŽ»æš‚åœï¼Œæ¢å¥è¯è¯´ï¼Œæ•°ç»„é•¿åº¦åªéœ€è¦è®¾ç½®å¥‡æ•°ä¸ªã€‚ åœæ­¢æŒ¯åŠ¨å½“è°ƒç”¨ window.navigator.vibrate() çš„å‚æ•°ä¸ºã€Œ0ã€ã€ç©ºç™½æ•°ç»„ï¼Œæˆ–æ•°ç»„å…¨ä¸ºã€Œ0ã€æ—¶ï¼Œå³å¯å–æ¶ˆç›®å‰è¿›è¡Œä¸­çš„æŒ¯åŠ¨ã€‚ æŒç»­æŒ¯åŠ¨ä¸€äº›åŸºäºŽsetIntervalå’ŒclearIntervalæ“ä½œå°†å…è®¸æ‚¨åˆ›å»ºæŒç»­çš„æŒ¯åŠ¨ï¼š 123456789101112131415161718192021var vibrateInterval;// Starts vibration at passed in levelfunction startVibrate(duration) &#123; navigator.vibrate(duration);&#125;// Stops vibrationfunction stopVibrate() &#123; // Clear interval and stop persistent vibrating if(vibrateInterval) clearInterval(vibrateInterval); navigator.vibrate(0);&#125;// Start persistent vibration at given duration and interval// Assumes a number value is givenfunction startPeristentVibrate(duration, interval) &#123; vibrateInterval = setInterval(function() &#123; startVibrate(duration); &#125;, interval);&#125; å½“ç„¶ä¸Šé¢çš„ä»£ç ç‰‡æ®µæ²¡æœ‰è€ƒè™‘åˆ°æŒ¯åŠ¨å‚æ•°ä¸ºæ•°ç»„æƒ…å†µ; åŸºäºŽé˜µåˆ—çš„æŒä¹…æ€§æŒ¯åŠ¨å°†éœ€è¦è®¡ç®—æ•°ç»„é¡¹çš„å’Œï¼Œå¹¶åŸºäºŽè¯¥æ•°é‡åˆ›å»ºå‘¨æœŸï¼ˆå¯èƒ½å…·æœ‰é¢å¤–çš„å»¶è¿Ÿï¼‰ã€‚ ç”ŸæˆæŒ¯åŠ¨èŠ‚å¥å¯ä»¥é€šè¿‡vibe.js toolè¿™ä¸ªå·¥å…·æ¥ç”Ÿæˆä½ éœ€è¦çš„æŒ¯åŠ¨é¢‘çŽ‡ï¼Œç„¶åŽå¤åˆ¶å®ƒåˆ°ä½ çš„ä»£ç é‡Œã€‚ libæˆ‘å†™äº†ä¸€ä¸ªå°libï¼Œæ–¹ä¾¿ä½¿ç”¨vibrate.js demo: DEMO è¯‘è‡ªï¼š MDN Vibration API]]></content>
      <categories>
        <category>Vibration</category>
        <category>html5</category>
      </categories>
      <tags>
        <tag>Vibration</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”±lodashå¼•å‡ºæ•°ç»„Arrayçš„sliceæ–¹æ³•æ€§èƒ½æŽ¢ç©¶]]></title>
    <url>%2F2016%2F11%2F25%2F%E7%94%B1lodash%E5%BC%95%E5%87%BA%E6%95%B0%E7%BB%84Array%E7%9A%84slice%E6%96%B9%E6%B3%95%E6%80%A7%E8%83%BD%E6%8E%A2%E7%A9%B6%2F</url>
    <content type="text"><![CDATA[lodash æºç ä¸­ï¼Œå‘çŽ°æ•°ç»„æˆªå–æ“ä½œå¹¶æ²¡æœ‰ç›´æŽ¥ä½¿ç”¨arrayçš„sliceæ–¹æ³•ï¼Œè€Œæ˜¯å†™äº†ä¸ª baseSlice æ–¹æ³•ï¼Œæ›´é‡è¦çš„æ˜¯ baseSlice æ–¹æ³•é‡Œï¼Œä¹Ÿå¹¶æ²¡æœ‰ä½¿ç”¨ slice æ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨å¾ªçŽ¯ç´¢å¼•çš„æ–¹å¼åŽ»å®žçŽ°ã€‚è¿™è®©æˆ‘é™·å…¥æ€è€ƒï¼Œéš¾é“åŽŸç”ŸArrayçš„sliceæ–¹æ³•è¿˜ä¸å¦‚å¾ªçŽ¯å¿«ï¼Ÿ lodash æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920function baseSlice(array, start, end) &#123; var index = -1, length = array.length; if (start &lt; 0) &#123; start = -start &gt; length ? 0 : (length + start); &#125; end = end &gt; length ? length : end; if (end &lt; 0) &#123; end += length; &#125; length = start &gt; end ? 0 : ((end - start) &gt;&gt;&gt; 0); start &gt;&gt;&gt;= 0; var result = Array(length); while (++index &lt; length) &#123; result[index] = array[index + start]; &#125; return result;&#125; äºŽæ˜¯å°±å¼€å§‹å†™ä»£ç æ¯”è¾ƒï¼š æ“ä½œé•¿åº¦ä¸º100çš„æ•°ç»„ï¼Œæ‰§è¡Œ10000æ¬¡ï¼š 1234567891011121314151617181920212223242526272829303132333435var baseArray = [];var i = -1;while (++ i &lt; 100) &#123; // å®šä¹‰ä¸€ä¸ª10000é•¿åº¦çš„æ•°ç»„ä»¥ä¾›ä½¿ç”¨ baseArray[i] = i;&#125;console.time('slice with no args');for (var i = 0; i &lt; 10000; i++)&#123; baseArray.slice();&#125;console.timeEnd('slice with no args');console.time('slice with args');for (var i = 0; i &lt; 10000; i++)&#123; baseArray.slice(20, 40);&#125;console.timeEnd('slice with args');console.time('index');for (var i = 0; i &lt; 10000; i++)&#123; var result = Array(100); var index = -1; var length = baseArray.length; while (++index &lt; length) &#123; result[index] = baseArray[index]; &#125;&#125;console.timeEnd('index');console.time('index with no init array');for (var i = 0; i &lt; 10000; i++)&#123; var result = []; var index = -1; var length = baseArray.length; while (++index &lt; 20) &#123; result[index] = baseArray[index]; &#125;&#125;console.timeEnd('index with no init array'); å¯¹æ¯”ç»“æžœï¼š 123456789101112131415// chrome ç‰ˆæœ¬ 54.0.2840.98 (64-bit)slice with no args: 93.3msslice with args: 175msindex: 365msindex with no init array: 546ms// safari ç‰ˆæœ¬ 9.0.2 (11601.3.9)slice with no args: 122.152msslice with args: 117.181msindex: 60076.301msindex with no init array: 62055.406ms//firefox 50.0slice with no args: 462.07msslice with args: 442.25msindex: 194206.08msindex with no init array: 184714.59ms ç”±äºŽmac oxæ— æ³•æµ‹è¯•IE, å¯ä»¥çœ‹å‡ºï¼Œchromeæ€»ä½“è¦æ¯”safafiã€firefoxå¿«å¾ˆå¤šï¼› sliceæ–¹æ³•ä¸Šï¼Œsafariå’Œchromeå·®ä¸å¤šï¼Œ chromeä¸‹sliceæœ‰å‚æ•°æ¯”æ— å‚æ•°æ…¢ï¼› æ–°å»ºæ•°ç»„Array()å’Œ []æ€§èƒ½å·®ä¸å¤šï¼› è¿™ä¹ˆçœ‹æ¥ï¼Œé‚£ç”¨åŽŸç”Ÿ slice æ˜Žæ˜¾ä¼šæ›´å¥½ï¼Œä¸ºä»€ä¹ˆ lodash è¦ç”¨å¾ªçŽ¯ç´¢å¼•å‘¢ï¼Ÿéš¾é“æ˜¯å› ä¸ºä¸€èˆ¬åº”ç”¨æ•°ç»„éƒ½ä¸ä¼šè¿™ä¹ˆå¤§ï¼Œé‚£æ”¹æˆé•¿åº¦ä¸º100çš„æ•°ç»„è¿›è¡Œæ“ä½œï¼› 123456789101112131415// chromeslice with no args: 6msslice with args: 4.12msindex: 5.82msindex with no init array: 7.96ms// safarislice with no args: 9.158msslice with args: 8.432msindex: 640.311msindex with no init array: 643.174ms//firefoxslice with no args: 17.56msslice with args: 17.53msindex: 2174.15msindex with no init array: 2198.15ms å‘çŽ°ç»“è®ºå¹¶æ²¡æœ‰æ”¹å˜ã€‚ ç„¶åŽå°±å‘lodashæäº†question, å›žå¤æ˜¯ï¼š The perf wins of Array#slice vs. baseSlice depends on the size of the array. That is a minor point though as the perf of that method is not likely to be an issue. The reason we use baseSlice is because we treat arrays as dense while Array#slice will respect sparse arrays. å¤§æ¦‚æ„æ€æ˜¯ï¼Œä»–è§‰å¾—æ€§èƒ½æ²¡æœ‰å¤ªå¤§çš„å·®åˆ«ï¼ŒArray#sliceå’ŒbaseSliceæ€§èƒ½å¼ºå¼±å–å†³äºŽæ•°ç»„çš„å¤§å°ã€‚è¿™é‡Œé‡‡ç”¨baseSliceæ˜¯å› ä¸ºä»–ä»¬è¦è§†æ‰€æœ‰ä¸ºå¯†é›†æ•°æ®ï¼Œè€ŒArray#sliceä¼šå¤„ç†ç¨€ç–æ•°ç»„ã€‚ ç„¶åŽå°±æœ‰ä¸‹é¢çš„æµ‹è¯•ï¼š ä½¿ç”¨ Array#sliceå’ŒbaseSlice åˆ†åˆ«æˆªå–æ•°ç»„å…¶ä¸­ä¸€æ®µï¼Œå¾ªçŽ¯1000000æ¬¡ï¼š 12345678910111213141516171819var baseArray = [];var i = -1;while (++ i &lt; 100000) &#123; // å®šä¹‰ä¸€ä¸ª10000é•¿åº¦çš„æ•°ç»„ä»¥ä¾›ä½¿ç”¨,è¿™é‡Œæ•°ç»„é•¿åº¦å¹¶ä¸å½±å“æ€§èƒ½ï¼Œæ€§èƒ½å½±å“ä¸»è¦åœ¨äºŽæˆªå–çš„é•¿åº¦ã€‚ baseArray[i] = i;&#125;console.time('slice with args');for (var i = 0; i &lt; 1000000; i++)&#123; baseArray.slice(0, 20);&#125;console.timeEnd('slice with args');console.time('index');for (var i = 0; i &lt; 1000000; i++)&#123; var result = Array(20); var index = -1; while (++index &lt; 20) &#123; result[index] = baseArray[index]; &#125;&#125;console.timeEnd('index'); ä¸åŒæˆªå–é•¿åº¦åœ¨chromeä¸‹çš„æ•ˆæžœï¼š 123456789// æˆªå–é•¿åº¦ 20slice with args: 110msindex: 78.9ms// æˆªå–é•¿åº¦ 30slice with args: 114msindex: 112ms// æˆªå–é•¿åº¦ 30slice with args: 132msindex: 146ms ç”±æ­¤çœ‹å‡ºï¼Œæˆªå–é•¿åº¦ä¸º30å·¦å³æ—¶ï¼ŒArray#sliceå’Œloopæ–¹å¼æ€§èƒ½åŸºæœ¬ä¸€æ ·ï¼Œè€Œ Array#slice åŸºæœ¬ä¸å—æˆªå–é•¿åº¦çš„å½±å“ã€‚ æ‰€ä»¥ç»“è®ºæ˜¯ï¼Œå½“é•¿åº¦ä¸º30ä»¥ä¸‹æ—¶ï¼Œlodashçš„æ–¹æ³•æ˜¯æ¯”è¾ƒé«˜æ•ˆçš„ï¼Œå½“ç„¶ï¼Œè¿™å½±å“å¾®ä¹Žå…¶å¾®ã€‚åƒ_.chunkæ–¹æ³•ï¼Œä¸€èˆ¬åœºæ™¯åˆ†ç»„éƒ½ä¸ä¼šå¤ªé•¿ã€‚ ç–‘æƒ‘æ˜¯ï¼Œå¯¹æˆ‘çš„å›žå¤çš„åŽåŠå¥æˆ‘æ²¡æ€Žä¹ˆçœ‹æ‡‚ï¼Œå¯†é›†æ•°æ®å’Œç¨€ç–æ•°æ®å¯¹è¿™æœ‰ä»€ä¹ˆå½±å“å‘¢ï¼Ÿ]]></content>
      <categories>
        <category>lodash</category>
        <category>array</category>
        <category>slice</category>
      </categories>
      <tags>
        <tag>lodash</tag>
        <tag>array</tag>
        <tag>slice</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Debounce-and-Throttle-çš„å¯è¦–åŒ–è§£é‡‹]]></title>
    <url>%2F2016%2F11%2F17%2FDebounce-and-Throttle-%E7%9A%84%E5%8F%AF%E8%A6%96%E5%8C%96%E8%A7%A3%E9%87%8B%2F</url>
    <content type="text"><![CDATA[Debounce å’Œ Throttleæ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨JavaScriptä¸­ä½¿ç”¨ï¼Œä»¥æé«˜æˆ‘ä»¬å¯¹æ‰§è¡ŒåŠŸèƒ½çš„æŽ§åˆ¶ï¼Œåœ¨äº‹ä»¶å¤„ç†çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ã€‚ æ¯”å–»è¿™ä¸¤ç§æŠ€æœ¯éƒ½å›žç­”åŒæ ·çš„é—®é¢˜â€œä¸€ä¸ªåŠŸèƒ½å¯ä»¥éšç€æ—¶é—´è¢«æŽ¨ç§»å¤šä¹…ï¼Ÿâ€ Debounceï¼šæŠŠå®ƒçœ‹æˆæ˜¯â€œå¤šä¸ªåˆ†ç»„äº‹ä»¶ä¹‹ä¸€â€ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œä½ å›žå®¶ï¼Œå†è¿›å…¥ç”µæ¢¯ï¼Œé—¨æ­£åœ¨å…³é—­â€¦â€¦ï¼Œçªç„¶ä½ çš„é‚»å±…å‡ºçŽ°åœ¨å¤§åŽ…ï¼Œå¹¶è¯•å›¾è·³ä¸Šç”µæ¢¯ã€‚è¦æœ‰ç¤¼è²Œï¼å¹¶æ‰“å¼€å¤§é—¨ï¼Œä»–è¯´ï¼šä½ ç­‰ç­‰ï¼Œè®©æˆ‘ä¸€èµ·ä¸Šã€‚ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸Žç¬¬ä¸‰äººå†æ¬¡å‘ç”Ÿï¼Œç­‰ç­‰â€¦è¿™å¯èƒ½ä¼šå»¶ç¼“å‡ºå‘å‡ åˆ†é’Ÿã€‚ Throttleï¼šæŠŠå®ƒçœ‹æˆæ˜¯ä¸€ä¸ªé˜€ï¼Œå®ƒè§„å®šäº†æ‰§è¡Œçš„æµç¨‹ã€‚æˆ‘ä»¬å¯ä»¥åˆ¤æ–­å‡½æ•°å¯ä»¥åœ¨ä¸€å®šæ—¶é—´å†…è¢«è°ƒç”¨çš„æœ€å¤§æ¬¡æ•°ã€‚å› æ­¤ï¼Œå†ç”¨ç”µæ¢¯æ¯”å–»..ä½ æœ‰è¶³å¤Ÿçš„ç¤¼è²Œï¼ŒæŒç»­10ç§’ç­‰äººï¼Œä½†ä¸€æ—¦æ—¶é—´åˆ°äº†ï¼Œä½ ä¸€å®šè¦èµ°ï¼ æ—  Debounce æˆ– Throttle äº‹ä»¶å¤„ç†ç¨‹åºå°±åƒä¸€æ¬¡åªèƒ½ä¸€ä¸ªäººç”¨çš„ç”µæ¢¯ï¼šæ²¡æœ‰é‚£ä¹ˆé«˜æ•ˆã€‚ æˆ‘å¸Œæœ›è¿™ä¸ªåæ¯”å–»å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä½†æœ‰æ—¶è¨€è¯­å¹¶ä¸ä¼šå¯¹æŽŒæ¡è¿™äº›æ¦‚å¿µæœ‰å¤šå¤§çš„å¸®åŠ©ï¼Œæ‰€ä»¥æˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ¼”ç¤ºåŽ»ç†è§£ Debounce å’Œ Throttle æ¦‚å¿µï¼Œå¹¶æŠŠå®ƒä»¬åº”ç”¨åˆ°mousemoveäº‹ä»¶ã€‚ 123456789function elevator_departure(name)&#123; alert(name + " was the last one. Nobody else? Let's go then");&#125;;var debounced_elevator_departure = $.debounce(200, false, elevator_departure);debounced_elevator_departure('John');debounced_elevator_departure('Mike');debounced_elevator_departure('Peter');// You will see *only* one message, "Peter was the last one. Nobody else? Let's go then"; æˆ‘å‘çŽ°è¿™3ä¸ªäººåœ¨JavaScriptä¸­éƒ½é€šè¿‡debounceå’Œthrottleæ‰§è¡Œäº†ã€‚æˆ‘çœŸçš„å»ºè®®ä½ å…ˆè¯»ä¸€ä¸‹ Ben Alman&#39;s çš„æ–‡ç« ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£ debounce å’Œ throttle. underscore å’Œ lodash æœ‰ä¸åŒçš„å®žçŽ°æ–¹å¼ï¼Œä½†å‚æ•°éƒ½æ˜¯ä¸€æ ·çš„ï¼ˆé™¤äº† throttleæ²¡æœ‰ trailingï¼‰. Underscore.js by Jeremy Ashkenas * Lodash.js by John-David Dalton * jQuery Plugin by Ben Alman. æ¼”ç¤ºè¿™é‡Œæ˜¯è§†è§‰æ¼”ç¤º: è¿™æ˜¯æˆªå›¾ï¼š æ³¨æ„ï¼š è¿™ä¸ªçš„æºä»£ç æ¼”ç¤ºåœ¨GitHubä¸Šæ‰˜ç®¡ã€‚ å¦‚æžœä½ çœ‹åˆ°åŠ¨ç”»åœ¨æµè§ˆå™¨ä¸­å¹¶ä¸æµç•…ï¼Œè¯·åœ¨ä¸€ä¸ªå•ç‹¬çš„é¡µé¢æ‰“å¼€æ¼”ç¤ºï¼Œæˆ–è€…å°è¯•åœ¨Chromeä¸­ã€‚ æˆ‘é€šè¿‡åœ¨é¼ æ ‡åŒºåŸŸ tappingæ¥åŽ»åœ¨AndroidçŽ¯å¢ƒä¸‹æ¼”ç¤ºå®ƒ æ¯ä¸ªå•å…ƒä»£è¡¨çº¦30æ¯«ç§’ï¼Œä½†JSæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥æµè§ˆå™¨æ˜¯ä¸æ˜¯å‡†ç¡®ã€‚è¿™ä¸ªæ¼”ç¤ºå¹¶ä¸æ˜¯æƒ³æˆä¸ºä¸€ä¸ªæœ€ä½³å®žè·µï¼Œåªæ˜¯ä¸ºäº†æ›´å¥½åœ°åŽ»ç†è§£æ¦‚å¿µã€‚ å½“ä½ åšäº†setTimeoutï¼Œæ—¶é—´é—´éš”å¯èƒ½ä¸åŒï¼Œåœ¨æ¯ä¸ªæµè§ˆå™¨åœ¨4mså’Œ15msçš„ä¹‹é—´ï¼ˆå°¼å¤æ‹‰æ–¯Zakasçš„æ–‡ç« ï¼‰ï¼Œç”šè‡³æ˜¯setTimeout(fn,0)è‡³å°‘éœ€è¦4æ¯«ç§’ã€‚åœ¨å¦ä¸€æ–¹é¢ï¼Œæ—¶é—´ä¸º1æ¯«ç§’ä¸ºæœ€å°å•ä½çš„ã€‚ åœ¨mousemoveç¬¬ä¸€è¡Œä¸­çš„äº‹ä»¶ä¹Ÿæœ‰åšèŠ‚æµï¼ˆ80æ¯«ç§’ï¼‰ã€‚è¿™å¯¹ç†è§£æ¼”ç¤ºæœ‰æ‰€å¸®åŠ©ã€‚ è¦èŽ·å¾— trailingé€‰é¡¹$.throttleï¼Œä½ éœ€è¦ä¼ é€’falseã€‚ ä¸è¦å¿˜äº†ï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯builderï¼Œä»–ä»¬è¿”å›žä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ä½ åªéœ€è¦æ‰§è¡Œä¸€æ¬¡ã€‚ åº”ç”¨åœºæ™¯debounce æ¡ˆä¾‹ç”¨å®ƒå‡å°‘æ‰§è¡Œé¢‘ç¹çš„äº‹ä»¶ã€‚ä¾‹å­ï¼š å½“å°†è¦å¤„ç†çš„textareaçš„å¿«é€Ÿæ‰“å­—ï¼šä½ ä¸æƒ³æ‰§è¡Œå¤„ç†å‡½æ•°ï¼Œç›´åˆ°ç”¨æˆ·åœæ­¢è¾“å…¥å†æ¥å¤„ç†æ–‡æœ¬ã€‚ å½“æ•°æ®ä¿å­˜åˆ°é€šè¿‡AJAXæœåŠ¡å™¨ï¼šä½ ä¸æƒ³æ¯ç§’è°ƒç”¨éžå¸¸ç¼“æ…¢çš„é‚®ä»¶æœåŠ¡å™¨ throttle æ¡ˆä¾‹å’Œdebounce ä¸€æ ·ï¼Œä½†å¦‚æžœæƒ³æ¯éš”ä¸€æ®µæ—¶é—´å¿…é¡»æ‰§è¡Œäº‹ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å®ƒï¼š å‡è®¾ç”¨æˆ·ä¸åœåœ°å¿«é€Ÿè¾“å…¥30ç§’ï¼Œå¯èƒ½ä½ ä¼šæƒ³æ¯5ç§’æ‰§è¡Œä¸€æ¬¡å‡½æ•°ï¼› ä¸€äº›å¯¹æ€§èƒ½æœ‰å½±å“çš„äº‹ä»¶ä½†åˆå¿…é¡»å¤„ç†ï¼šscroll, mouseweel, mousemoveã€‚ä¸€ä¸ªç®€å•çš„é¼ æ ‡æ»šè½®è¿åŠ¨å¯ä»¥åœ¨ä¸€ç§’é’Ÿå†…è§¦å‘å‡ åä¸ªäº‹ä»¶ã€‚ æœ¬æ–‡ç¿»è¯‘è‡ª Debounce and Throttle: a visual explanation ========= update on 11-21 ========= exampledebounce123456789101112131415161718192021var validation = _.debounce(function () &#123; ... // æ ¡éªŒè¾“å…¥ï¼Œé€»è¾‘å¯èƒ½è¿˜ä¼šæœ‰ç‚¹å¤æ‚&#125;, 250)jQuery('input').keyup(validation) // è¾“å…¥å®Œæˆæˆ–åœé¡¿250msåŽæ‰åŽ»æ‰§è¡Œæ ¡éªŒï¼Œå¦‚æžœä¸åœè¾“å…¥10sï¼Œåˆ™10så†…éƒ½ä¸ä¼šè§¦å‘/** * debounceç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå¯é€‰å‚æ•°ï¼Œ * leadingä¸ºtrueæ—¶ï¼Œåˆ™åœ¨äº‹ä»¶å¼€å§‹æ—¶é¦–å…ˆæ‰§è¡Œä¸€æ¬¡ï¼Œ é»˜è®¤å€¼ä¸º falseï¼› * trailingä¸ºtrueæ—¶ï¼Œåˆ™åœ¨ç»“æŸæ—¶è§¦å‘, é»˜è®¤å€¼ä¸º trueï¼› * maxWaitè®¾ç½®æ¯éš”å¤šé•¿æ—¶é—´å¿…é¡»è§¦å‘ï¼› */function foo () &#123; ... &#125;jQuery('input').on('keyup', _.debounce(foo, 300, &#123; 'leading': true, // æ³¨æ„ï¼š æ‰§è¡Œçš„å‰ææ˜¯å®šæ—¶å™¨ä¸ºundefined 'trailing': false, 'maxWait': 1000&#125;));// debounceè¿˜å¯ä»¥è¢«å–æ¶ˆjQuery('button').on('click', function() &#123; validation.cancel();&#125;); throttle123456789101112function mousemove () &#123; ...&#125;jQuery('#div').on('mousemove', _.throttle(mousemove, 100)) // æ¯100mså¿…é¡»è§¦å‘ä¸€æ¬¡// mousemoveä¼šåœ¨å®šæ—¶å™¨å¼€å§‹æ—¶è§¦å‘, ä½†5åˆ†é’Ÿå†…ä¸ä¼šæœ‰ç¬¬äºŒæ¬¡jQuery('#div').on('mousemove', _.throttle(mousemove, 300000, &#123; 'leading': true, // å®šæ—¶å™¨å‰æ²¿è§¦å‘ï¼Œé»˜è®¤å€¼ä¸ºtrue 'trailing': false // å®šæ—¶å™¨åŽæ²¿è§¦å‘ï¼Œé»˜è®¤å€¼ä¸ºtrue&#125;));// throttle åŒæ ·å¯ä»¥è¢«å–æ¶ˆjQuery(window).on('popstate', throttled.cancel);]]></content>
      <categories>
        <category>å‡½æ•°èŠ‚æµ</category>
      </categories>
      <tags>
        <tag>debounce</tag>
        <tag>throttle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ npm shrinkwrap æ¥ç®¡ç†é¡¹ç›®ä¾èµ–]]></title>
    <url>%2F2016%2F10%2F20%2F%E4%BD%BF%E7%94%A8-npm-shrinkwrap-%E6%9D%A5%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%2F</url>
    <content type="text"><![CDATA[ç®¡ç†ä¾èµ–æ˜¯ä¸€ä¸ªå¤æ‚è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­å¿…å®šä¼šé‡åˆ°çš„é—®é¢˜ã€‚ åœ¨Node.jsé¡¹ç›®å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿç»å¸¸éœ€è¦å®‰è£…å’Œå‡çº§å¯¹åº”çš„ä¾èµ–ã€‚è™½ç„¶ npm ä»¥åŠè¯­æ„åŒ–çš„ç‰ˆæœ¬å· (semantic versioning, semver) è®©å¼€å‘è¿‡ç¨‹ä¸­ä¾èµ–çš„èŽ·å–å’Œå‡çº§å˜å¾—éžå¸¸å®¹æ˜“ï¼Œ ä½†ä¸ä¸¥æ ¼çš„ç‰ˆæœ¬å·é™åˆ¶ï¼Œä¹Ÿå¸¦æ¥äº†ç‰ˆæœ¬å·çš„ä¸ç¡®å®šæ€§ã€‚ä¸»è¦çš„é—®é¢˜å¯èƒ½æœ‰ä¸‰ä¸ªï¼š npm å»ºè®®ä½¿ç”¨ semver çš„åº”ç”¨ç¨‹åºç‰ˆæœ¬ï¼Œä½†è¿™ä¹Ÿå®Œå…¨ä¾èµ–ç¬¬ä¸‰æ–¹åŒ…éµå®ˆè¿™ä¸€è§„åˆ™ã€‚å¦‚æžœä½ ä¾èµ–äºŽçš„åŒ…ä¸éµå¾ª semver ï¼Œæˆ–è€…ä¾èµ–çš„åŒ…çš„æ–°ç‰ˆæœ¬æœ‰é‡å¤§æ›´æ”¹ï¼ˆè€Œä½ ä½¿ç”¨äº† ^ çš„å®½æ³›ç‰ˆæœ¬å®‰è£…ï¼‰ï¼Œè¿™æ½œåœ¨å¯èƒ½æ˜¯ä¼šå¯¼è‡´é—®é¢˜çš„ã€‚ å¦ä¸€ä¸ªé—®é¢˜çš„å‡ºçŽ°æ˜¯ç”±äºŽ npm å®‰è£…ä¾èµ–çš„æœºåˆ¶ã€‚npm çš„å®‰è£…åŒ…æ˜¯æœ‰å±‚æ¬¡ç»“æž„çš„ï¼Œæ‰‹åŠ¨æŽ§åˆ¶è¦å®‰è£…çš„è½¯ä»¶åŒ…çš„ç‰ˆæœ¬å·å¯ä»¥å®žçŽ°ï¼Œä½†æ˜¯ä½ åªèƒ½åœ¨ package.json ä½¿ç”¨ç²¾ç¡®çš„ç‰ˆæœ¬å·æŽ§åˆ¶ä½ çš„ç›´æŽ¥ä¾èµ–åŒ…ï¼Œä½†é‚£äº›å¤šå±‚ä»¥ä¸Šçš„ä¾èµ–å°±æ²¡åŠžæ³•æŽ§åˆ¶äº†ï¼›ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…ä¸ä¸¥è°¨çš„ç‰ˆæœ¬ä¾èµ–ç”Ÿå‘½å¯èƒ½ç ´åä½ çš„ä¾èµ–ç®¡ç†ã€‚ åœ¨å¼€å‘é˜¶æ®µæ‰§è¡Œå¾—åˆ°çš„ç‰ˆæœ¬ï¼Œå’ŒåŽç»­éƒ¨ç½²æ—¶å¾—åˆ°çš„å¯èƒ½æ˜¯ä¸ä¸€è‡´çš„ï¼Œæ›´ä¸å¯æŽ§çš„æ˜¯ï¼Œä½ ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…ä¹Ÿæœ‰è¿™æ ·çš„æƒ…å†µä¼šå¯¼è‡´æ½œåœ¨çš„ä¸Šçº¿é£Žé™©ã€‚ å¦‚æžœè¦æŽ§åˆ¶ä¸Šçº¿çš„é£Žé™©ï¼Œæˆ‘ä»¬å°±å¿…éœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨ npm shrinkwrap è¿™ä¸ªå‘½ä»¤æ¥è§£å†³é—®é¢˜ã€‚ npm shrinkwrapnpm shrinkwrap å¯ä»¥æŒ‰ç…§å½“å‰é¡¹ç›® node_modules ç›®å½•å†…çš„å®‰è£…åŒ…æƒ…å†µç”Ÿæˆç¨³å®šçš„ç‰ˆæœ¬å·æè¿°ã€‚ æ¯”æ–¹è¯´ï¼Œæœ‰ä¸€ä¸ªåŒ… A 1234567&#123; "name": "A", "version": "0.1.0", "dependencies": &#123; "B": "&lt;0.1.0" &#125;&#125; è¿˜æœ‰ä¸€ä¸ªåŒ… B 1234567&#123; "name": "B", "version": "0.0.1", "dependencies": &#123; "C": "&lt;0.1.0" &#125;&#125; ä»¥åŠåŒ… C 1234&#123; "name": "C", "version": "0.0.1"&#125; ä½ çš„é¡¹ç›®åªä¾èµ–äºŽ Aï¼ŒäºŽæ˜¯ npm install ä¼šå¾—åˆ°è¿™æ ·çš„ç›®å½•ç»“æž„ 123A@0.1.0 `-- B@0.0.1 `-- C@0.0.1 è¿™æ—¶å€™ï¼ŒB@0.0.2 å‘å¸ƒäº†ï¼Œè¿™æ—¶å€™åœ¨ä¸€ä¸ªæ–°çš„çŽ¯å¢ƒä¸‹æ‰§è¡Œ npm install å°†å¾—åˆ° 123A@0.1.0 `-- B@0.0.2 `-- C@0.0.1 è¿™æ—¶å€™ä¸¤æ¬¡å®‰è£…å¾—åˆ°çš„ç‰ˆæœ¬å·å°±ä¸ä¸€è‡´äº†ã€‚è€Œé€šè¿‡ shrinkwrap å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥ä¿è¯åœ¨æ‰€æœ‰çŽ¯å¢ƒä¸‹å®‰è£…å¾—åˆ°ç¨³å®šçš„ç»“æžœã€‚ åœ¨é¡¹ç›®å¼•å…¥æ–°åŒ…çš„æ—¶å€™ï¼Œæˆ–è€… A çš„å¼€å‘è€…æ‰§è¡Œä¸€ä¸‹ npm shrinkwrapï¼Œå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•å¾—åˆ°ä¸€ä¸ª npm-shrinkwrap.json æ–‡ä»¶ã€‚ è¿™ä¸ªæ–‡ä»¶å†…å®¹å¦‚ä¸‹ 1234567891011121314&#123; "name": "A", "version": "0.1.0", "dependencies": &#123; "B": &#123; "version": "0.0.1", "dependencies": &#123; "C": &#123; "version": "0.0.1" &#125; &#125; &#125; &#125;&#125; shrinkwrap å‘½ä»¤æ ¹æ®ç›®å‰å®‰è£…åœ¨node_modulesçš„æ–‡ä»¶æƒ…å†µé”å®šä¾èµ–ç‰ˆæœ¬ã€‚åœ¨é¡¹ç›®ä¸­æ‰§è¡Œ npm install çš„æ—¶å€™ï¼Œnpm ä¼šæ£€æŸ¥åœ¨æ ¹ç›®å½•ä¸‹æœ‰æ²¡æœ‰ npm-shrinkwrap.json æ–‡ä»¶ï¼Œå¦‚æžœ shrinkwrap æ–‡ä»¶å­˜åœ¨çš„è¯ï¼Œnpm ä¼šä½¿ç”¨å®ƒï¼ˆè€Œä¸æ˜¯ package.jsonï¼‰æ¥ç¡®å®šå®‰è£…çš„å„ä¸ªåŒ…çš„ç‰ˆæœ¬å·ä¿¡æ¯ã€‚ è¿™æ ·ä¸€æ¥ï¼Œåœ¨å®‰è£…æ—¶å€™ç¡®å®šçš„æ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯ä¼šç¨³å®šçš„å›ºåŒ–åœ¨ shrinkwrap é‡Œã€‚æ— è®ºæ˜¯Aï¼ŒB å’Œ Cä¸­çš„ç‰ˆæœ¬å¦‚ä½•å˜åŒ–ï¼Œæˆ–è€…å®ƒä»¬çš„ package.json æ–‡ä»¶å¦‚ä½•ä¿®æ”¹ï¼Œä½ å§‹ç»ˆèƒ½ä¿è¯ï¼Œåœ¨ä½ é¡¹ç›®ä¸­æ‰§è¡Œ npm install çš„åˆ°çš„ç‰ˆæœ¬å·æ—¶ç¨³å®šçš„ã€‚ åœ¨å¼€å‘ä¸­ä½¿ç”¨ shrinkwrapåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¼•å…¥ä¸€ä¸ªæ–°åŒ…çš„æµç¨‹å¦‚ä¸‹ npm install PACKAGE_NAME@VERSION --save èŽ·å–ç‰¹å®šç‰ˆæœ¬çš„åŒ… æµ‹è¯•åŠŸèƒ½ æµ‹è¯•åŠŸèƒ½æ­£å¸¸åŽï¼Œæ‰§è¡Œ npm shrinkwrap æŠŠä¾èµ–å†™å…¥ shrinkwrap æ–‡ä»¶ åœ¨ä»£ç ä»“åº“ä¸­æäº¤ shrinkwrap / package.jsonæè¿° å‡çº§ä¸€ä¸ªåŒ…çš„æµç¨‹åº”è¯¥æ˜¯è¿™æ · npm outdated èŽ·å–é¡¹ç›®æ‰€æœ‰ä¾èµ–çš„æ›´æ–°ä¿¡æ¯ npm install PACKAGE_NAME@VERSION --save èŽ·å–ç‰¹å®šç‰ˆæœ¬çš„åŒ… æµ‹è¯•åŠŸèƒ½ æµ‹è¯•åŠŸèƒ½æ­£å¸¸åŽï¼Œæ‰§è¡Œ npm shrinkwrapæŠŠä¾èµ–å†™å…¥ shrinkwrap æ–‡ä»¶ åœ¨ä»£ç ä»“åº“ä¸­æäº¤ shrinkwrap / package.jsonæè¿° åˆ é™¤ä¸€ä¸ªåŒ…çš„æµç¨‹å¦‚ä¸‹ npm uninstall PACKAGE_NAME --save åˆ é™¤è¿™ä¸ªåŒ… æµ‹è¯•åŠŸèƒ½ æµ‹è¯•åŠŸèƒ½æ­£å¸¸åŽï¼Œæ‰§è¡Œ npm shrinkwrap æŠŠæ›´æ–°çš„ä¾èµ–å†™å…¥ shrinkwrap æ–‡ä»¶ åœ¨ä»£ç ä»“åº“ä¸­æäº¤ shrinkwrap / package.json æè¿° æ¯”ä¸€èˆ¬çš„å®‰è£…å¤šäº†ä¸€æ­¥æ‰‹å·¥ç”Ÿæˆ shrinkwrap æ–‡ä»¶ã€‚åœ¨å®žé™…å·¥ä½œä¸­ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šå¿˜è®°è¿™ä¸€æ­¥ï¼Œå¯¼è‡´ä¸Šçº¿æ—¶å€™æ²¡æœ‰èŽ·å–åˆ°ä¾èµ–åŒ…çš„ç‰¹å®šç‰ˆæœ¬ã€‚ æœ¬æ–‡è½¬è‡ªä½¿ç”¨ npm shrinkwrap æ¥ç®¡ç†é¡¹ç›®ä¾èµ–]]></content>
      <categories>
        <category>npm</category>
      </categories>
      <tags>
        <tag>npm</tag>
        <tag>shrinkwrap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨Git-Hooksè¿›è¡Œè‡ªåŠ¨éƒ¨ç½²,è®©æäº¤å‘å¸ƒè‡ªåŠ¨åŒ–]]></title>
    <url>%2F2016%2F08%2F11%2F%E7%94%A8Git-Hooks%E8%BF%9B%E8%A1%8C%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2-%E8%AE%A9%E6%8F%90%E4%BA%A4%E5%8F%91%E5%B8%83%E8%87%AA%E5%8A%A8%E5%8C%96%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰äº†è§£çš„è‡ªåŠ¨åŒ–éƒ¨ç½²éƒ½æ˜¯jekinsè¿™æ ·é›†æˆåŒ–çš„æˆç†Ÿçš„å·¥å…·ã€‚æœ€è¿‘å› ä¸ºæœ‰æœ‹å‹æäº¤ä»£ç æ—¶ï¼Œä¸æƒ³ç™»é™†æœåŠ¡å™¨æ‹‰å–ä»£ç ï¼Œæ‰äº†è§£åˆ° git hooksã€‚çœ‹æ¥è¿˜æ˜¯gitä½¿ç”¨ä¸åˆ°ä½ã€‚ä¹‹å‰ä¸€ç›´éƒ½æ˜¯æœ¬åœ°å¼€å‘å¹¶æäº¤ä»£ç ï¼Œæµ‹è¯•æ—¶ï¼Œäººå·¥ç™»é™†æµ‹è¯•æœåŠ¡å™¨åŽ»æ‹‰å–æœ€æ–°ä»£ç ã€‚ ç½‘ä¸Šèµ„æ–™è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œæœ€åŽåœ¨æœ¬æœºæµ‹è¯•æ˜¯æˆåŠŸäº†çš„ã€‚ ä¸»è¦é€‰è¦æ˜Žç™½å‡ ä¸ªå…³é”®ç‚¹ï¼š git init â€“bare post-receive æ–‡ä»¶ SSH è®¤è¯ è¿™å‡ ä¸ªéƒ½æ¯”è¾ƒå®¹æ˜“æ‰¾åˆ°èµ„æ–™ã€‚ git init â€“bareå’Œ git init ä¸ä¸€æ ·çš„æ˜¯ï¼Œgit init --bareå¹¶ä¸å­˜å‚¨å®žé™…ä»£ç ï¼Œä»“åº“æ–‡ä»¶å¤¹ä¸ä¼šçœ‹åˆ°ä»»ä½•é¡¹ç›®ä»£ç ï¼Œåè€Œç”Ÿæˆäº†ä¸€äº› .gitä¹‹å¤–çš„æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­ hooksæ–‡ä»¶å¤¹å°±æ˜¯å­˜æ”¾gitå‘½ä»¤æ“ä½œåŽéœ€è¦æ‰§è¡Œçš„è„šæœ¬ã€‚ éœ€è¦æ–°å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸€ä¸ªæ‰§è¡Œgit init --bareä½œä¸ºè¿œç«¯ä»“åº“ï¼Œä¸€ä¸ªæ‰§è¡Œgit initä½œä¸ºæœåŠ¡å™¨é¡¹ç›®ç›®å½•ã€‚ æœ¬åœ°å¼€å‘ç›®å½•å’ŒæœåŠ¡å™¨é¡¹ç›®ç›®å½•çš„remoteéƒ½è¦æŒ‡å‘ æœåŠ¡å™¨çš„è¿œç«¯ä»“åº“ã€‚ post-receive æ–‡ä»¶post-receive æ–‡ä»¶æ˜¯git push ä¹‹åŽï¼Œæ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼Œè‡ªåŠ¨éƒ¨ç½²çš„è„šæœ¬ä»£ç å°±å†™åœ¨è¿™é‡Œã€‚ å¦‚ï¼š 123456789101112#!/bin/shunset GIT_DIRecho "è¿œç¨‹å¼€å§‹æ›´æ–°"NowPath=`pwd`echo $NowPathDeployPath="../deploy"cd $DeployPathgit pull origin masterecho "è¿œç¨‹æ›´æ–°å®Œæ¯•"cd $NowPathexit 0 è¿™é‡Œæœ‰ä¸€ç‚¹æ¯”è¾ƒå®¹æ˜“å‡ºé—®é¢˜çš„å°±æ˜¯è·¯å¾„ï¼Œæœ€å¥½è¿˜æ˜¯ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚ è„šæœ¬é‡Œè¿˜å¯ä»¥åŠ å…¥ä»»ä½•æƒ³æ‰§è¡Œçš„è„šæœ¬ï¼Œæ¯”å¦‚æ‰“åŒ…ç¼–è¯‘ã€‚ ä¸è¿‡è¦æ³¨æ„ä½¿ç”¨ chmod +x post-receive æ”¹å˜ä¸€ä¸‹æƒé™ï¼ŒæœåŠ¡å™¨ç«¯çš„é…ç½®å°±åŸºæœ¬å®Œæˆäº†ã€‚ SSHè®¤è¯è¿™ä¸ªåœ¨ mac os x å’Œ linuxéƒ½æ²¡æœ‰é—®é¢˜ï¼Œæˆ‘ç”¨åˆ«äººçš„windowsé…ç½®çš„æ—¶å€™ç»å¸¸éƒ½ä¼šå‡ºçŽ°è®¤è¯å¤±è´¥ï¼Œå°±ç®—è®¤è¯æˆåŠŸäº†ï¼Œä¹Ÿæ— æ³•æ‰§è¡Œè„šæœ¬ï¼Œå¯¹è¿™ä¸ªè¿˜æ˜¯ä¸å¤ªç†Ÿæ‚‰ã€‚æˆ‘çŒœå¯èƒ½æ˜¯ cmd çš„é—®é¢˜ï¼Œssh ç™»é™†åŽè¿˜é‡åˆ°è¿‡ä¹±ç ã€‚ è¿™äº›éƒ½é…ç½®å¥½ä¹‹åŽï¼Œæœ¬åœ°å¼€å‘åªéœ€è¦æäº¤ä»£ç ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥é¢„è§ˆæœ€æ–°ä»£ç äº†ã€‚]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webpack-sourcemapé€‰é¡¹åº”è¯¥é€‰å“ªä¸ª]]></title>
    <url>%2F2016%2F08%2F08%2Fwebpack-sourcemap%E9%80%89%E9%A1%B9%E5%BA%94%E8%AF%A5%E9%80%89%E5%93%AA%E4%B8%AA%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨ webpack ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä½†æ˜¯æ¯æ¬¡çœ‹åˆ°åˆ«çš„é¡¹ç›®é…ç½®ï¼Œè¿˜æ˜¯ä¼šåŽ»æµè§ˆä¸€éã€‚è¿™æ¬¡åˆšå¥½çœ‹åˆ°ä¸€ä¸ª devtool: &#39;#eval-source-map&#39;ï¼Œå°±æœ‰äº›å¥½å¥‡ï¼Œä¹‹å‰éƒ½æ˜¯é»˜è®¤ä½¿ç”¨ #source-map å¹¶æ²¡æœ‰è¿‡å¤šåŽ»æ³¨æ„å®ƒã€‚googleä¸€ä¸‹ï¼Œå‘çŽ°è¿™ä¸ª devtool é€‰é¡¹è¿˜ä¸å°‘ï¼Œé‚£æˆ‘ä»¬åˆ°åº•é€‰å“ªä¸ªå‘¢ï¼Œå®ƒä»¬æœ‰å“ªäº›åŒºåˆ«ã€‚ å…ˆæ¥çœ‹çœ‹å®˜æ–¹æ–‡æ¡£çš„ç›¸å…³æè¿°ï¼š æœ‰æž„å»ºé€Ÿåº¦ï¼Œé‡æ–°æž„å»ºé€Ÿåº¦ï¼Œæ‰“åŒ…é€Ÿåº¦ï¼Œæ¥æº è¿™å‡ é¡¹çš„å±•ç¤ºã€‚ ç„¶åŽå¯ä»¥çœ‹çœ‹è¿™ä¸€ç¯‡æ–‡ç« ï¼Œå¯¹è¿™å‡ ä¸ªé€‰é¡¹æè¿°å¾—æ¯”è¾ƒè¯¦ç»†ï¼š https://chemzqm.me/webpack-sourcemap æ‘˜å‡ºä¸»è¦éƒ¨åˆ†ï¼š eval æ–‡æ¡£ä¸Šè§£é‡Šçš„å¾ˆæ˜Žç™½ï¼Œæ¯ä¸ªæ¨¡å—éƒ½å°è£…åˆ° eval åŒ…è£¹èµ·æ¥ï¼Œå¹¶åœ¨åŽé¢æ·»åŠ  //# sourceURL source-map è¿™æ˜¯æœ€åŽŸå§‹çš„ source-map å®žçŽ°æ–¹å¼ï¼Œå…¶å®žçŽ°æ˜¯æ‰“åŒ…ä»£ç åŒæ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ sourcemap æ–‡ä»¶ï¼Œ å¹¶åœ¨æ‰“åŒ…æ–‡ä»¶çš„æœ«å°¾æ·»åŠ  //# sourceURL æ³¨é‡Šè¡Œå‘Šè¯‰ JS å¼•æ“Žæ–‡ä»¶åœ¨å“ªå„¿ hidden-source-map æ–‡æ¡£ä¸Šä¹Ÿè¯´äº†ï¼Œå°±æ˜¯ soucremap ä½†æ²¡æ³¨é‡Šï¼Œæ²¡æ³¨é‡Šæ€Žä¹ˆæ‰¾æ–‡ä»¶å‘¢ï¼Ÿè²Œä¼¼åªèƒ½é åŽç¼€ï¼Œè­¬å¦‚ xxx/bundle.js æ–‡ä»¶ï¼ŒæŸäº›å¼•æ“Žä¼šå°è¯•åŽ»æ‰¾ xxx/bundle.js.map inline-source-map ä¸ºæ¯ä¸€ä¸ªæ–‡ä»¶æ·»åŠ  sourcemap çš„ DataUrlï¼Œæ³¨æ„è¿™é‡Œçš„æ–‡ä»¶æ˜¯æ‰“åŒ…å‰çš„æ¯ä¸€ä¸ªæ–‡ä»¶è€Œä¸æ˜¯æœ€åŽæ‰“åŒ…å‡ºæ¥çš„ï¼ŒåŒæ—¶è¿™ä¸ª DataUrl æ˜¯åŒ…å«ä¸€ä¸ªæ–‡ä»¶å®Œæ•´ souremap ä¿¡æ¯çš„ Base64 æ ¼å¼åŒ–åŽçš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª urlã€‚ eval-source-map è¿™ä¸ªå°±æ˜¯æŠŠ eval çš„ sourceURL æ¢æˆäº†å®Œæ•´ souremap ä¿¡æ¯çš„ DataUrl cheap-source-map ä¸åŒ…å«åˆ—ä¿¡æ¯ï¼Œä¸åŒ…å« loader çš„ sourcemapï¼Œï¼ˆè­¬å¦‚ babel çš„ sourcemapï¼‰ cheap-module-source-map ä¸åŒ…å«åˆ—ä¿¡æ¯ï¼ŒåŒæ—¶ loader çš„ sourcemap ä¹Ÿè¢«ç®€åŒ–ä¸ºåªåŒ…å«å¯¹åº”è¡Œçš„ã€‚æœ€ç»ˆçš„ sourcemap åªæœ‰ä¸€ä»½ï¼Œå®ƒæ˜¯ webpack å¯¹ loader ç”Ÿæˆçš„ sourcemap è¿›è¡Œç®€åŒ–ï¼Œç„¶åŽå†æ¬¡ç”Ÿæˆçš„ã€‚ webpack ä¸ä»…æ”¯æŒè¿™ 7 ç§ï¼Œè€Œä¸”å®ƒä»¬è¿˜æ˜¯å¯ä»¥ä»»æ„ç»„åˆçš„ï¼Œå°±å¦‚æ–‡æ¡£æ‰€è¯´ï¼Œä½ å¯ä»¥è®¾ç½® souremap é€‰é¡¹ä¸º cheap-module-inline-source-mapã€‚ ç»“åˆå®˜æ–¹çš„åˆ—è¡¨æ¯”è¾ƒå’Œå¼•ç”¨çš„è¿™ç¯‡æ–‡ç« çš„ä»‹ç»ï¼Œå°±æ¯”è¾ƒå®¹æ˜“é€‰æ‹©åˆé€‚çš„é€‰é¡¹äº†ã€‚å»ºè®®å¼€å‘æ—¶ä½¿ç”¨ #cheap-module-eval-source-mapï¼Œæµ‹è¯•çŽ¯å¢ƒæˆ–çº¿ä¸Šæœ‰éœ€è¦çš„è¯ä½¿ç”¨ #cheap-module-source-map]]></content>
      <categories>
        <category>webpack</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ApplicationCacheç¦»çº¿ç¼“å­˜åšä¸€ä¸ªh5ç¦»çº¿åº”ç”¨]]></title>
    <url>%2F2016%2F06%2F30%2F%E4%BD%BF%E7%94%A8ApplicationCache%E7%A6%BB%E7%BA%BF%E7%BC%93%E5%AD%98%E5%81%9A%E4%B8%80%E4%B8%AAh5%E7%A6%BB%E7%BA%BF%E5%BA%94%E7%94%A8%2F</url>
    <content type="text"><![CDATA[åŽŸç”Ÿappå¯ä»¥ç¦»çº¿æ“ä½œï¼Œåœ¨ä»¥å‰æ˜¯ç›¸å¯¹web appçš„ä¼˜åŠ¿ï¼Œwebå¿…é¡»è”ç½‘æ‰èƒ½åˆ·æ–°ä½¿ç”¨ã€‚è™½ç„¶æ‰€æœ‰æµè§ˆå™¨éƒ½æœ‰ç¼“å­˜æœºåˆ¶ï¼Œä½†å®ƒä»¬å¹¶ä¸ä¸€å®šæ€»èƒ½èµ·åˆ°é¢„æœŸçš„ä½œç”¨ã€‚HTML5 ä½¿ç”¨ ApplicationCache æŽ¥å£è§£å†³äº†ç”±ç¦»çº¿å¸¦æ¥çš„éƒ¨åˆ†éš¾é¢˜ã€‚å³ä½¿ç”¨æˆ·åœ¨ç¦»çº¿çŠ¶æ€ä¸‹æŒ‰äº†åˆ·æ–°æŒ‰é’®ï¼Œæ‚¨çš„åº”ç”¨ä¹Ÿä¼šæ­£å¸¸åŠ è½½å’Œè¿è¡Œã€‚ ä½¿ç”¨ç¼“å­˜æŽ¥å£å¯ä¸ºæ‚¨çš„åº”ç”¨å¸¦æ¥ä»¥ä¸‹ä¸‰ä¸ªä¼˜åŠ¿ï¼š ç¦»çº¿æµè§ˆ - ç”¨æˆ·å¯åœ¨ç¦»çº¿æ—¶æµè§ˆæ‚¨çš„å®Œæ•´ç½‘ç«™ é€Ÿåº¦ - ç¼“å­˜èµ„æºä¸ºæœ¬åœ°èµ„æºï¼Œå› æ­¤åŠ è½½é€Ÿåº¦è¾ƒå¿«ã€‚ æœåŠ¡å™¨è´Ÿè½½æ›´å°‘ - æµè§ˆå™¨åªä¼šä»Žå‘ç”Ÿäº†æ›´æ”¹çš„æœåŠ¡å™¨ä¸‹è½½èµ„æºã€‚ å¼•ç”¨æ¸…å•æ–‡ä»¶manifestå±žæ€§è¦å¯ç”¨æŸä¸ªåº”ç”¨çš„åº”ç”¨ç¼“å­˜ï¼Œè¯·åœ¨æ–‡æ¡£çš„ html æ ‡è®°ä¸­æ·»åŠ  manifest å±žæ€§ï¼š 1234&lt;!DOCTYPE html&gt;&lt;html manifest="app.manifest"&gt; ...&lt;/html&gt; æ‚¨åº”åœ¨è¦ç¼“å­˜çš„ç½‘ç»œåº”ç”¨çš„æ¯ä¸ªé¡µé¢ä¸Šéƒ½æ·»åŠ  manifest å±žæ€§ã€‚å¦‚æžœç½‘é¡µä¸åŒ…å« manifest å±žæ€§ï¼Œæµè§ˆå™¨å°±ä¸ä¼šç¼“å­˜è¯¥ç½‘é¡µï¼ˆé™¤éžæ¸…å•æ–‡ä»¶ä¸­æ˜Žç¡®åˆ—å‡ºäº†è¯¥å±žæ€§ï¼‰ã€‚è¿™å°±æ„å‘³ç€ç”¨æˆ·æµè§ˆçš„æ¯ä¸ªåŒ…å« manifest çš„ç½‘é¡µéƒ½ä¼šéšå¼æ·»åŠ åˆ°åº”ç”¨ç¼“å­˜ã€‚å› æ­¤ï¼Œæ‚¨æ— éœ€åœ¨æ¸…å•ä¸­åˆ—å‡ºæ¯ä¸ªç½‘é¡µã€‚ manifest å±žæ€§å¯æŒ‡å‘ç»å¯¹ç½‘å€æˆ–ç›¸å¯¹è·¯å¾„ï¼Œä½†ç»å¯¹ç½‘å€å¿…é¡»ä¸Žç›¸åº”çš„ç½‘ç»œåº”ç”¨åŒæºã€‚ æ¸…å•æ–‡ä»¶æ ¼å¼ä¸Ž MIME ç±»åž‹è®¾ç½®æ¸…å•æ–‡ä»¶å¯ä½¿ç”¨ä»»ä½•æ–‡ä»¶æ‰©å±•åï¼Œä½†å¿…é¡»ä»¥æ­£ç¡®çš„ text/cache-manifest MIME ç±»åž‹æä¾›ã€‚ ä¸‹é¢æ˜¯å‡ ä»¶ç½‘ç»œæœåŠ¡çš„é…ç½®ä¾‹å­ï¼š Apache: æ–°å»ºæˆ–è€…ç¼–è¾‘çŽ°æœ‰çš„ .htaccess æ–‡ä»¶ï¼Œåœ¨é‡Œé¢åŠ ä¸Šä¸€è¡Œ 1AddType text/cache-manifest .manifest Nginx: ä¿®æ”¹ mime.types æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å¢žåŠ  manifest æ–‡ä»¶çš„æ˜ å°„ 1text/cache-manifest manifest Tomcatï¼š ä¿®æ”¹ web.xml æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å¢žåŠ  1234&lt;mime-mapping&gt; &lt;extension&gt;manifest&lt;/extension&gt; &lt;mime-type&gt;text/cache-manifest&lt;/mime-type&gt; &lt;/mime-mapping&gt; æ¸…å•æ–‡ä»¶ç»“æž„åŸºæœ¬çš„æ¸…å•æ ¼å¼ï¼š 12345CACHE MANIFESTindex.htmlstylesheet.cssimages/logo.pngscripts/main.js æ‚¨éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š CACHE MANIFEST å­—ç¬¦ä¸²åº”åœ¨ç¬¬ä¸€è¡Œï¼Œä¸”å¿…ä¸å¯å°‘ã€‚ ç½‘ç«™çš„ç¼“å­˜æ•°æ®é‡ä¸å¾—è¶…è¿‡ 5 MBã€‚ä¸è¿‡ï¼Œå¦‚æžœæ‚¨è¦ç¼–å†™çš„æ˜¯é’ˆå¯¹ Chrome ç½‘ä¸Šåº”ç”¨åº—çš„åº”ç”¨ï¼Œå¯ä½¿ç”¨ unlimitedStorage å–æ¶ˆè¯¥é™åˆ¶ã€‚ å¦‚æžœæ¸…å•æ–‡ä»¶æˆ–å…¶ä¸­æŒ‡å®šçš„èµ„æºæ— æ³•ä¸‹è½½ï¼Œå°±æ— æ³•è¿›è¡Œæ•´ä¸ªç¼“å­˜æ›´æ–°è¿›ç¨‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å°†ç»§ç»­ä½¿ç”¨åŽŸåº”ç”¨ç¼“å­˜ã€‚ å®Œæ•´çš„æ¸…å•æ ¼å¼ï¼š 1234567891011121314151617181920212223CACHE MANIFEST# daksfljs3kl23j3k43 hash ä»¥ä¾¿åšç‰ˆæœ¬æŽ§åˆ¶# é»˜è®¤éƒ¨åˆ†ï¼Œæ˜¾å¼ç¼“å­˜è¿™äº›æ–‡ä»¶CACHE:/favicon.icoindex.htmlstylesheet.cssimages/logo.pngscripts/main.js# æ­¤éƒ¨åˆ†ä¸‹åˆ—å‡ºçš„æ–‡ä»¶æ˜¯éœ€è¦è¿žæŽ¥åˆ°æœåŠ¡å™¨çš„ç™½åå•èµ„æºã€‚æ— è®ºç”¨æˆ·æ˜¯å¦å¤„äºŽç¦»çº¿çŠ¶æ€ï¼Œå¯¹è¿™äº›èµ„æºçš„æ‰€æœ‰è¯·æ±‚éƒ½ä¼šç»•è¿‡ç¼“å­˜ã€‚NETWORK:login.php/myapihttp://api.twitter.com# æ­¤éƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼Œç”¨äºŽæŒ‡å®šæ— æ³•è®¿é—®èµ„æºæ—¶çš„åŽå¤‡ç½‘é¡µã€‚å…¶ä¸­ç¬¬ä¸€ä¸ª URI ä»£è¡¨èµ„æºï¼Œç¬¬äºŒä¸ªä»£è¡¨åŽå¤‡ç½‘é¡µã€‚ä¸¤ä¸ª URI å¿…é¡»ç›¸å…³ï¼Œå¹¶ä¸”å¿…é¡»ä¸Žæ¸…å•æ–‡ä»¶åŒæºã€‚# offline.jpg will be served in place of all images in images/large/# offline.html will be served in place of all other .html filesFALLBACK:images/large/ images/offline.jpg*.html /offline.html åº”ç”¨ç¼“å­˜åªåœ¨å…¶æ¸…å•æ–‡ä»¶å‘ç”Ÿæ›´æ”¹æ—¶æ‰ä¼šæ›´æ–°ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæ‚¨ä¿®æ”¹äº†å›¾ç‰‡èµ„æºæˆ–æ›´æ”¹äº† JavaScript å‡½æ•°ï¼Œè¿™äº›æ›´æ”¹ä¸ä¼šé‡æ–°ç¼“å­˜ã€‚æ‚¨å¿…é¡»ä¿®æ”¹æ¸…å•æ–‡ä»¶æœ¬èº«æ‰èƒ½è®©æµè§ˆå™¨åˆ·æ–°ç¼“å­˜æ–‡ä»¶ã€‚ è¿™äº›éƒ¨åˆ†å¯æŒ‰ä»»æ„é¡ºåºæŽ’åˆ—ï¼Œä¸”æ¯ä¸ªéƒ¨åˆ†å‡å¯åœ¨åŒä¸€æ¸…å•ä¸­é‡å¤å‡ºçŽ°; å¯ä½¿ç”¨é€šé…ç¬¦ã€‚ è¯·æ³¨æ„ï¼š HTTP ç¼“å­˜æ ‡å¤´ä»¥åŠå¯¹é€šè¿‡ SSL æä¾›çš„ç½‘é¡µè®¾ç½®çš„ç¼“å­˜é™åˆ¶å°†è¢«æ›¿æ¢ä¸ºç¼“å­˜æ¸…å•ã€‚å› æ­¤ï¼Œé€šè¿‡ https æä¾›çš„ç½‘é¡µå¯å®žçŽ°ç¦»çº¿è¿è¡Œã€‚chrome æœªæ¥å°†ä¼šç¦æ­¢éž https ç½‘é¡µä½¿ç”¨ ApplicationCache åŠŸèƒ½ï¼ˆupdated 2016-06-30ï¼‰ æ›´æ–°ç¼“å­˜åº”ç”¨åœ¨ç¦»çº¿åŽå°†ä¿æŒç¼“å­˜çŠ¶æ€ï¼Œé™¤éžå‘ç”Ÿä»¥ä¸‹æŸç§æƒ…å†µï¼š ç”¨æˆ·æ¸…é™¤äº†æµè§ˆå™¨å¯¹æ‚¨ç½‘ç«™çš„æ•°æ®å­˜å‚¨ã€‚ æ¸…å•æ–‡ä»¶ç»è¿‡ä¿®æ”¹ã€‚è¯·æ³¨æ„ï¼šæ›´æ–°æ¸…å•ä¸­åˆ—å‡ºçš„æŸä¸ªæ–‡ä»¶å¹¶ä¸æ„å‘³ç€æµè§ˆå™¨ä¼šé‡æ–°ç¼“å­˜è¯¥èµ„æºã€‚æ¸…å•æ–‡ä»¶æœ¬èº«å¿…é¡»è¿›è¡Œæ›´æ”¹ã€‚ åº”ç”¨ç¼“å­˜é€šè¿‡ç¼–ç¨‹æ–¹å¼è¿›è¡Œæ›´æ–°ã€‚ ç¼“å­˜çŠ¶æ€window.applicationCache å¯¹è±¡æ˜¯å¯¹æµè§ˆå™¨çš„åº”ç”¨ç¼“å­˜çš„ç¼–ç¨‹è®¿é—®æ–¹å¼ã€‚å…¶ status å±žæ€§å¯ç”¨äºŽæŸ¥çœ‹ç¼“å­˜çš„å½“å‰çŠ¶æ€ï¼š 12345678910111213141516171819202122232425var appCache = window.applicationCache;switch (appCache.status) &#123; case appCache.UNCACHED: // UNCACHED == 0 return 'UNCACHED'; break; case appCache.IDLE: // IDLE == 1 return 'IDLE'; break; case appCache.CHECKING: // CHECKING == 2 return 'CHECKING'; break; case appCache.DOWNLOADING: // DOWNLOADING == 3 return 'DOWNLOADING'; break; case appCache.UPDATEREADY: // UPDATEREADY == 4 return 'UPDATEREADY'; break; case appCache.OBSOLETE: // OBSOLETE == 5 return 'OBSOLETE'; break; default: return 'UKNOWN CACHE STATUS'; break;&#125;; ç”¨ js è°ƒç”¨ applicationCache.update() å°†å°è¯•æ›´æ–°ç”¨æˆ·çš„ç¼“å­˜ï¼ˆå‰ææ˜¯å·²æ›´æ”¹æ¸…å•æ–‡ä»¶ï¼‰ã€‚æœ€åŽï¼Œå½“ applicationCache.status å¤„äºŽ UPDATEREADY çŠ¶æ€æ—¶ï¼Œè°ƒç”¨ applicationCache.swapCache() å³å¯å°†åŽŸç¼“å­˜æ¢æˆæ–°ç¼“å­˜ã€‚ 123456789var appCache = window.applicationCache;appCache.update(); // Attempt to update the user's cache....if (appCache.status == window.applicationCache.UPDATEREADY) &#123; appCache.swapCache(); // The fetch was successful, swap in the new cache.&#125; è¯·æ³¨æ„ï¼šä»¥è¿™ç§æ–¹å¼ä½¿ç”¨ update() å’Œ swapCache() ä¸ä¼šå‘ç”¨æˆ·æä¾›æ›´æ–°çš„èµ„æºã€‚æ­¤æµç¨‹åªæ˜¯è®©æµè§ˆå™¨æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„æ¸…å•ã€ä¸‹è½½æŒ‡å®šçš„æ›´æ–°å†…å®¹ä»¥åŠé‡æ–°å¡«å……åº”ç”¨ç¼“å­˜ã€‚å› æ­¤ï¼Œè¿˜éœ€è¦å¯¹ç½‘é¡µè¿›è¡Œä¸¤æ¬¡é‡æ–°åŠ è½½æ‰èƒ½å‘ç”¨æˆ·æä¾›æ–°çš„å†…å®¹ï¼Œå…¶ä¸­ç¬¬ä¸€æ¬¡æ˜¯èŽ·å¾—æ–°çš„åº”ç”¨ç¼“å­˜ï¼Œç¬¬äºŒæ¬¡æ˜¯åˆ·æ–°ç½‘é¡µå†…å®¹ã€‚ å¥½æ¶ˆæ¯æ˜¯ï¼Œæ‚¨å¯ä»¥é¿å…é‡æ–°åŠ è½½ä¸¤æ¬¡çš„éº»çƒ¦ã€‚è¦ä½¿ç”¨æˆ·æ›´æ–°åˆ°æœ€æ–°ç‰ˆç½‘ç«™ï¼Œå¯è®¾ç½®ç›‘å¬å™¨ï¼Œä»¥ç›‘å¬ç½‘é¡µåŠ è½½æ—¶çš„ updateready äº‹ä»¶ï¼š 1234567891011121314151617// Check if a new cache is available on page load.window.addEventListener('load', function(e) &#123; window.applicationCache.addEventListener('updateready', function(e) &#123; if (window.applicationCache.status == window.applicationCache.UPDATEREADY) &#123; // Browser downloaded a new app cache. // Swap it in and reload the page to get the new hotness. window.applicationCache.swapCache(); if (confirm('A new version of this site is available. Load it?')) &#123; window.location.reload(); &#125; &#125; else &#123; // Manifest didn't changed. Nothing new to server. &#125; &#125;, false);&#125;, false); applicationCache äº‹ä»¶äº‹ä»¶ä¼šç”¨äºŽç›‘å¬ç¼“å­˜çš„çŠ¶æ€ã€‚æµè§ˆå™¨ä¼šå¯¹ä¸‹è½½è¿›åº¦ã€åº”ç”¨ç¼“å­˜æ›´æ–°å’Œé”™è¯¯çŠ¶æ€ç­‰æƒ…å†µè§¦å‘ç›¸åº”äº‹ä»¶ã€‚ä»¥ä¸‹ä»£ç æ®µä¸ºæ¯ç§ç¼“å­˜äº‹ä»¶ç±»åž‹è®¾ç½®äº†äº‹ä»¶ç›‘å¬å™¨ï¼š 12345678910111213141516171819202122232425262728293031323334var appCache = window.applicationCache;unction handleCacheEvent(e) &#123; //...&#125;function handleCacheError(e) &#123; alert('Error: Cache failed to update!');&#125;;// Fired after the first cache of the manifest.appCache.addEventListener('cached', handleCacheEvent, false);// Checking for an update. Always the first event fired in the sequence.appCache.addEventListener('checking', handleCacheEvent, false);// An update was found. The browser is fetching resources.appCache.addEventListener('downloading', handleCacheEvent, false);// The manifest returns 404 or 410, the download failed,// or the manifest changed while the download was in progress.appCache.addEventListener('error', handleCacheError, false);// Fired after the first download of the manifest.appCache.addEventListener('noupdate', handleCacheEvent, false);// Fired if the manifest file returns a 404 or 410.// This results in the application cache being deleted.appCache.addEventListener('obsolete', handleCacheEvent, false);// Fired for each resource listed in the manifest as it is being fetched.appCache.addEventListener('progress', handleCacheEvent, false);// Fired when the manifest resources have been newly redownloaded.appCache.addEventListener('updateready', handleCacheEvent, false); å¦‚æžœæ¸…å•æ–‡ä»¶æˆ–å…¶ä¸­æŒ‡å®šçš„èµ„æºæ— æ³•ä¸‹è½½ï¼Œæ•´ä¸ªæ›´æ–°éƒ½å°†å¤±è´¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å°†ç»§ç»­ä½¿ç”¨åŽŸåº”ç”¨ç¼“å­˜ã€‚ åŽŸæ–‡ï¼š åº”ç”¨ç¼“å­˜åˆçº§ä½¿ç”¨æŒ‡å— htmlæ ‡å‡†]]></content>
      <categories>
        <category>ApplicationCache</category>
        <category>html5</category>
      </categories>
      <tags>
        <tag>ApplicationCache</tag>
        <tag>html5</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ­£ç¡®æ£€æµ‹Javascriptæ•°æ®ç±»åž‹]]></title>
    <url>%2F2016%2F06%2F08%2F%E6%AD%A3%E7%A1%AE%E6%A3%80%E6%B5%8BJavascript%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[typeofå¯¹äºŽä»»ä½•å˜é‡æ¥è¯´ï¼Œä½¿ç”¨typeof æ€»æ˜¯ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›žä»¥ä¸‹6ç§ç±»åž‹ä¹‹ä¸€ï¼š number string boolean object function undefined è¦æ³¨æ„ null ä½¿ç”¨ typeof æ£€æµ‹æ—¶è¿”å›žçš„æ˜¯ â€˜objectâ€™ å¯¹äºŽ null å¯ä»¥ä½¿ç”¨ 123function type(o) &#123; return (o === null) ? 'null' : typeof(o)&#125; constructor(æž„é€ å‡½æ•°å±žæ€§å€¼)ä½¿ç”¨ constructor å±žæ€§å¯ä»¥åˆ¤æ–­ç»å¤§éƒ¨åˆ†æ•°æ®çš„ç±»åž‹ã€‚ 123456var a = 1; a.constructor // numbervar a = &#123;&#125;; a.constructor // objectvar a = []; a.constructor // arrayvar a = true; a.constructor // booleanvar a = 'true'; a.constructor // stringvar a = function aaa()&#123;&#125;; a.constructor // function ä½†æ˜¯å¯¹äºŽ undefined å’Œ null ç‰¹æ®Šå€¼ï¼Œä¸èƒ½èƒ½ä½¿ç”¨ constructor,ä¼šç›´æŽ¥æŠ›å‡ºå¼‚å¸¸ã€‚å¯ä»¥å…ˆè½¬æ¢å¸ƒå°”å€¼ï¼Œå¦‚æžœä¸º trueï¼Œåˆ™è¯´æ˜Žä¸æ˜¯ undefined å’Œnull , å†è°ƒç”¨ constructorå±žæ€§ 123function type(o) &#123; return !o ? o : (o).constructor&#125; Object.prototype.toStringä½¿ç”¨ toString() æ–¹æ³•æ£€æµ‹å¯¹è±¡ç±»åž‹æ˜¯æœ€å®‰å…¨ã€æœ€å‡†ç¡®çš„ã€‚å®ƒè¿”å›žçš„å­—ç¬¦ä¸²å½¢å¼å¦‚ä¸‹ [object class], å…¶ä¸­ï¼Œ objectè¡¨ç¤ºå¯¹è±¡çš„é€šç”¨ç±»åž‹ï¼Œclassè¡¨ç¤ºå¯¹è±¡çš„å†…éƒ¨ç±»åž‹ã€‚ ä½†æ˜¯ï¼Œè¦èŽ·å–å¯¹è±¡classå€¼çš„å”¯ä¸€æ–¹æ³•æ˜¯å¿…é¡»è°ƒç”¨ Object å¯¹è±¡å®šä¹‰çš„é»˜è®¤ toString() æ–¹æ³•ï¼Œå› ä¸ºä¸åŒå¯¹è±¡éƒ½ä¼šé¢„å®šä¹‰è‡ªå·±çš„ toString() æ–¹æ³•ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æŽ¥è°ƒç”¨å¯¹è±¡çš„ toString() æ–¹æ³•ã€‚ var a = new Date() a.toString() // å½“å‰çš„UTCæ—¶é—´å­—ç¬¦ä¸² 12var a = new Date()Object.prototype.toString.apply(a) å®Œå–„çš„æ£€æµ‹æ–¹æ³• 12345678910111213141516// è¿”å›žå€¼æœ‰ï¼š 'undefined', 'null', 'number', 'boolean', 'object', 'function', 'regexp', 'string', 'array', 'date', 'error'function typeOf(o) &#123; var _toString = Object.prototype.toString; var _type = &#123; 'undefined': 'undefined', 'number': 'number', 'boolean': 'boolean', 'string': 'string', '[object Function]': 'function', '[object RegExp]': 'regexp', '[object Array]': 'array', '[object Date]': 'date', '[object Error]': 'error' &#125; return _type[typeof o] || _type[_toString.call(o)] || (o ? 'object' : 'null')&#125;]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitå°è®°]]></title>
    <url>%2F2016%2F05%2F16%2Fgit%E5%B0%8F%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[æœ‰ä¸€äº›ä¸å¤ªå¸¸ç”¨çš„gitå‘½ä»¤è®°å½•ä¸‹ git amendå½“ä¸€äº›æ›´æ”¹å·²æäº¤ï¼Œå´å‘çŽ°æ¼æäº¤äº†ä¸€éƒ¨åˆ†æ–‡ä»¶ï¼Œè¿™æ—¶å°±å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œå¯ä»¥æŠŠæ¼çš„éƒ¨åˆ†è¿½åŠ åˆ°ä¸Šä¸€æ¬¡æäº¤ 12git add forgotten_file.rbgit commit â€“â€“amend reset softåˆšåˆšæäº¤ï¼Œå´åˆå‘çŽ°åˆšæ‰çš„ä»£ç è¿˜æœ‰bugï¼Œæƒ³å†æ¬¡ä¿®æ”¹åŽå†æäº¤ 1git reset â€“â€“soft HEAD^ æ³¨æ„ä¸Ž git reset --hard HEAD^ ä¸åŒçš„æ˜¯ï¼Œ--softå¹¶ä¸åŒæŠŠä¸Šä¸€æ¬¡æäº¤çš„ä»£ç åˆ é™¤ï¼Œåªæ˜¯æŠŠå®ƒå˜æˆæœªæäº¤çš„çŠ¶æ€ï¼Œè€Œ--hardå´ä¼šå®Œå…¨æ’¤æ¶ˆä¸Šä¸€æ¬¡æäº¤çš„ä»£ç ã€‚ git blameå½“ä½ æƒ³æŸ¥å‡ºï¼Œä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œæ¯ä¸€è¡Œä»£ç æ˜¯è°ç¼–è¾‘çš„ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ 1git blame robin.md git checkout tags/v1.0å½“åˆ†æ”¯åå’Œæ ‡ç­¾åç›¸åŒæ—¶ï¼Œéœ€è¦è¿™æ ·å†™ branch_atå½“ä½ æƒ³ä»ŽæŸä¸€åŽ†å²ç‰ˆæœ¬ä¸­å¼€ä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œä¸æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ä¸­å¼€åˆ†æ”¯ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š 1git branch test_branch eadnadk213dsafdsafkl234j32ll34l2l rebaseå½“è¿œç¨‹materåˆ†æ”¯å·²æ›´æ”¹ï¼Œ æœ¬åœ°åˆåŸºäºŽæ—§ç‰ˆæœ¬çš„masterè¿›è¡Œçš„æäº¤ï¼Œå¯ä»¥é‡æ–°æŒ‡å®šåŸºäºŽè¿œç¨‹masterï¼Œä¹‹åŽå†æäº¤ï¼Œé¿å…å†²çªæ—¶æŠŠè¿œç¨‹çš„ä»£ç merge æŽ‰ï¼š 12git rebase origin/master mastergit push origin master git reflogreflogæ˜¯gitç”¨æ¥è®°å½•å¼•ç”¨å˜åŒ–çš„ä¸€ç§æœºåˆ¶ï¼Œæ¯”å¦‚è®°å½•åˆ†æ”¯çš„å˜åŒ–æˆ–è€…æ˜¯HEADå¼•ç”¨çš„å˜åŒ–ã€‚å¯ä»¥ç”¨æ¥æŸ¥æ‰¾æ“ä½œè®°å½•ä»¥åŠæ¢å¤æ•°æ® git submodule addæ·»åŠ å¤–éƒ¨é¡¹ç›®ä¸ºå­æ¨¡å— git rebase -i]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pm2ä¸€ä¸ªå¸¦æœ‰è´Ÿè½½å‡è¡¡åŠŸèƒ½çš„Nodeåº”ç”¨çš„è¿›ç¨‹ç®¡ç†å™¨]]></title>
    <url>%2F2016%2F05%2F04%2Fpm2%E4%B8%80%E4%B8%AA%E5%B8%A6%E6%9C%89%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%8A%9F%E8%83%BD%E7%9A%84Node%E5%BA%94%E7%94%A8%E7%9A%84%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%E5%99%A8%2F</url>
    <content type="text"><![CDATA[PM2æ˜¯ä¸€ä¸ªæä¾›äº†å†…ç½®çš„è´Ÿè½½å‡è¡¡çš„Node.jsåº”ç”¨ç¨‹åºè¿›ç¨‹ç®¡ç†å™¨ã€‚å®ƒå¯ä»¥è®©ä½ ä¿æŒåº”ç”¨ç¨‹åºæ°¸è¿œåœ¨çº¿ï¼Œæ— éœ€åœæœºåœ°é‡å¯åº”ç”¨ï¼Œä¹Ÿæœ‰åŠ©äºŽç³»ç»Ÿç®¡ç†å‘˜å·¥ä½œã€‚ å®‰è£… PM21$ npm install pm2 -g å¯åŠ¨åº”ç”¨1$ pm2 start app.js è¿™æ ·ï¼Œåº”ç”¨å°±å·²ç»åœ¨åŽå°å¯åŠ¨ï¼Œå¹¶è¢«ç›‘æµ‹ä¿æŒåœ¨çº¿ã€‚ æ¨¡å—ç³»ç»ŸPM2 å†…åµŒä¸€ä¸ªç®€å•å¼ºå¤§çš„æ¨¡å—ç³»ç»Ÿï¼Œå¯ä»¥ç›´æŽ¥åƒä¸‹é¢è¿™æ ·å®‰è£…æ¨¡å— 1$ pm2 install &lt;module_name&gt; pm2-logrotate æ—¥å¿—ç®¡ç†åŠåˆ†å‰²æ¨¡å— pm2-webshell å¼ºå¤§çš„æµè§ˆå™¨æ¨¡æ‹Ÿç»ˆç«¯ pm2-auto-pull æŒç»­é›†æˆï¼Œè‡ªåŠ¨æ‹‰å–ä»£ç  æ›´æ–°PM21234# Install latest pm2 version$ npm install pm2 -g# Save process list, exit old PM2 &amp; restore all processes$ pm2 update ä¸»è¦ç‰¹æ€§å‘½ä»¤æ¦‚è§ˆ12345678910111213141516171819202122232425262728293031323334353637383940$ npm install pm2 -g # Install PM2$ pm2 start app.js # Start, Daemonize and auto restart application$ pm2 start app.js -i 4 # Start 4 instances of application in cluster mode # it will load balance network queries to each app$ pm2 start app.js --name="api" # Start application and name it "api"$ pm2 start app.js --watch # Restart application on file change$ pm2 start script.sh # Start bash script$ pm2 list # List all processes started with PM2$ pm2 monit # Display memory and cpu usage of each app$ pm2 show [app-name] # Show all informations about application$ pm2 logs # Display logs of all apps$ pm2 logs [app-name] # Display logs for a specific app$ pm2 flush$ pm2 stop all # Stop all apps$ pm2 stop 0 # Stop process with id 0$ pm2 restart all # Restart all apps$ pm2 reload all # Reload all apps in cluster mode$ pm2 gracefulReload all # Graceful reload all apps in cluster mode$ pm2 delete all # Kill and delete all apps$ pm2 delete 0 # Delete app with id 0$ pm2 scale api 10 # Scale app with name api to 10 instances$ pm2 reset [app-name] # Reset number of restart for [app-name]$ pm2 startup # Generate a startup script to respawn PM2 on boot$ pm2 save # Save current process list$ pm2 resurrect # Restore previously save processes$ pm2 update # Save processes, kill PM2 and restore processes$ pm2 generate # Generate a sample json configuration file$ pm2 deploy app.json prod setup # Setup "prod" remote server$ pm2 deploy app.json prod # Update "prod" remote server$ pm2 deploy app.json prod revert 2 # Revert "prod" remote server by 2$ pm2 module:generate [name] # Generate sample module with name [name]$ pm2 install pm2-logrotate # Install module (here a log rotation system)$ pm2 uninstall pm2-logrotate # Uninstall module$ pm2 publish # Increment version, git push and npm publish å¼€å¯è¿›ç¨‹çš„å¤šç§æ–¹å¼12345$ pm2 start app.js --watch # Restart application on file change$ pm2 start script.sh # Start bash script$ pm2 start app.js -- -a 34 # Start app and pass option -a 34$ pm2 start app.json # Start all applications declared in app.json$ pm2 start my-python-script.py --interpreter python è¿›ç¨‹ç®¡ç†åˆ—å‡ºæ‰€æœ‰è¿›ç¨‹ï¼š 1$ pm2 list ç®¡ç†è¿›ç¨‹ 123$ pm2 stop &lt;app_name|id|'all'|json_conf&gt;$ pm2 restart &lt;app_name|id|'all'|json_conf&gt;$ pm2 delete &lt;app_name|id|'all'|json_conf&gt; æŸ¥çœ‹è¿›ç¨‹çš„è¯¦æƒ… 1$ pm2 describe &lt;id|app_name&gt; CPU / å†…å­˜ç›‘æµ‹1$ pm2 monit æ—¥å¿—å·¥å…·1pm2 logs ['all'|'PM2'|app_name|app_id] [--err|--out] [--lines &lt;n&gt;] [--raw] [--timestamp [format]] ä¾‹ï¼š 123456789$ pm2 logs$ pm2 logs WEB-API --err$ pm2 logs all --raw$ pm2 logs --lines 5$ pm2 logs --timestamp "HH:mm:ss"$ pm2 logs WEB-API --lines 0 --timestamp "HH:mm" --out$ pm2 logs PM2 --timestamp$ pm2 flush // Clear all the logs å¼€æœºå¯åŠ¨PM2å¯ä»¥è‡ªåŠ¨ç”Ÿæˆå¹¶é…ç½®å¼€æœºå¯åŠ¨è„šæœ¬ï¼Œè®©æœåŠ¡å™¨åœ¨é‡å¯çš„æ—¶å€™å¯ä»¥ä¿æŒåº”ç”¨åœ¨çº¿ 12345$ pm2 startup# auto-detect platform$ pm2 startup [platform]# render startup-script for a specific platform, the [platform] could be one of:# ubuntu|centos|redhat|gentoo|systemd|darwin|amazon æ›´å¤šæŸ¥çœ‹&gt;&gt;]]></content>
      <categories>
        <category>Node</category>
      </categories>
      <tags>
        <tag>Node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Node.jsçš„clusteræ¨¡å—å‘æŒ¥CPUçš„å¤šæ ¸ä¼˜åŠ¿]]></title>
    <url>%2F2016%2F04%2F24%2FNode-js%E7%9A%84cluster%E6%A8%A1%E5%9D%97%E5%8F%91%E6%8C%A5CPU%E7%9A%84%E5%A4%9A%E6%A0%B8%E4%BC%98%E5%8A%BF%2F</url>
    <content type="text"><![CDATA[ä¸€ä¸ªNode.jsåº”ç”¨ç¨‹åºåªèƒ½ä½¿ç”¨åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ã€‚ä¸ºäº†å……åˆ†å‘æŒ¥å¤šæ ¸CPUçš„ä¼˜åŠ¿ï¼ŒNode.jsä¸­æä¾›äº†ä¸€ä¸ª clusteræ¨¡å—ï¼Œå…è®¸åœ¨å¤šä¸ªå­è¿›ç¨‹ä¸­è¿è¡Œä¸åŒçš„Node.jsåº”ç”¨ç¨‹åºã€‚clusteræ¨¡å—æ˜¯å¯¹ child_process.fork()çš„ä¸€ä¸ªå°è£…ã€‚]]></content>
      <categories>
        <category>Node</category>
      </categories>
      <tags>
        <tag>Node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­è¿›ç¨‹child_processè®©Node.jså…·å¤‡å‘½ä»¤è¡Œçš„åŠŸèƒ½]]></title>
    <url>%2F2016%2F04%2F22%2F%E5%AD%90%E8%BF%9B%E7%A8%8Bchild-process%E8%AE%A9Node-js%E5%85%B7%E5%A4%87%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84%E5%8A%9F%E8%83%BD%2F</url>
    <content type="text"><![CDATA[åœ¨Nodeä¸­ä½¿ç”¨å­è¿›ç¨‹çš„ç›®çš„ï¼Œæ­£æ˜¯å¸Œæœ›ä»ŽNodeåº”ç”¨ç¨‹åºä¸­é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼è®¿é—®è®¡ç®—æœºèµ„æºã€‚ å…±æœ‰å››ç§ä¸åŒçš„æŠ€æœ¯æ¥åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ child_process.spawnspawnæ˜¯åˆ›å»ºå­è¿›ç¨‹æœ€å¸¸è§çš„æ–¹æ³•ã€‚ä¾‹ï¼š 123456789101112131415161718var spawn = require('child_process').spawn, pwd = spawn('pwd');pwd.stdout.on('data', function(data)&#123; console.log('stdout:' + data);&#125;);pwd.stderr.on('data', function(data)&#123; console.log('stderr' + data);&#125;);pwd.on('close', function(code)&#123; console.log('child process close with code' + code);&#125;);pwd.on('exit', function(code)&#123; console.log('child process exit with code' + code);&#125;); å‚æ•°ä½œä¸ºæ•°ç»„ä¼ å…¥ å­è¿›ç¨‹å¯¹ stdout å’Œ stderr ç›¸å…³äº‹ä»¶å¯ä»¥è¿›è¡Œæ•èŽ· å­è¿›ç¨‹é€€å‡ºä»£ç ä¸º 1ï¼Œè¡¨ç¤ºå‘ç”Ÿäº†é”™è¯¯ï¼›æ²¡æœ‰é”™è¯¯æ—¶ï¼Œé€€å‡ºä»£ç ä¸º 0 å°½é‡ä½¿ç”¨closeäº‹ä»¶è€Œä¸æ˜¯exitäº‹ä»¶ï¼Œåœ¨è¿›ç¨‹ç»“æŸåŽè®¿é—®å…¶æ•°æ®å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºå´©æºƒ å¦‚ä½•ä½¿ç”¨ stdin æ ‡å‡†è¾“å…¥å¯¹è±¡å‘¢ï¼š 12345678910111213var spawn = require('child_process').spawn, find = spawn('find', ['.', '-ls']), grep = spawn('grep', ['test']);grep.stdout.setEncoding('utf8');find.stdout.on('data', function(data)&#123; grep.stdin.write(data);&#125;);grep.stdout.on('data', function(data)&#123; console.log(data);&#125;) ä¸Šé¢è¿™æ®µä¾‹å­æ¨¡æ‹Ÿäº†Unixç®¡é“ï¼ˆ|ï¼‰åŠŸèƒ½ï¼Œå¯ä»¥å°†ä¸€ä¸ªå‘½ä»¤çš„ç»“æžœä¼ é€’ç»™å¦ä¸€ä¸ªå‘½ä»¤ä½œä¸ºè¾“å…¥ã€‚ child_process.exec å’Œ child_process.execFileé€šè¿‡ child_process.exec å’Œ child_process.execFile æ¥å¯åŠ¨ shell æ‰§è¡Œå‘½ä»¤å¯ä»¥ç¼“å­˜å‘½ä»¤æ‰§è¡Œçš„ç»“æžœ child_process.execFile çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‘½ä»¤æˆ–æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œ ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰å‚æ•°åˆ—è¡¨ï¼Œ ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å›žè°ƒå‡½æ•°ï¼Œè¯¥å›žè°ƒå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼š error, stdout å’Œ stderrã€‚å¦‚æžœæ²¡æœ‰å‘ç”Ÿé”™è¯¯ï¼Œæ‰§è¡Œç»“æžœä¼šä¿å­˜åˆ° stdoutã€‚ child_process.exec åˆ™æ²¡æœ‰å¯é€‰å‚æ•°åˆ—è¡¨ï¼Œåªæœ‰ execFile æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ã€‚ 12345678var execFile = require('child_process').execFile, child;child = execFile('ls', ['-l'], function(error, stdout, stderr)&#123; if (error == null) &#123; console.log('stdout: ' + stdout); &#125;&#125;); execFile æ–¹æ³•ä¼šæ›´å®‰å…¨ï¼Œå› ä¸ºå®ƒçš„å‘½ä»¤è¡Œå‚æ•°ä½œä¸ºæ•°ç»„ä¼ å…¥ã€‚ child_process.forkfork å…¶å®žæ˜¯å¯¹ spawnçš„å°è£…ï¼Œç›®çš„æ˜¯ä¸ºäº†å¯åŠ¨å­è¿›ç¨‹å¹¶è¿è¡Œ Node.jsæ¨¡å—ã€‚ ä¾‹ï¼š fork(&#39;./child.js&#39;) ç›¸å½“äºŽ spawn(&#39;node&#39;, [&#39;./child.js&#39;]) æ­¤æ–¹æ³•ä¼šåœ¨çˆ¶è¿›ç¨‹ä¸Žå­è¿›ç¨‹ä¹‹é—´å»ºç«‹ä¸€ä¸ªçœŸå®žçš„é€šä¿¡ç®¡é“ï¼Œç”¨äºŽè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚ä½†é€šè¿‡forkç”Ÿæˆçš„æ¯ä¸ªå­è¿›ç¨‹éƒ½éœ€è¦ä¸€ä¸ªå…¨æ–°çš„ V8 å®žä¾‹ï¼Œè¿™éœ€è¦è€—è´¹æ›´å¤šæ—¶é—´å’Œå†…å­˜ã€‚ 12345var n = child_process.fork('./child.js');n.on('message', function(m) &#123; console.log('PARENT got message:', m);&#125;);n.send(&#123; hello: 'world' &#125;); send æ–¹æ³•ç”¨äºŽè¿›ç¨‹é—´é€šä¿¡ï¼Œ é€šè¿‡ç›‘å¬messageäº‹ä»¶æ¥èŽ·å–æ¶ˆæ¯]]></content>
      <categories>
        <category>Node</category>
      </categories>
      <tags>
        <tag>Node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React-v15.0å‡çº§æŒ‡å—]]></title>
    <url>%2F2016%2F04%2F19%2FReact-v15-0%E5%8D%87%E7%BA%A7%E6%8C%87%E5%8D%97%2F</url>
    <content type="text"><![CDATA[React-v15.0å‡çº§æŒ‡å— ä¸»è¦å˜åŒ–åŠ å…¥document.createElement å¹¶ä¸”åºŸå¼ƒ data-reactidç»è¿‡æˆ‘ä»¬è®¨è®ºï¼ŒDOM æœ‰å¾ˆå¤§çš„æ”¹å˜ã€‚å…¶ä¸­æœ€å€¼å¾—å…³æ³¨çš„ä¸€ä¸ªå˜åŒ–å°±æ˜¯ï¼Œæˆ‘ä»¬ä¸å†ç»™æ¯ä¸ª DOMè®¾ç½®data-reactidå±žæ€§ã€‚è™½ç„¶è¿™æ›´éš¾çœ‹å‡ºä¸€ä¸ªç½‘é¡µæ˜¯å¦ä½¿ç”¨äº† Reactï¼Œä½†ä¼˜åŠ¿æ˜¯DOMæ›´è½»é‡äº†ã€‚è¿™ä¸€æ”¹å˜è®©æˆ‘ä»¬ä½¿ç”¨ document.createElementæ¥åˆå§‹æ¸²æŸ“æˆä¸ºå¯èƒ½ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šç”Ÿæˆå¤§é‡çš„HTMLå­—ç¬¦ä¸²ï¼Œç„¶åŽä½¿ç”¨ node.innerHTMLæ¥æ’å…¥ã€‚å½“æ—¶ï¼Œæˆ‘ä»¬å†³å®šå°½å¿«åœ¨å¤§éƒ¨åˆ†æ¡ˆä¾‹å’Œæ”¯æŒçš„æµè§ˆå™¨ä¸­ä½¿ç”¨document.createElementã€‚æµè§ˆå™¨æŒç»­åœ°æ”¹å–„ï¼Œå› æ­¤å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ä¸å†æ˜¯æ­£ç¡®çš„ã€‚ä½¿ç”¨ createElementå¯ä»¥è®©Reactçš„å…¶ä»–åŠŸèƒ½è¿è¡Œå¾—æ›´å¿«ã€‚åŽŸæ¥çš„idsç”¨æ¥æ˜ å°„Reactç»„ä»¶çš„äº‹ä»¶ï¼Œè¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å¯¹æ¯ä¸€ä¸ªäº‹ä»¶åšå¾ˆå¤šå·¥ä½œï¼Œå³ä½¿æˆ‘ä»¬å°½å¯èƒ½åœ°ç¼“å­˜è¿™äº›æ•°æ®ã€‚æ­£å¦‚æˆ‘ä»¬é‡åˆ°è¿‡çš„ï¼Œç¼“å­˜å’Œç¼“å­˜å¤±æ•ˆå¾ˆå®¹æ˜“å‡ºé”™ï¼Œæˆ‘ä»¬å‘çŽ°è®¸å¤šé—®é¢˜éƒ½æ— æ³•é‡çŽ°ã€‚çŽ°åœ¨æˆ‘ä»¬åœ¨æ¸²æŸ“çš„æ—¶å€™å¯ä»¥ç›´æŽ¥å»ºç«‹æ˜ å°„ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰äº†èŠ‚ç‚¹çš„é’©å­ã€‚ data-reactidä»ç„¶å­˜åœ¨äºŽæœåŠ¡ç«¯æ¸²æŸ“ä¸­ã€‚ä¸ç®¡æ€Žæ ·ï¼Œè¿™å·²ç»æ¯”ä»¥å‰è¦å°å¾ˆå¤šäº†ï¼Œå¹¶ä¸”è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„è‡ªå¢žè®¡æ•°å™¨ã€‚ ä¸å†æœ‰é¢å¤–çš„ &lt;span&gt;æ ‡ç­¾å¦ä¸€ä¸ªå…³äºŽDOMè®¨è®ºçš„é‡å¤§å˜åŒ–æ˜¯å¦‚ä½•æ¸²æŸ“æ–‡æœ¬å—ã€‚ä¹‹å‰ä½ å¯èƒ½å…³æ³¨åˆ°Reactæ¸²æŸ“äº†å¾ˆå¤šé¢å¤–çš„&lt;span&gt;æ ‡ç­¾ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åœ¨ä¸»é¡µæ¸²æŸ“&lt;div&gt;Hello {this.props.name}&lt;/div&gt;ï¼Œç»“æžœåŒ…å«äº†ä¸¤å±‚&lt;span&gt;æ ‡ç­¾ã€‚çŽ°åœ¨æˆ‘ä»¬æ¸²æŸ“æ—¶ä½¿ç”¨æ³¨é‡ŠèŠ‚ç‚¹ç©¿æ’åœ¨æ™®é€šæ–‡æœ¬å¤–æ¥åˆ’åˆ†ã€‚è¿™è®©æˆ‘ä»¬åŒæ ·æ‹¥æœ‰æ›´æ–°éƒ¨åˆ†æ–‡æœ¬çš„èƒ½åŠ›ï¼Œè€Œä¸ç”¨é¢å¤–çš„æ ‡ç­¾ã€‚å¾ˆå°‘äººä¼šè¿™äº›çœŸå®žçš„é¢å¤–æ ‡ç­¾æœ‰ä¾èµ–ï¼Œæ‰€ä»¥ä½ å¾ˆå¯ä»¥ä¸ä¼šå—åˆ°ä»»ä½•å½±å“ã€‚ä½†æ˜¯å¦‚æžœä½ åœ¨æ ·å¼æ–‡ä»¶ä¸­å¯¹&lt;span&gt;æ ‡ç­¾æœ‰å®šä¹‰ï¼Œä½ å¯èƒ½éœ€è¦ä½œå‡ºç›¸åº”çš„è°ƒæ•´ã€‚ä½ ä»ç„¶å¯ä»¥åœ¨ä½ çš„ç»„ä»¶é‡Œæ˜¾å¼åœ°æŒ‡å®šæ¸²æŸ“è¿™äº›æ ‡ç­¾ã€‚ çŽ°åœ¨ä½¿ç”¨æ³¨é‡ŠèŠ‚ç‚¹æ¸²æŸ“ nullæˆ‘ä»¬è¿˜åˆ©ç”¨æ³¨é‡ŠèŠ‚ç‚¹æ¥æ¸²æŸ“nullã€‚æ¸²æŸ“nullæ˜¯æˆ‘ä»¬åœ¨React v0.11ç‰ˆæœ¬æ·»åŠ çš„ç‰¹æ€§ï¼Œå¹¶ä¸”é€šæ¥æ¸²æŸ“ &lt;noscript&gt;å…ƒç´ æ¥åº”ç”¨ã€‚çŽ°åœ¨é€šè¿‡æ¸²æŸ“æ³¨é‡ŠèŠ‚ç‚¹ï¼Œä½ çš„æ ·å¼å¯èƒ½ä¼šæœ‰ä¸€äº›é”™ä¹±ï¼Œå°¤å…¶æ˜¯å½“ä½ ä½¿ç”¨äº†:nth-childè¿™æ ·çš„é€‰æ‹©å™¨ã€‚Reactä½¿ç”¨&lt;noscript&gt;æ ‡ç­¾ï¼Œä¸€ç›´åœ¨è€ƒè™‘å¦‚ä½•Reactå‘½ä¸­DOMçš„å®žçŽ°ç»†èŠ‚ã€‚æˆ‘ä»¬ç›¸ä¿¡è¿™äº›å˜åŒ–æ˜¯å®‰å…¨çš„ã€‚å¦å¤–ï¼Œæˆ‘ä»¬å·²ç»åœ¨è®¸å¤šå…¸åž‹çš„åº”ç”¨ä¸­çœ‹åˆ°è¿™äº›å˜åŒ–åœ¨æå‡Reactçš„æ€§èƒ½ã€‚ ç»„ä»¶çŽ°åœ¨ä¹Ÿå¯ä»¥è¿”å›ž nullæˆ‘ä»¬åœ¨React v0.14æ·»åŠ äº†å®šä¹‰æ— çŠ¶æ€ç»„ä»¶çš„åŠŸèƒ½ã€‚ä¸ç®¡æ€Žæ ·ï¼ŒReact 0.14ä»ç„¶å…è®¸ä½ å®šä¹‰ä¸€ä¸ªéžç»§æ‰¿React.Componentæˆ–è€…ä½¿ç”¨ React.createClass()åˆ›å»ºçš„ç»„ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å‡†ç¡®åœ°åˆ¤æ–­ä½ çš„ç»„ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°è¿˜æ˜¯ä¸€ä¸ªç±»ï¼Œå¹¶ä¸”ä¹Ÿä¸å…è®¸ä½ ä»Žä¸­è¿”å›žä¸€ä¸ªnullã€‚è¿™ä¸ªé—®é¢˜åœ¨React 15ä¸­å·²ç»è§£å†³ï¼Œä½ å¯ä»¥åœ¨ä½ ä»»ä½•ç»„ä»¶ä¸­è¿”å›žnullï¼Œä¸ç®¡æ˜¯å‡½æ•°è¿˜æ˜¯ç±»ã€‚ å¢žåŠ SVGæ”¯æŒæ‰€æœ‰çš„SVGæ ‡ç­¾çŽ°åœ¨éƒ½å·²å®Œç¾Žæ”¯æŒã€‚ï¼ˆæžå°‘çš„æ ‡ç­¾åœ¨React.DOMé‡Œä¸å­˜åœ¨ï¼Œä½†JSXå’ŒReact.createElementæ”¯æŒæ‰€æœ‰æ ‡ç­¾åï¼‰ã€‚æ‰€æœ‰è¢«æµè§ˆå™¨æ”¯æŒçš„SVGå±žæ€§ä¹Ÿå…¨éƒ¨æ”¯æŒã€‚å¦‚æžœä½ å‘çŽ°å°‘äº†ä»€ä¹ˆå±žæ€§ï¼Œè¯·ç»™æˆ‘ä»¬æ issueã€‚ æœ¬æ–‡ç¿»è¯‘è‡ª React v15.0]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[react-routeråŠ¨æ€è·¯ç”±ä¸ŽWebpackåˆ†ç‰‡thunks]]></title>
    <url>%2F2016%2F04%2F18%2Freact-router%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E4%B8%8EWebpack%E5%88%86%E7%89%87thunks%2F</url>
    <content type="text"><![CDATA[å¯¹äºŽå¤§åž‹åº”ç”¨æ¥è¯´ï¼Œä¸€ä¸ªé¦–å½“å…¶å†²çš„é—®é¢˜å°±æ˜¯æ‰€éœ€åŠ è½½çš„ JavaScript çš„å¤§å°ã€‚ç¨‹åºåº”å½“åªåŠ è½½å½“å‰æ¸²æŸ“é¡µæ‰€éœ€çš„ JavaScriptã€‚æœ‰äº›å¼€å‘è€…å°†è¿™ç§æ–¹å¼ç§°ä¹‹ä¸ºâ€œä»£ç åˆ†æ‹†â€ â€” å°†æ‰€æœ‰çš„ä»£ç åˆ†æ‹†æˆå¤šä¸ªå°åŒ…ï¼Œåœ¨ç”¨æˆ·æµè§ˆè¿‡ç¨‹ä¸­æŒ‰éœ€åŠ è½½ã€‚ å¯¹äºŽåº•å±‚ç»†èŠ‚çš„ä¿®æ”¹ä¸åº”è¯¥éœ€è¦å®ƒä¸Šé¢æ¯ä¸€å±‚çº§éƒ½è¿›è¡Œä¿®æ”¹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸ºä¸€ä¸ªç…§ç‰‡æµè§ˆé¡µæ·»åŠ ä¸€ä¸ªè·¯å¾„ä¸åº”è¯¥å½±å“åˆ°é¦–é¡µåŠ è½½çš„ JavaScript çš„å¤§å°ã€‚ä¹Ÿä¸èƒ½å› ä¸ºå¤šä¸ªå›¢é˜Ÿå…±ç”¨ä¸€ä¸ªå¤§åž‹çš„è·¯ç”±é…ç½®æ–‡ä»¶è€Œé€ æˆåˆå¹¶æ—¶çš„å†²çªã€‚ è·¯ç”±æ˜¯ä¸ªéžå¸¸é€‚äºŽåšä»£ç åˆ†æ‹†çš„åœ°æ–¹ï¼šå®ƒçš„è´£ä»»å°±æ˜¯é…ç½®å¥½æ¯ä¸ª viewã€‚ å¦‚æžœä½ ä½¿ç”¨è¿‡å•é¡µåº”ç”¨çš„æ¡†æž¶ï¼Œé‚£ä½ å¯èƒ½åº”ç”¨è¿‡è·¯ç”±ã€‚è·¯ç”±å¯ä»¥è®©ä½ çš„åº”ç”¨çœ‹èµ·æ¥å¥½åƒæœ‰å¾ˆå¤šâ€œé¡µé¢â€ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ youdomain.com/aboutæ¥èŽ·å–å…¬å¸ç›¸å…³çš„ä»‹ç»ä¿¡æ¯ã€‚ åœ¨è¿™é‡Œä½¿ç”¨åŒå¼•å·ï¼Œæ˜¯å› ä¸ºè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„â€œé¡µé¢â€ã€‚ é€šè¿‡å„ç§æµè¡Œçš„æž„å»ºå·¥å…·çš„é…ç½®ï¼Œæ‰€æœ‰çš„è„šæœ¬æœ€åŽéƒ½å¾—åˆ°è¿žæˆä¸€ç‰‡å·¨å¤§çš„.jsæ–‡ä»¶ã€‚å½“ä½ è®¿é—® youdomain.com/about è¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œä½ ä¼šä¸‹è½½åº”ç”¨ç¨‹åºçš„æ‰€æœ‰å†…å®¹ã€‚ä½†ç”¨æˆ·å¯èƒ½æ ¹æœ¬ä¸æƒ³ï¼Œä¹Ÿä¸ä¼šåŽ»æµè§ˆè¿™äº›å†…å®¹ã€‚è¿™æ˜¯éžå¸¸ç³Ÿç³•çš„ï¼Œä¹Ÿä¼šè®©ä½ çš„åº”ç”¨å˜å¾—è¶Šæ¥è¶Šå¤§ã€‚ å¯¹äºŽä¸€ä¸ªä¸ä½¿ç”¨ä»»ä½•æ¡†æž¶çš„æ™®é€šç½‘é¡µï¼Œä½ é¦–å…ˆæ˜¯ä¸‹è½½ä¸€ä¸ª .html æ–‡ä»¶ï¼Œç„¶åŽæ˜¯ä»Žç¼“å­˜ä¸­èŽ·å–è„šæœ¬å’Œæ ·å¼æ–‡ä»¶ã€‚ç”¨æˆ·åªä¸‹è½½ä»–éœ€è¦çš„å†…å®¹ï¼Œä»…æ­¤è€Œå·²ã€‚ ä½ æƒ³è®©ä½ çš„React.jsåº”ç”¨ä¹ŸæŒ‰éœ€åŠ è½½å—ï¼Ÿ å‰ææ¡ä»¶ ä½¿ç”¨ react-router åšä¸ºè·¯ç”±è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºè¿™æ˜¯åŠŸèƒ½æœ€å¼ºå¤§çš„ Reactè·¯ç”±æ–¹æ¡ˆï¼› Webpackä½œä¸ºæž„å»ºå·¥å…·ï¼Œå› ä¸ºå®ƒæœ‰å¼ºå¤§çš„åˆ†ç‰‡èƒ½åŠ›å’Œé½å…¨çš„åŠŸèƒ½ react-routerä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸è§çš„è·¯ç”±ä¾‹å­ï¼š 123456789var HomePage = require('./HomePage.jsx');var AboutPage = require('./AboutPage.jsx');var FAQPage = require('./FAQPage.jsx');&lt;Router history=&#123;history&#125;&gt; &lt;Route path="/" component=&#123;HomePage&#125; /&gt; &lt;Route path="/about" component=&#123;AboutPage&#125; /&gt; &lt;Route path="/faq" component=&#123;FAQPage&#125; /&gt;&lt;/Router&gt; ä¸ºäº†æ–¹ä¾¿è§£é‡Šï¼Œçœç•¥äº†å¾ˆå¤šä»£ç  å¦‚æžœä¸€ä¸ªç”¨æˆ·æµè§ˆ yourdomain.com/abouté¡µé¢ï¼Œä»–å°†çœ‹åˆ°AboutPage ç»„ä»¶ï¼›å¦‚æžœæŸ¥çœ‹ yourdomain.com/faqé¡µé¢ï¼Œå°†çœ‹åˆ° FAQPageç»„ä»¶ç­‰ç­‰ã€‚å½“ä½ ä½¿ç”¨è·¯ç”±åŽ»é…ç½®ä½ çš„åº”ç”¨ï¼Œè¿™äº›ç»„ä»¶å’Œç›¸å…³ä»£ç å°†è¢«æ‰“åŒ…æˆä¸€ä¸ª.jsæ–‡ä»¶ã€‚ å€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œreact-routerçš„ &lt;Route&gt;æ ‡ç­¾æœ‰ä¸€ä¸ªå«åšgetComponentçš„å¼‚æ­¥çš„æ–¹æ³•åŽ»èŽ·å–ç»„ä»¶ã€‚ä»–æ˜¯ä¸€ä¸ªfunctionæŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯locationå’Œcallbackã€‚å½“react-routeræ‰§è¡Œå›žè°ƒå‡½æ•° callback(null, ourComponent)æ—¶ï¼Œè·¯ç”±åªæ¸²æŸ“ourComponentç»„ä»¶ã€‚ getComponentè®©æˆ‘ä»¬æ¥é‡å†™ä¸Šé¢çš„ä¾‹å­æ¥æ”¯æŒå¼‚æ­¥ç»„ä»¶ï¼š 1234567891011121314151617181920212223&lt;Router history=&#123;history&#125;&gt; &lt;Route path="/" getComponent=&#123;(location, callback) =&gt; &#123; // åœ¨è¿™é‡Œæ‰§è¡Œå¼‚æ­¥æ“ä½œ callback(null, HomePage); &#125;&#125; /&gt; &lt;Route path="/about" getComponent=&#123;(location, callback) =&gt; &#123; // åœ¨è¿™é‡Œæ‰§è¡Œå¼‚æ­¥æ“ä½œ callback(null, AboutPage); &#125;&#125; /&gt; &lt;Route path="/faq" getComponent=&#123;(location, callback) =&gt; &#123; // åœ¨è¿™é‡Œæ‰§è¡Œå¼‚æ­¥æ“ä½œ callback(null, FAQPage); &#125;&#125; /&gt;&lt;/Router&gt; è¿™äº›ç»„ä»¶ä¼šåœ¨éœ€è¦çš„æ—¶å€™å¼‚æ­¥åŠ è½½ã€‚è¿™äº›ç»„ä»¶ä»ç„¶ä¼šåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”ä½ çš„åº”ç”¨çœ‹èµ·æ¥ä¸ä¼šæœ‰ä»»ä½•ä¸åŒã€‚ä½†æ˜¯æ²¡æœ‰å®ƒï¼Œæˆ‘ä»¬çš„ç½‘é¡µå°†æ— æ³•è¿è¡Œã€‚ WebpackWebpack æœ‰ä¸€ä¸ªç‰¹æ€§å«åš chunkingï¼ˆåˆ†ç‰‡ï¼‰ï¼Œæ„æ€å°±æ˜¯é€šè¿‡è¾“å‡ºå¤šä¸ªæ–‡ä»¶ï¼ˆchunksï¼‰æ¥æ›¿ä»£ä¸€ä¸ªæ€»çš„å¤§çš„æ–‡ä»¶ã€‚ä½ ä»£ç é‡Œçš„åˆ†å‰²ç‚¹ï¼ˆsplit pointsï¼‰å†³å®šäº†å“ªäº›æ¨¡å—è¢«åˆ†åˆ°å“ªäº›æ–‡ä»¶é‡Œã€‚ Split Points(åˆ†å—ç‚¹)Webpack æä¾›äº†å¾ˆå¤šæ–¹å¼åŽ»è®©æˆ‘ä»¬è®¾ç½®åˆ†å—ç‚¹ã€‚ä½†æœ€æœ‰ç”¨çš„ä¸€ä¸ªå°±æ˜¯ require.ensureæ–¹æ³•ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š 12345function loadModule() &#123; require.ensure([], function(require) &#123; var module = require('module.js'); &#125;, "MyModule");&#125; module.js æ¨¡å—å°†é€šè¿‡Webpack è¾“å‡ºåœ¨ç¬¬äºŒä¸ªæ–‡ä»¶é‡Œï¼Œå¹¶ä¸”å½“æµè§ˆå™¨æ‰§è¡Œrequire.ensureçš„æ—¶å€™åŠ è½½ã€‚ï¼ˆå½“loadModuleè¢«è°ƒç”¨çš„æ—¶å€™å¹¶ä¸ä¼šåŠ è½½ï¼‰ require.ensureæ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æŒ‡å®šæ¨¡å—åç§°ã€‚å®ƒæ˜¯ä¸€ä¸ªå¯é€‰é¡¹ï¼Œå¦‚æžœä¸å¡«ï¼Œå°†ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª IDä½œä¸ºæ–‡ä»¶åã€‚ è¿™ç¦»æˆåŠŸè¿˜å·®ä¸€æ­¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é…ç½®Webpack.config.jsæ–‡ä»¶æ¥æ”¯æŒåˆ†ç‰‡thunks é…ç½®åœ¨Webpack é…ç½®æ–‡ä»¶ä¸­çš„ outputé€‰é¡¹è®¾ç½®chunkFilename: 123output: &#123; chunkFilename: '[name].chunk.js'&#125; ä½ ä¹Ÿå¯ä»¥è®¾ç½®[chunkhash]å’Œ[ID]å˜é‡ä½œä¸ºåˆ†å—çš„æ–‡ä»¶åã€‚å¦‚æžœæ²¡æœ‰æŒ‡å®š[name]å˜é‡ï¼Œå°†ä¼šä½¿ç”¨ ID ä½œä¸ºåˆ†å—æ–‡ä»¶åã€‚ è¿™å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æœ‰ä¸ªé—®é¢˜ã€‚é€šç”¨çš„ä¾èµ–é€šå¸¸éƒ½åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚å¦‚æžœåœ¨ä½ åº”ç”¨çš„æ¨¡å—ä¸­ä½¿ç”¨äº†Reactï¼ŒReactå°†åŒ…å«åœ¨æ¯ä¸€ä¸ªåˆ†ç‰‡æ–‡ä»¶thunksä¸­ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ CommonsChunkPluginæ’ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨ä½ çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  plugins é€‰é¡¹ï¼š 123plugins: [ new webpack.optimize.CommonsChunkPlugin('common.js')] æˆ‘å–œæ¬¢ä½¿ç”¨ common.js ä½œä¸ºæ–‡ä»¶åï¼Œå› ä¸ºè¿™æ ·å¾ˆç›´è§‚ï¼Œä½†å®ƒä¹Ÿå¯ä»¥ä»»æ„æŒ‡å®šã€‚ éžå¸¸å¥½ï¼Œä»£ç åˆ†å‰²å®Œæˆã€‚è®©æˆ‘ä»¬é…åˆreact-routerä¸€èµ·ä½¿ç”¨ã€‚ æ•´åˆè¿˜è®°å¾—æˆ‘ä»¬ä¸Šé¢æåˆ°çš„å¼‚æ­¥åŠ è½½ç»„ä»¶çš„è·¯ç”±å—ï¼Ÿä¸Šé¢é€šè¿‡ requireå¼•ç”¨ HomePageç»„ä»¶ã€‚è®©æˆ‘ä»¬é…åˆä½¿ç”¨ getComponent å’Œ require.ensure æ¥å®žçŽ°æŒ‰éœ€åŠ è½½ã€‚ 123456789&lt;Route path="/" getComponent=&#123;(location, callback) =&gt; &#123; require.ensure([], function (require) &#123; var HomePage = require('./HomePage.jsx'); callback(null, HomePage); &#125;, 'HomePage'); &#125;&#125;/&gt; æŠŠ requireæ”¾åœ¨ callbacké‡Œæ›´ç®€æ´ï¼š 12345678&lt;Route path="/" getComponent=&#123;(location, callback) =&gt; &#123; require.ensure([], function (require) &#123; callback(null, require('./HomePage.jsx')); &#125;, 'HomePage'); &#125;&#125;/&gt; å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526&lt;Router history=&#123;history&#125;&gt; &lt;Route path="/" getComponent=&#123;(location, callback) =&gt; &#123; require.ensure([], function (require) &#123; callback(null, require('./HomePage.jsx')); &#125;); &#125;&#125; /&gt; &lt;Route path="/about" getComponent=&#123;(location, callback) =&gt; &#123; require.ensure([], function (require) &#123; callback(null, require('./AboutPage.jsx')); &#125;); &#125;&#125; /&gt; &lt;Route path="/faq" getComponent=&#123;(location, callback) =&gt; &#123; require.ensure([], function (require) &#123; callback(null, require('./FAQPage.jsx')); &#125;); &#125;&#125; /&gt;&lt;/Router&gt; æœ¬æ–‡ç¿»è¯‘è‡ª http://blog.mxstbr.com/2016/01/react-apps-with-pages/ å‚è€ƒ http://react-guide.github.io/react-router-cn/docs/guides/advanced/DynamicRouting.html]]></content>
      <categories>
        <category>react</category>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>react</tag>
        <tag>Webpack</tag>
        <tag>react-router</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Nodeå…¨å±€å¯¹è±¡ï¼šglobalã€processå’ŒBuffer]]></title>
    <url>%2F2016%2F04%2F14%2FNode%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1%EF%BC%9Aglobal%E3%80%81process%E5%92%8CBuffer%2F</url>
    <content type="text"><![CDATA[globalå¯¹è±¡ï¼Œä¹Ÿæ˜¯Nodeçš„å…¨å±€å‘½åç©ºé—´ï¼› processå¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸€äº›å…³é”®åŠŸèƒ½ï¼Œä¾‹å¦‚å¯¹ä¸‰ç§æ ‡å‡†I/Oæµçš„å°è£…ï¼Œä»¥åŠå°†åŒæ­¥å‡½æ•°è½¬æ¢ä¸ºå¼‚æ­¥å›žè°ƒçš„åŠŸèƒ½ï¼› Bufferç±»ï¼Œå®ƒæä¾›äº†å­˜å‚¨å’Œæ“ä½œåŽŸå§‹æ•°æ®çš„åŠŸèƒ½ï¼ŒåŒæ ·å®ƒä¹Ÿæ˜¯å…¨å±€å¯è§çš„ globalglobalä¸Žæµè§ˆå™¨ä¸­çš„windowå¯¹è±¡æ˜¯ç›¸ä¼¼çš„ï¼Œå®ƒä»¬çš„å…³å¥ä¸åŒç‚¹æ˜¯ï¼š æµè§ˆå™¨ä¸­çš„windowå¯¹è±¡æ˜¯ä¸€ä¸ªçœŸæ­£å…¨å±€çš„å¯¹è±¡ã€‚å¦‚æžœåœ¨å®¢æˆ·ç«¯ JavaScriptä¸­å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå®ƒå°†èƒ½å¤Ÿè¢«Webé¡µé¢ä»¥åŠæ¯ä¸€ä¸ªç‹¬ç«‹çš„åº“è®¿é—®åˆ°ã€‚ è€ŒNodeæ¨¡å—ä¸­åˆ›å»ºä¸€ä¸ªé¡¶å±‚å˜é‡ï¼ˆå‡½æ•°ä¹‹å¤–çš„å˜é‡ï¼‰ï¼Œå®ƒä»…ä»…åœ¨è¯¥æ¨¡å—ä¸­æ˜¯å…¨å±€çš„ï¼Œè€Œåœ¨å…¶ä»–æ¨¡å—ä¸­æ˜¯ä¸å¯è§çš„ã€‚åªæœ‰é‚£äº›è¢«æ¨¡å—æ˜¾å¼å¯¼å‡ºçš„éƒ¨åˆ†æ‰èƒ½è¢«å¼•ç”¨è¯¥æ¨¡å—çš„åº”ç”¨ç¨‹åºæ‰€ä½¿ç”¨ã€‚ è¿™æ„å‘³ç€ï¼Œç”±äºŽä¸å°å¿ƒä½¿ç”¨äº†é‡å¤çš„å…¨å±€å˜é‡åç§°è€Œå¼•èµ·çš„æ•°æ®å†²çªé—®é¢˜å°†ä¼šå¤§å¤§å‡å°‘ã€‚ processæ¯ä¸ªNodeåº”ç”¨ç¨‹åºéƒ½æ˜¯ä¸€ä¸ªprocesså¯¹è±¡å®žä¾‹ï¼Œæ‰€ä»¥ï¼Œåº”ç”¨ç¨‹åºè‡ªç„¶èƒ½ç›´æŽ¥ä½¿ç”¨æŸäº›å†…å»ºäºŽ process å¯¹è±¡çš„åŠŸèƒ½ã€‚ process.execPath æ–¹æ³•å¯ä»¥è¿”å›žå½“å‰ Node åº”ç”¨ç¨‹åºçš„æ‰§è¡Œè·¯å¾„ process.version æä¾›äº† Node ç‰ˆæœ¬ä¿¡æ¯ process.platform æä¾›æœåŠ¡å™¨å¹³å°ä¿¡æ¯ process.memoryUsage æ–¹æ³•å¯ä»¥æŸ¥è¯¢å½“å‰Node åº”ç”¨ç¨‹åºçš„å†…å­˜ä½¿ç”¨é‡ process.nextTick æ–¹æ³• è¿™ä¸ªæ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªå›žè°ƒå‡½æ•°æŒ‚è½½åˆ°Nodeç¨‹åºçš„äº‹ä»¶å¾ªçŽ¯æœºåˆ¶ä¸­ï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªçŽ¯å‘ç”Ÿæ—¶è°ƒç”¨è¯¥å‡½æ•°ã€‚ ä¾‹ï¼š 12345function asynchFunction = function (data, cb) &#123; process.nextTick(function () &#123; cb(val) &#125;)&#125; è™½ç„¶ä½¿ç”¨ setTimout æ–¹æ³•å¹¶ä¼ å…¥ä¸€ä¸ª0æ¯«ç§’çš„å»¶è¿Ÿå¯ä»¥è¿‡åˆ°åŒæ ·çš„ç›®çš„ 123setTimout(function () &#123; cb(val)&#125;, 0) ä½†æ˜¯ï¼ŒsetTimoutå¹¶ä¸åƒ process.nextTické‚£æ ·é«˜æ•ˆï¼Œprocess.nextTickçš„è°ƒç”¨é€Ÿåº¦è¿œè¿œå¿«äºŽsetTimoutæ–¹æ³• é¦–å…ˆä½ éœ€è¦å°†è€—æ—¶çš„å¤„ç†è¿‡å’Œæ‰“æ•£å¹¶åˆ†è§£æˆå¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†åˆ†åˆ«é€šè¿‡ process.nextTickè°ƒç”¨ï¼Œæœ€ç»ˆä½¿å¾—åº”ç”¨ç¨‹åºå¯ä»¥å¯¹å…¶ä»–è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œè€Œæ— éœ€ç­‰å¾…è€—æ—¶è®¡ç®—è¿‡ç¨‹å®Œæˆã€‚ BufferBuffer æ˜¯ç”¨äºŽå¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„ä¸€ç§æ–¹å¼ã€‚ æµå¤„ç†å¾€å¾€é‡‡ç”¨çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œè€Œéžå­—ç¬¦ä¸² Buffer æ”¯æŒçš„ç¼–ç æ–¹å¼åŒ…æ‹¬ï¼š ascii ä¸ƒä½ ASCII utf8 å¤šå­—èŠ‚ç¼–ç çš„ Unicode å­—ç¬¦ usc2 ä¸¤å­—èŠ‚ï¼Œlittle endian æ–¹å¼ç¼–ç çš„ Unicode å­—ç¬¦ base64 Base64 ç¼–ç  hex æ¯ä¸ªå­—èŠ‚ç¼–ç ä¸ºä¸¤ä¸ªåå…­è¿›åˆ¶å­—ç¬¦]]></content>
      <categories>
        <category>Node</category>
      </categories>
      <tags>
        <tag>Node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Nodeä¸ŽREPL]]></title>
    <url>%2F2016%2F04%2F13%2F%E8%AE%B0node%E4%B8%8EREPL%2F</url>
    <content type="text"><![CDATA[å‰è¨€è¿™å‡ ä¸ªæœˆï¼ŒæœèŠ½å‰ç«¯å›¢é˜Ÿæžäº†Reactjs+Reduxé¡¹ç›®ï¼Œåœ¨å¾ˆå¤šæ—¶å€™ï¼Œæ¯”å¦‚éƒ¨ç½²ï¼Œéƒ½éœ€è¦ä½¿ç”¨Nodeï¼Œè‹¦äºŽæˆ‘çš„è‚¤æµ…ï¼ŒäºŽæ˜¯å†³å®šè¡¥ä¸€ä¸‹åŠŸè¯¾ã€‚æœ€è¿‘éƒ½ä¼šè®°å½•ä¸€äº› Nodeç›¸å…³çš„ç¬”è®°ã€‚ Node çš„ä¼˜åŠ¿ åº”ç”¨ç¨‹åºå¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å±•ï¼Œå› ä¸ºæ‰§è¡Œä¸€ä¸ªå•çº¿ç¨‹å¹¶ä¸ä¼šæœ‰éžå¸¸å¤§çš„å¼€é”€ æ— éœ€è¯‰æ±‚äºŽå¤šçº¿ç¨‹å¼€å‘ï¼Œå´è¾¾åˆ°äº†èŠ‚çº¦åˆèƒ½é«˜æ•ˆä½¿ç”¨èµ„æºçš„ç›®çš„ã€‚æ¢å¥è¯è¯´ï¼Œä½ ä¸å¿…åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„åº”ç”¨ç¨‹åºã€‚ å…¨å±€å˜é‡åœ¨ Node ä¸­æ˜¯éžå¸¸å±é™©çš„ï¼Œç‰¹åˆ«æ˜¯ä½ å¿˜è®° varå…³é”®å­—çš„æ—¶å€™ã€‚ REPLREPL(read-eval-print-loop) æ˜¯Nodeçš„ä¸€ä¸ªäº¤äº’å¼ç»„ä»¶ã€‚åœ¨ REPLçŽ¯å¢ƒä¸‹è¾“å…¥çš„ä»»ä½•å†…å®¹éƒ½ç”±åº•å±‚çš„ V8 Javascriptå¼•æ“Žè¿›è¡Œå¤„ç†ã€‚ ä¸€äº›æ“ä½œæŠ€å·§ _(ä¸‹åˆ’çº¿) å¯ä»¥è°ƒç”¨ä¸Šä¸€ä¸ªè¡¨è¾¾å¼ ä¸Šä¸‹é”®ä»ç„¶å¯ä»¥å¿«æ·è¾“å…¥åŽ†å²å‘½ä»¤, Tab é”®è‡ªåŠ¨è¡¥å…¨ å¯ä»¥ä½¿ç”¨é‡å¤çš„ .(ç‚¹) æ¥å¤„ç†å¤šè¡Œè¡¨è¾¾å¼ï¼Œå¦‚ï¼š 1234&gt;var test = function() &#123;...return val = x * y ...&#125;;undefined é€€å‡º REPLçŽ¯å¢ƒçš„æ–¹å¼æœ‰ï¼š Ctrl + Cä¸¤æ¬¡ Ctrl + D .exit REPL å‘½ä»¤ .break å¦‚æžœå¤šè¡Œè¾“å…¥å‘ç”Ÿæ··ä¹±ä¸çŸ¥é“å½“å‰ä½ç½®æ—¶ï¼Œä½¿ç”¨ .breakä¼šé‡æ–°å¼€å§‹ã€‚ä¸è¿‡ä¼šä¸¢å¤±ä¹‹å‰è¾“å…¥çš„å¤šè¡Œå†…å®¹ã€‚ .clear é‡ç½®è¯­å¢ƒå¹¶æ¸…ç©ºæ‰€æœ‰è¡¨è¾¾å¼ã€‚è¯¥å‘½ä»¤å¯ä»¥ä½¿ä½ é‡å¤´å†æ¥ã€‚ .exit é€€å‡º REPL .help æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„REPLå‘½ä»¤ã€‚ .save å°†å½“å‰REPLä¼šè¯ä¿å­˜è‡³æ–‡ä»¶ .load å°†æ–‡ä»¶åŠ è½½åˆ°å½“å‰ä¼šè¯ å®šåˆ¶ REPLé¦–å…ˆéœ€è¦å¼•å…¥ REPL æ¨¡å—ï¼š 1var repl = require('repl'); é€šè¿‡åœ¨replå¯¹è±¡ä¸Šè°ƒç”¨ startæ–¹æ³•åˆ›å»ºæ–°çš„ REPLï¼š 1repl.start([prompt], [stream], [eval], [useGlobal], [ignoreUndefinded]); æ‰€æœ‰å‚æ•°éƒ½å¯é€‰ã€‚ prompt Default is &gt; é»˜è®¤å€¼ä¸º &gt; stream é»˜è®¤å€¼ä¸ºprocess.stdin eval evalçš„é»˜è®¤å€¼æ˜¯ async useGlobal é»˜è®¤å€¼ä¸º false, æ–°å»ºä¸€ä¸ªè¯­å¢ƒè€Œä¸æ˜¯ä½¿ç”¨å…¨å±€å¯¹è±¡ã€‚ ignoreUndefinded é»˜è®¤å€¼ä¸º falseã€‚ ä¸è¦å¿½ç•¥undefinedçš„è¿”å›žå€¼ã€‚ æ‰€ä»¥è®©REPLåœ¨è¡¨è¾¾å¼æ— è¿”å›žå€¼æ—¶ä¸è¾“å‡ºundefinedå¯ä»¥è¿™æ ·å®žçŽ°ï¼š 123repl = require('repl');// è®¾ç½® `ignoreUndefinded` ä¸º `true` , å¯åŠ¨ `REPL`repl.start('&gt;', null, null, null, true);]]></content>
      <categories>
        <category>Node</category>
      </categories>
      <tags>
        <tag>Node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[postCSSå¸¸ç”¨æ’ä»¶]]></title>
    <url>%2F2016%2F04%2F10%2FpostCSS%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[PostCSSæ‹¥æœ‰éžå¸¸å¤šçš„æ’ä»¶ï¼Œè¯¸å¦‚è‡ªåŠ¨ä¸ºCSSæ·»åŠ æµè§ˆå™¨å‰ç¼€çš„æ’ä»¶autoprefixerã€å½“å‰ç§»åŠ¨ç«¯æœ€å¸¸ç”¨çš„pxè½¬remæ’ä»¶px2remï¼Œè¿˜æœ‰æ”¯æŒå°šæœªæˆä¸ºCSSæ ‡å‡†ä½†ç‰¹å®šå¯ç”¨çš„æ’ä»¶cssnextï¼Œè¿˜æœ‰å¾ˆå¤šå¾ˆå¤šã€‚å°±è¿žè‘—åçš„Bootstrapåœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬Bootstrap 5ä¹Ÿå°†ä½¿ç”¨PostCSSä½œä¸ºæ ·å¼çš„åŸºç¡€ã€‚ ä¸€å¥è¯æ¥æ¦‚æ‹¬PostCSSï¼šCSSç¼–è¯‘å™¨èƒ½å¤Ÿåšåˆ°çš„äº‹æƒ…ï¼Œå®ƒä¹Ÿå¯ä»¥åšåˆ°ï¼Œè€Œä¸”èƒ½å¤Ÿåšå¾—æ›´å¥½ PostCSSæ€§èƒ½åœ¨PostCSSå®˜æ–¹æŽ¨ç‰¹ä¸Šçœ‹åˆ°ï¼Œç”±JavaScriptç¼–å†™çš„PostCSSæ¯”C++ç¼–å†™çš„libsassè¿˜è¦å¿«3å€. å¦‚æžœä½ å¯¹ä¸Šé¢çš„æ€§èƒ½æˆªå›¾æœ‰ç–‘é—®ï¼Œå¯ä»¥äº²è‡ªæ¥è¿™é‡Œæµ‹è¯•çœ‹çœ‹ã€‚ å¸¸ç”¨çš„æ’ä»¶autoprefixeré¦–å…ˆæ˜¯æœ€ç«çš„å®˜æ–¹æ’ä»¶ autoprefixer ã€‚autoprefixer æ˜¯ä¸ºæˆ‘ä»¬çš„ css æ·»åŠ å‰ç¼€çš„æ’ä»¶ï¼Œå®ƒçš„æ•°æ®æ¥æºäºŽ Can I useã€‚ç›®çš„æ˜¯è®©æˆ‘ä»¬å†™çº¯ç²¹çš„ cssã€‚ä¾‹ï¼š 123a &#123; display: flex;&#125; ä¼šç¼–è¯‘æˆï¼š 123456a &#123; display: -webkit-box; display: -webkit-flex; display: -ms-flexbox; display: flex&#125; Optionsé€šè¿‡ autoprefixer(options) é…ç½®ï¼š 1var plugin = autoprefixer(&#123; browsers: ['&gt; 1%', 'IE 7'], cascade: false &#125;); browsers (array): æŒ‡å®šä½ éœ€è¦æ”¯æŒçš„æµè§ˆå™¨åˆ—è¡¨ã€‚å¯ä»¥ç›´æŽ¥æŒ‡å®šæµè§ˆå™¨ç‰ˆæœ¬ï¼ˆå¦‚ IE 7ï¼‰,ä¹Ÿå¯ä»¥ä½¿ç”¨é€‰é¡¹ï¼ˆå¦‚ï¼š last 2 version æˆ– &gt; 5%ï¼‰,å…·ä½“é€‰é¡¹å¯ä»¥æŸ¥çœ‹ Browserslist cascade (boolean): should Autoprefixer use Visual Cascade, if CSS is uncompressed. Default: true add (boolean): æ˜¯å¦æ·»åŠ æµè§ˆå™¨å…¼å®¹å‰ç¼€. é»˜è®¤å€¼æ˜¯true. remove (boolean): æ˜¯å¦åŽ»é™¤æ— ç”¨çš„æµè§ˆå™¨å…¼å®¹å‰ç¼€. é»˜è®¤å€¼æ˜¯true. supports (boolean): should Autoprefixer add prefixes for @supports parameters. Default is true. flexbox (boolean|string): should Autoprefixer add prefixes for flexbox properties. With â€œno-2009â€ value Autoprefixer will add prefixes only for final and IE versions of specification. Default is true. grid (boolean): should Autoprefixer add IE prefixes for Grid Layout properties. Default is true. stats (object): custom usage statistics for &gt; 10% in my stats browsers query. è°ƒè¯•info() æ–¹æ³•å¯ç”¨äºŽæŸ¥çœ‹è°ƒè¯•ä¿¡æ¯.å¯ä»¥åƒä¸‹é¢è¿™æ ·æŸ¥çœ‹å“ªäº›æµè§ˆå™¨è¢«é€‰ä¸­ä»¥åŠå“ªäº›å±žæ€§è¢«æ·»åŠ å…¼å®¹å‰ç¼€ï¼š 12var info = autoprefixer(&#123; browsers: ['last 1 version'] &#125;).info();console.log(info); postcss-safe-parserpostcss-safe-parser å¯ä»¥å¸®ä½ æŸ¥æ‰¾å¹¶ä¿®è¡¥CSSè¯­æ³•é”™è¯¯ã€‚ cssnanocssnano æ˜¯æ¨¡å—åŒ–çš„CSSåŽ‹ç¼©å™¨ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[postCSS-loaderé…ç½®,è®©csséšå¿ƒæ‰€æ¬²]]></title>
    <url>%2F2016%2F04%2F09%2FpostCSS-loader%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[ç»„ä»¶å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†å°±æ˜¯ cssï¼Œè¿™é‡Œçœ‹ä¸‹å…³äºŽ cssçš„ä¸€äº› loadersã€‚ PostCSSPostCSS å®˜ç½‘æ˜¯è¿™ä¹ˆä»‹ç»è‡ªå·±çš„ï¼š PostCSS is a tool for transforming styles with JS plugins. These plugins can lint your CSS, support variables and mixins, transpile future CSS syntax, inline images, and more. ä»–æ˜¯ä¸€æ¬¾é€šè¿‡ JS æ’ä»¶è½¬æ¢ styles æ ·å¼çš„å·¥å…·ã€‚ åœ¨ Webpack é‡Œé¢å¯ä»¥é€šè¿‡ postCSS-loader æ¥ä½¿ç”¨ PostCSSã€‚ ä½¿ç”¨é¦–å…ˆæ˜¯å®‰è£… postCSS-loader 1npm install postcss-loader --save-dev ä¸‹é¢æ˜¯ä¸€ä¸ª Webpack config çš„ä¾‹å­ï¼š 12345678910111213141516var precss = require('precss'); // å®žçŽ°ç±»Sassçš„åŠŸèƒ½ï¼Œå˜é‡ï¼ŒåµŒå¥—ï¼Œmixinsvar autoprefixer = require('autoprefixer'); // è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€module.exports = &#123; module: &#123; loaders: [ &#123; test: /\.css$/, loader: "style-loader!css-loader!postcss-loader" //åœ¨ä½¿ç”¨ css-loader,style-loaderä¹‹å‰å¤„ç† &#125; ] &#125;, postcss: function () &#123; // postcss æ’ä»¶ return [precss, autoprefixer]; &#125;&#125; ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨äº†ä¸¤ä¸ª postcss æ’ä»¶ï¼Œåº”è¯¥é¢„å…ˆå®‰è£…ï¼š 123&gt; npm install precss --save-dev&gt; npm install autoprefixer --save-dev&gt; åœ¨æ–‡ä»¶ä¸­å¼•å…¥çš„csså°†é€šè¿‡ PostCSS æ’ä»¶çš„å¤„ç†: 1234var css = require('./file.css');orimport './file.css'// =&gt; CSS after Autoprefixer and CSSWring æ’ä»¶ç»„å¦‚æžœä½ æƒ³å¯¹ä¸åŒç›®å½•æˆ–ç±»åž‹çš„ cssä½¿ç”¨ä¸åŒçš„ PostCSS æ’ä»¶é…ç½®è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨ ?pack=name å‚æ•° 1234567891011121314151617181920module.exports = &#123; module: &#123; loaders: [ &#123; test: /\.docs\.css$/, loader: "style-loader!css-loader!postcss-loader?pack=cleaner" // å¯¹docsç›®å½•ä¸‹çš„cssä½¿ç”¨ cleaner çš„é…ç½® &#125;, &#123; test: /\.css$/, loader: "style-loader!css-loader!postcss-loader" // å¯¹å…¶ä»–ç›®å½•ä¸‹çš„cssä½¿ç”¨ defaults çš„é…ç½® &#125; ] &#125;, postcss: function () &#123; return &#123; defaults: [precss, autoprefixer], cleaner: [autoprefixer(&#123; browsers: [] &#125;)] &#125;; &#125;&#125; å†™åœ¨ js ä¸­çš„æ ·å¼å¯ä»¥é€šè¿‡ postcss-js æ’ä»¶å¤„ç†å†™åœ¨ js ä¸­çš„æ ·å¼ 1234&#123; test: /\.style.js$/, loader: "style-loader!css-loader!postcss-loader?parser=postcss-js"&#125; ä¹Ÿå¯ä»¥é€šè¿‡ babel ç»“åˆ postcss-js å¤„ç† es6 è¯­æ³•ä¸­çš„æ ·å¼ 1234&#123; test: /\.style.js$/, loader: "style-loader!css-loader!postcss-loader?parser=postcss-js!babel"&#125; ä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·å†™æ ·å¼ 1234567891011import colors from '../config/colors';export default &#123; '.menu': &#123; color: colors.main, height: 25, '&amp;_link': &#123; color: 'white' &#125; &#125;&#125;]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>loaders</tag>
        <tag>Webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[babel-loaderé…ç½®]]></title>
    <url>%2F2016%2F04%2F08%2Fbabel-loader%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[å®‰è£…1npm install babel-loader babel-core babel-preset-es2015 --save-dev npm ä»Ž npm@3 ä¹‹åŽä¸èµžæˆè‡ªåŠ¨å®‰è£…peerDependenciesï¼Œæ‰€æœ‰å¿…é¡»åœ¨package.jsoné‡Œæ˜Žç¡®æŒ‡å®š babel-core è¿™æ ·çš„å®¿ä¸»ä¾èµ–ã€‚ peerDependencieså­—æ®µï¼Œä¸»è¦ç”¨æ¥ä¾›æ’ä»¶æŒ‡å®šå…¶æ‰€éœ€è¦çš„ä¸»è½¯ä»¶çš„ç‰ˆæœ¬ã€‚æ›´å¤šå¯ä»¥è§è¿™é‡Œ å¦‚æžœæ˜¯ä»Žbabel 5å‡çº§åˆ° babel 6ï¼Œå¯ä»¥çœ‹è¿™ä»½æŒ‡å¯¼ ä½¿ç”¨åœ¨webpack.config.jsé‡Œé…ç½®æ˜¯æ¯”è¾ƒæŽ¨èçš„æ–¹å¼ï¼š 123456789101112module: &#123; loaders: [ &#123; test: /\.jsx?$/, // åŒ¹é…'js' or 'jsx' åŽç¼€çš„æ–‡ä»¶ç±»åž‹ exclude: /(node_modules|bower_components)/, // æŽ’é™¤æŸäº›æ–‡ä»¶ loader: 'babel', // ä½¿ç”¨'babel-loader'ä¹Ÿæ˜¯ä¸€æ ·çš„ query: &#123; // å‚æ•° presets: ['es2015'] &#125; &#125; ]&#125; é€‰é¡¹é€‰é¡¹çš„å†™æ³•æœ‰ä¸¤ç§ ä¸€ç§æ˜¯æŸ¥è¯¢å­—ç¬¦ä¸²çš„æ–¹å¼ï¼š 123456789module: &#123; loaders: [ &#123; test: /\.jsx?$/, exclude: /(node_modules|bower_components)/, loader: 'babel?presets[]=es2015' &#125; ]&#125; å¦ä¸€ç§æ˜¯æŒ‡å®š queryå±žæ€§ 123456789101112module: &#123; loaders: [ &#123; test: /\.jsx?$/, exclude: /(node_modules|bower_components)/, loader: 'babel', query: &#123; presets: ['es2015'] &#125; &#125; ]&#125; babel-loader è¿˜æ”¯æŒä»¥ä¸‹é€‰é¡¹ï¼š cacheDirectory: é»˜è®¤å€¼æ˜¯ falseã€‚å¦‚æžœè®¾ç½®äº†è¿™ä¸ªå‚æ•°ï¼Œè¢«è½¬æ¢çš„ç»“æžœå°†ä¼šè¢«ç¼“å­˜èµ·æ¥ã€‚å½“Webpack å†æ¬¡ç¼–è¯‘æ—¶ï¼Œå°†ä¼šé¦–å…ˆå°è¯•ä»Žç¼“å­˜ä¸­è¯»å–è½¬æ¢ç»“æžœï¼Œä»¥æ­¤é¿å…èµ„æºæµªè´¹ã€‚å¦‚æžœè¯¥å€¼ä¸ºç©º(loader: â€˜babel-loader?cacheDirectoryâ€™)ï¼Œloaderä¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„ä¸´æ—¶æ–‡ä»¶ç›®å½•ã€‚ é—®é¢˜åŠä¼˜åŒ–æ€§èƒ½é—®é¢˜ ç¡®ä¿åªè½¬æ¢å°½å¯èƒ½å°‘çš„æ–‡ä»¶ï¼Œä½ å¯èƒ½åŒ¹é…äº†è¿‡å¤šçš„æ–‡ä»¶ç±»åž‹ï¼Œæˆ–è€…åŒ¹é…äº†æ‰€æœ‰çš„â€™.jsâ€™æ–‡ä»¶ï¼Œä½ éœ€è¦ä½¿ç”¨ exclude: /(node_modules|bower_components)/ æŽ’é™¤éƒ¨åˆ†ç›®å½• è®¾ç½® cacheDirectory å‚æ•°ä¹Ÿå¯ä»¥è®©ä½ çš„ loader æ€§èƒ½æå‡2å€ï¼ babel ç»™æ¯ä¸ªéœ€è¦çš„æ–‡ä»¶æ³¨å…¥helperæ‰©å±•æ‚¨å¯ä»¥æ”¹ä¸ºè¦æ±‚babelä½œä¸ºä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„æ¨¡å—ï¼Œä»¥é¿å…é‡å¤ã€‚ ä¸‹é¢çš„é…ç½®é€šè¿‡babel-plugin-transform-runtimeæ’ä»¶å¯ä»¥ç¦ç”¨babelå‘æ¯ä¸ªæ–‡ä»¶æ³¨å…¥helper éœ€è¦å…ˆå®‰è£…æ’ä»¶ npm install babel-plugin-transform-runtime --save 12345678910111213loaders: [ // the 'transform-runtime' plugin tells babel to require the runtime // instead of inlining it. &#123; test: /\.jsx?$/, exclude: /(node_modules|bower_components)/, loader: 'babel', query: &#123; presets: ['es2015'], plugins: ['transform-runtime'] &#125; &#125;]]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>loader</tag>
        <tag>babel-loader</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Webpack-config]]></title>
    <url>%2F2016%2F04%2F07%2FWebpack-config%2F</url>
    <content type="text"><![CDATA[ä¸å¾—ä¸è¯´ï¼ŒWebpack é…ç½®ç¡®å®žçƒ¦çäº†ä¸€äº›ï¼Œå¾ˆå¤šäººéƒ½ä½¿ç”¨gulpçš„æ’ä»¶gulp-webpackæ¥åšå…¶ä»–äº‹æƒ…ã€‚ é…ç½®WebpackWebpackçš„æž„å»ºè¿‡ç¨‹éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¸€ä¸ªå…¸åž‹çš„é…ç½®æ–‡ä»¶webpack.config.jså¤§æ¦‚å°±æ˜¯è¿™æ · 12345var webpack = require('webpack');module.exports = &#123; // é…ç½®é¡¹&#125;; åŸºæœ¬é…ç½®é¡¹entry123456module.exports = &#123; entry:'./example1.1', output:&#123; filename:'bundle1.1.js' &#125;&#125;; æˆ‘ä»¬ä¹Ÿä¼šç¢°åˆ°æ”¯æŒå¤šä¸ªå…¥å£æ–‡ä»¶ï¼ˆentryï¼‰çš„æƒ…å†µï¼Œæ¯ä¸€ä¸ªå…¥å£éƒ½éœ€è¦æœ‰è‡ªå·±çš„åå­—ï¼Œå…·ä½“å¯¹åº”entryçš„å†™æ³•è€Œè¨€ï¼Œæœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µï¼š 12345678entry:'./example2.1'// æˆ–è€…entry:['./example2.1','./example2.2']//æˆ–è€…entry:&#123; 'example2.1':'example2.1.js', 'example2.2':'example2.2.js'&#125; ç¬¬ä¸‰ç§æ˜¯æ¯”è¾ƒæŽ¨èçš„å†™æ³•ï¼Œè¿™ç§å†™æ³•ä¸­ï¼Œåå­—å’Œæ¨¡å—æ–‡ä»¶åä¸€ä¸€å¯¹åº”ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰ç‹¬ç«‹çš„åå­—ã€‚ä¹Ÿå°±æ˜¯output.filenameä¸­çš„[name] outputoutput.filenameoutput.filenameé™¤äº†å¯ä»¥æŒ‡å®šå…·ä½“çš„æ–‡ä»¶åä»¥å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›å ä½ç¬¦ï¼ŒåŒ…æ‹¬ï¼š name æ¨¡å—åç§° hash æ¨¡å—ç¼–è¯‘åŽçš„ï¼ˆæ•´ä½“ï¼‰Hashå€¼ chunkhash åˆ†ç‰‡çš„Hashå€¼ [name] åœ¨ä¸Šé¢çš„entryä¸­ï¼Œå‰ä¸¤ç§å†™æ³•ï¼Œæ¨¡å—æ˜¯æ²¡æœ‰åå­—çš„ï¼Œwebpackä¼šä½¿ç”¨mainä½œä¸ºæ¨¡å—åå­—ï¼Œå› æ­¤ç”¨æ•°ç»„æ¥æŒ‡å®šå…¥å£çš„æƒ…å†µï¼Œæ¨¡å—åä¼šé‡å¤ï¼Œè€Œæ­¤æ—¶webpackä¼šå°†å®ƒä»¬çš„ä»£ç åˆå¹¶æ‰“åŒ…ï¼è€Œç¬¬ä¸‰ç§å†™æ³•ï¼Œè¿™é‡Œçš„[name]å¯ä»¥ç†è§£æˆæ¨¡å—åå­—ã€‚ [hash]ä¸Ž[chunkhash] äº‹å®žä¸Šï¼Œåœ¨webpackçš„æ–‡æ¡£ä¸­ï¼Œè¿™ä¸ªnameæ˜¯æŒ‡â€œchunk nameâ€ï¼Œå³åˆ†ç‰‡çš„åå­—ï¼Œè¿™é‡Œéœ€è¦å…ˆå‰§é€ä¸€ä¸‹åŽé¢è¦è¯´çš„â€œåˆ†ç‰‡â€çš„æ¦‚å¿µã€‚æ‰€è°“åˆ†ç‰‡å°±æ˜¯æŒ‡ä¸€ä¸ªå…¥å£æ¨¡å—çš„ä»£ç æœ‰å¯èƒ½ä¼šè¢«åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€äº›æ–‡ä»¶å¯èƒ½æ˜¯æ¥è‡ªæ¨¡å—çš„å…¬å…±ä»£ç ï¼Œè€Œä¸æ˜¯å…¥å£æ¨¡å—ã€‚å› æ­¤è¿™é‡Œçš„[name]å¹¶éžä¸¥æ ¼ä¸Žå…¥å£æ¨¡å—ä¸€ä¸€å¯¹åº”ã€‚ äº†è§£äº†è¿™äº›æƒ…å†µä¹‹åŽï¼Œ[hash]å’Œ[chunkhash]å°±è‡ªç„¶å¥½ç†è§£äº†ï¼Œä¸€ä¸ªæ˜¯æŒ‡æœ¬æ¬¡æ‰“åŒ…ç›¸å…³çš„æ•´ä½“çš„hashï¼Œä¸€ä¸ªæ˜¯æŒ‡åˆ†ç‰‡çš„hashã€‚ 1234567891011module.exports = &#123; entry:&#123; 'example3.1':'./example3.1', 'example3.2':'./example3.2' &#125;, output:&#123; //è¿™é‡Œåˆ†åˆ«ç”¨hashå’Œchunkhashï¼Œç»“æžœä¸ä¸€æ · filename:'[name]-[hash].js' //filename:'[name]-[chunkhash].js' &#125;&#125;; output.pathoutput.pathæ¥æŒ‡å®šè¾“å‡ºè·¯å¾„ output.pathä¹Ÿå¯ä»¥ä½¿ç”¨å ä½ç¬¦ã€‚ å¦‚æžœæƒ³ä¿æŒæ‰“åŒ…å‰æºæ–‡ä»¶çš„ç›®å½•ç»“æž„ï¼Œéœ€è¦æŠŠç›®å½•å†™åˆ°æ¨¡å—åä¸Šï¼Œå¦‚ï¼š 12345678entry:&#123; 'example4.1':'./src/example4.1', 'hello/example4.2':'./src/hello/example4.2'&#125;,output:&#123; filename:'[name].js', path:'./dist'&#125; æ³¨æ„è¿™é‡Œçš„filenameä¸€å®šè¦åŒ…å«[name]æ‰è¡Œï¼Œå› ä¸ºè·¯å¾„ä¿¡æ¯æ˜¯å¸¦åœ¨æ¨¡å—åä¸Šçš„ã€‚ CommonChunksæ’ä»¶Common Chunks æ’ä»¶çš„ä½œç”¨å°±æ˜¯æå–ä»£ç ä¸­çš„å…¬å…±æ¨¡å—ï¼Œç„¶åŽå°†å…¬å…±æ¨¡å—æ‰“åŒ…åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ä¸­åŽ»ï¼Œä»¥ä¾¿åœ¨å…¶å®ƒçš„å…¥å£å’Œæ¨¡å—ä¸­ä½¿ç”¨ã€‚ 1234567891011121314var webpack = require('webpack');module.exports = &#123; entry:&#123; main1:'./main', main2:'./main.2' &#125;, output:&#123; filename:'bundle.[name].js' &#125;, plugins: [ new webpack.optimize.CommonsChunkPlugin('common.js', ['main1', 'main2']) ]&#125;; å‚æ•°common.jsè¡¨ç¤ºå…¬å…±æ¨¡å—çš„æ–‡ä»¶åï¼ŒåŽé¢çš„æ•°ç»„å…ƒç´ ä¸Žentryä¸€ä¸€å¯¹åº”ï¼Œè¡¨ç¤ºè¦æå–è¿™äº›æ¨¡å—ä¸­çš„å…¬å…±æ¨¡å—ã€‚ ä½†æ˜¯ï¼Œè¦è®°å¾—åœ¨HTMLä¸­åŠ å…¥å…¬å…±éƒ¨åˆ†common.js 12&lt;script src="./common.js"&gt;&lt;/script&gt;&lt;script src="./bundle.main1.js"&gt;&lt;/script&gt; ä½†æ¨¡å—åŒ–ä¸åº”è¯¥æœ‰å¤šä¸ªå…¥å£æ–‡ä»¶ï¼Œå…¥å£æ–‡ä»¶ä¸åº”æ—¶æ—¶æ”¹å˜ï¼Œåº”åœ¨å†…éƒ¨å¤„ç† ä½¿ç”¨loaderloaderæ˜¯webpackä¸­ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå®ƒæ˜¯æŒ‡ç”¨æ¥å°†ä¸€æ®µä»£ç è½¬æ¢æˆå¦ä¸€æ®µä»£ç çš„webpackæ’ä»¶ è™½ç„¶æœ¬è´¨ä¸Šè¯´ï¼Œloaderä¹Ÿæ˜¯æ’ä»¶ï¼Œä½†å› ä¸ºwebpackçš„ä½“ç³»ä¸­è¿˜æœ‰ä¸€ä¸ªä¸“é—¨çš„åè¯å°±å«æ’ä»¶ï¼ˆplguinï¼‰ï¼Œä¸ºé¿å…æ··æ·†ï¼ŒåŽé¢ä¸å†å°†loaderä¸Žæ’ä»¶æ··æ·†è¯´ï¼ŒåŽæ–‡ä¸­è¿™å°†æ˜¯ä¸¤ä¸ªç›¸äº’ç‹¬ç«‹çš„æ¦‚å¿µã€‚ loaderçš„ä½¿ç”¨æœ‰ä¸‰ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼š åœ¨requireä¸­æ˜¾å¼æŒ‡å®š åœ¨é…ç½®é¡¹ï¼ˆwebpack.config.jsï¼‰ä¸­æŒ‡å®š åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®š ç¬¬äºŒç§ï¼Œåœ¨é…ç½®é¡¹ä¸­æŒ‡å®šæ˜¯æœ€çµæ´»çš„æ–¹å¼ï¼Œå®ƒçš„æŒ‡å®šæ–¹å¼æ˜¯è¿™æ ·ï¼š 12345678910111213141516171819202122module: &#123; // loadersæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½ç”¨æ¥æŒ‡å®šloader loaders: [&#123; test: /\.jade$/, //testå€¼ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œå½“æ–‡ä»¶è·¯å¾„åŒ¹é…æ—¶å¯ç”¨ loader: 'jade', //æŒ‡å®šä½¿ç”¨ä»€ä¹ˆloaderï¼Œå¯ä»¥ç”¨å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ç”¨æ•°ç»„ exclude: /node_modules/, //å¯ä»¥ä½¿ç”¨excludeæ¥æŽ’é™¤ä¸€éƒ¨åˆ†æ–‡ä»¶ // exclude: /regexp/ include: 'dist', // ç”¨æ¥æŒ‡å®šåŒ…å«çš„æ–‡ä»¶ //å¯ä»¥ä½¿ç”¨queryæ¥æŒ‡å®šå‚æ•°ï¼Œä¹Ÿå¯ä»¥åœ¨loaderä¸­ç”¨å’Œrequireä¸€æ ·çš„ç”¨æ³•æŒ‡å®šå‚æ•°ï¼Œå¦‚`jade?p1=1` query: &#123; p1:'1' &#125; &#125;, &#123; test: /\.css$/, loader: 'style!css' //loaderå¯ä»¥å’Œrequireç”¨æ³•ä¸€æ ·ä¸²è” &#125;, &#123; test: /\.css$/, loaders: ['style', 'css'] //ä¹Ÿå¯ä»¥ç”¨æ•°ç»„æŒ‡å®šloader &#125;]&#125; ä¸²è”loaderæ˜¯å¯ä»¥ä¸²è”ä½¿ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªæ–‡ä»¶å¯ä»¥å…ˆç»è¿‡A-loaderå†ç»è¿‡B-loaderæœ€åŽå†ç»è¿‡C-loaderå¤„ç†ã€‚ 1require('style!css!./style.css'); å‚æ•°loaderè¿˜å¯ä»¥æŽ¥å—å‚æ•°ï¼Œä¸åŒçš„å‚æ•°å¯ä»¥è®©loaderæœ‰ä¸åŒçš„è¡Œä¸ºï¼ˆå‰ææ˜¯loaderç¡®å®žæ”¯æŒä¸åŒçš„è¡Œä¸ºï¼‰ï¼Œå…·ä½“æ¯ä¸ªloaderæ”¯æŒä»€ä¹ˆæ ·çš„å‚æ•°å¯ä»¥å‚è€ƒloaderçš„æ–‡æ¡£ã€‚ å‚æ•°çš„æŒ‡å®šæ–¹å¼å’Œurlå¾ˆåƒï¼Œè¦é€šè¿‡?æ¥æŒ‡å®šï¼Œä¾‹å¦‚æŒ‡å®šliterateå‚æ•°éœ€è¦è¿™æ ·å†™ï¼š 1require('coffee?literate=1!./a.coffee'); å…·ä½“çš„å¯ä»¥å¯¹ç…§å®˜æ–¹çš„loaderåˆ—è¡¨ä¸€ä¸€æŸ¥çœ‹ã€‚]]></content>
      <categories>
        <category>webpack</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é‡‡ç”¨éžç›´è¿›å¼åˆå¹¶ï¼ˆgit-merge-no-ffï¼‰]]></title>
    <url>%2F2016%2F04%2F02%2F%E9%87%87%E7%94%A8%E9%9D%9E%E7%9B%B4%E8%BF%9B%E5%BC%8F%E5%90%88%E5%B9%B6%EF%BC%88git-merge-no-ff%EF%BC%89%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨Gitå½“åˆå¹¶ä¸€ä¸ªåˆ†æ”¯æ˜¯ä¸€ä¸ªç›¸å½“å¸¸è§çš„æ“ä½œã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒGitä¼šé»˜è®¤å°†å°è¯•åœ¨å¿«è¿›æ¨¡å¼åˆå¹¶ä¸€ä¸ªåˆ†æ”¯ã€‚å¦‚æžœä¸ä½¿ç”¨å¿«è¿›åˆå¹¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ å‡è®¾æˆ‘ä»Žmasteråˆ›å»ºä¸€ä¸ªåä¸ºspeedupåˆ†æ”¯ã€‚åœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šå·¥ä½œä¸€æ®µæ—¶é—´ï¼ˆä¸‰ä¸ªæäº¤ï¼Œé‚£äº›ç™½è‰²çš„åœ†åœˆï¼‰åŽï¼Œå½“æˆ‘å®Œæˆå·¥ä½œæ—¶ï¼Œæˆ‘æŠŠå®ƒgit pushæŽ¨åˆ°æˆ‘è‡ªå·±çš„è¿œç¨‹åˆ†æ”¯ã€‚åŒæ—¶ï¼Œä¸»åˆ†æ”¯masterä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿï¼Œä½†ä»å¤„äºŽç›¸åŒçš„çŠ¶æ€ä¹‹å‰ï¼Œæˆ‘åˆ†å‡ºã€‚è¿™ç§æƒ…å†µåœ¨ä¸‹é¢çš„å›¾ä¸­æè¿°ã€‚ ä¸€æ—¦è¯¥é¡¹ç›®çš„ç»´æŠ¤è€…å¾—åˆ°é€šçŸ¥ï¼Œæˆ‘çš„åˆ†æ”¯å·²ç»å‡†å¤‡å¥½åˆå¹¶è¿›masterï¼Œå¥¹å¯èƒ½ä½¿ç”¨gitçš„å¸¸è§„æ­¥éª¤git fetchæ“ä½œåŽæ‰§è¡Œgit mergeæ¥åˆå¹¶ã€‚å› ä¸ºä¸»åˆ†æ”¯å¹¶æ²¡æœ‰æ–°çš„æäº¤ï¼ˆç°è‰²åœ†åœˆï¼‰ï¼ŒGitä¼šç”¨å¿«è¿›æ‰§è¡Œåˆå¹¶ã€‚æ•´ä¸ªç³»åˆ—çš„æäº¤å°†æ˜¯çº¿æ€§çš„ã€‚åŽ†å²ä¼šåƒä¸‹å›¾ï¼ˆå·¦ä¾§ï¼‰ã€‚ åˆå¹¶çš„å¦ä¸€ä¸ªå˜åž‹æ˜¯ä½¿ç”¨ -no-ff é€‰é¡¹ï¼ˆå®ƒä»£è¡¨ä¸å¿«è¿›ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ†æ”¯åŽ†å²çœ‹ä¸ŠåŽ»ç¨æœ‰ä¸åŒï¼ˆå³ä¾§ï¼‰ï¼Œæœ‰ä¸€ä¸ªé™„åŠ çš„æäº¤ï¼ˆè™šçº¿åœ†ï¼‰å¼ºè°ƒåˆå¹¶ã€‚è¿™ä¸ªæäº¤å‘Šè¯‰æˆ‘ä»¬æœ‰å…³åˆå¹¶åˆ†æ”¯çš„å¤‡æ³¨ä¿¡æ¯ã€‚ Gitçš„é»˜è®¤è¡Œä¸ºæ˜¯å°½å¯èƒ½ä½¿ç”¨å¿«è¿›ã€‚è¿™å¯ä»¥æ”¹å˜çš„ï¼Œéžå¿«è¿›æ¨¡å¼å¯ä»¥å¾ˆå®¹æ˜“åœ°è®¾å®šä¸ºé»˜è®¤åˆå¹¶æ¨¡å¼ã€‚ è®¾ç½®éžå¿«è¿›æ¨¡å¼åˆå¹¶ä¸ºé»˜è®¤åˆå¹¶æ–¹å¼ git config branch.master.mergeoptions â€œâ€“no-ffâ€ æ€»ä¹‹ï¼Œéžå¿«è¿›åˆå¹¶ä¿æŒæ˜Žç¡®åˆ†æ”¯çš„æ¦‚å¿µã€‚å®ƒå¯åœ¨ä¿ç•™åˆ†æ”¯å¤æ‚çš„éžçº¿æ€§æäº¤åŽ†å²ã€‚åœ¨å¦ä¸€æ–¹é¢ï¼Œå¿«è¿›åˆå¹¶ä¿æŒçº¿æ€§åŽ†å²ä¸Šçš„å˜æ›´ï¼Œä½¿å…¶æ›´å®¹æ˜“ä½¿ç”¨å…¶ä»–å·¥å…·ï¼ˆlog, blame, bisectï¼‰ã€‚æ¯ä¸ªåˆ†æ”¯çš„æ¥æºå°†å˜å¾—å¾ˆä¸æ˜Žæ˜¾ï¼Œä½†å¦‚æžœè¯¥é¡¹ç›®å¼ºåˆ¶è¦æ±‚æäº¤ä¿¡æ¯å’Œé—®é¢˜è·Ÿè¸ªå™¨ä¹‹é—´çš„ä¸¥æ ¼çš„äº¤å‰å¼•ç”¨ï¼Œè¿™ä¹Ÿä¸æ˜¯ä»€ä¹ˆå¤§ä¸äº†çš„äº‹ã€‚ ä½ å–œæ¬¢å“ªä¸€ç§å‘¢ï¼Œå¿«è¿›å¼æˆ–éžå¿«è¿›å¼ï¼Ÿ ç¿»è¯‘è‡ªï¼š Fast-Forward Git Merge]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¿«é€Ÿä¸Šæ‰‹Flow-é™æ€ç±»åž‹æ£€æŸ¥å™¨]]></title>
    <url>%2F2016%2F03%2F16%2F%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8BFlow-%E9%9D%99%E6%80%81%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E5%99%A8%2F</url>
    <content type="text"><![CDATA[why Flowjavascriptæ˜¯ä¸€ä¸ªå¼±ç±»åž‹è¯­è¨€ï¼Œå˜é‡ç±»åž‹ä¸éœ€è¦å£°æ˜Žï¼Œè¿ç®—è¿‡ç¨‹ä¸­ä¼šæ ¹æ®éœ€è¦è‡ªåŠ¨è½¬æ¢ç±»åž‹ï¼Œè¿™ä¸ªæ˜¯jsçš„ä¼˜ç‚¹ï¼Œå¤Ÿçµæ´»ï¼Œç¼–ç ç®€å•ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿæ˜¯è½¯è‚‹ã€‚æœ‰æ—¶å€™ï¼Œæœ‰äº›ç±»åž‹è½¬æ¢çš„bugæ— ä»ŽæŸ¥èµ·ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤æ‚çš„åº”ç”¨ä¸­ã€‚ Flowä¸ºJavascriptæ·»åŠ äº†é™æ€ç±»åž‹æ£€æŸ¥ï¼Œä»¥æé«˜å¼€å‘æ•ˆçŽ‡å’Œä»£ç è´¨é‡ã€‚æ›´æ˜Žç¡®çš„è¯´ï¼Œé™æ€ç±»åž‹æ£€æŸ¥æä¾›çš„å¥½å¤„åƒæ—©æœŸé”™è¯¯æ£€æŸ¥ï¼Œå¸®åŠ©ä½ å‘çŽ°ä¸€äº›åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½å‘çŽ°çš„é”™è¯¯ã€‚ å®‰è£…ç”±äºŽflowæ˜¯ç”¨OCamlè¯­è¨€å†™çš„ï¼Œnpmä¸Šåªæœ‰å¯¹åº”çš„äºŒè¿›åˆ¶åŒ…ã€‚ 1npm install flow-bin å¯è€…ä½¿ç”¨ Homebrew å®‰è£… 1brew install flow å¿«é€Ÿä¸Šæ‰‹åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ flow initï¼Œä¼šç”Ÿæˆä¸€ä¸ª .flowconfig æ–‡ä»¶ åªéœ€è¦åœ¨å¾…æ£€æŸ¥çš„jsæ–‡ä»¶å¤´éƒ¨æ·»åŠ ä¸€è¡Œæ³¨é‡Š 1/* @flow */ ç„¶åŽåœ¨åŒä¸€ç›®å½•ä¸‹è¿è¡Œflow checkå³å¯ã€‚ flow serverflow serveræ˜¯ä¸ºäº†æé«˜æ£€æµ‹æ•ˆçŽ‡çš„åŽå°ç¨‹åºï¼Œæ”¯æŒåœ¨åŽå°è¿è¡Œï¼Œå¹¶ä¸”åªç›‘æµ‹æœ‰ä¿®æ”¹çš„æ–‡ä»¶ã€‚ æ–¹æ³•å¾ˆç®€å•ï¼Œä¸€æ¡ flow å‘½ä»¤å°±èƒ½å®Œæˆ Flow æœåŠ¡å™¨å¯åŠ¨ï¼Œæ–‡ä»¶æ£€æµ‹ï¼Œè¢«æ›´æ”¹æ–‡ä»¶çš„æ£€æµ‹ï¼Œå³ç¬¬ä¸€æ¬¡ä½¿ç”¨ flow å‘½ä»¤ä¼šå¯åŠ¨ Flow æœåŠ¡å™¨å¹¶ä¸”é¦–æ¬¡æ£€æµ‹æ–‡ä»¶ï¼Œå†æ¬¡ä½¿ç”¨ flow å‘½ä»¤ä¼šè¿žæŽ¥ Flow æœåŠ¡å™¨å¹¶ä¸”æ£€æµ‹æ–‡ä»¶ï¼Œä¹‹åŽä½¿ç”¨ flow å‘½ä»¤æ—¶å°†ä¼šè¿žæŽ¥ Flow æœåŠ¡å™¨å¹¶ä¸”å¯¹ä¿®æ”¹è¿‡çš„æ–‡ä»¶è¿›è¡Œæ£€æµ‹ã€‚ flow check:æ£€æµ‹æ‰€æœ‰å£°æ˜Žäº† @flow çš„æ–‡ä»¶ flow check â€“all:å¯ä»¥è®©Flowæ£€æµ‹æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ²¡æœ‰å£°æ˜Ž @flow çš„æ–‡ä»¶ flow stop:é¡¹ç›®å¼€å‘å®Œæˆåœæ­¢æœåŠ¡ flowconfig [ignore]å¿½ç•¥çš„æ–‡ä»¶ï¼Œè·¯å¾„çš„åŒ¹é…è§„åˆ™æ˜¯æ­£åˆ™è¡¨è¾¾å¼ [include]éœ€è¦æ£€æµ‹çš„å…¶ä»–ç›®å½•çš„æ–‡ä»¶ [libs]å½“æ–‡ä»¶ä¸­æœ‰ç¬¬ä¸‰æ–¹åº“å¼•ç”¨æˆ–è€…requireå…¨å±€çš„moduleæ—¶ï¼Œéœ€è¦åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶é‡Œdeclareè¿™ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªçš„å€¼æ˜¯æ‰€æœ‰declareè·¯å¾„çš„é›†åˆ [options]åŒ…å«è‹¥å¹²key-valueçš„é…ç½® flowçš„ä¸¤ç§æ¨¡å¼12/* @flow */ åªè¦å¸¦æœ‰è¿™ä¸ªæ³¨é‡Šï¼Œéƒ½ä¼šè¿›è¡Œç±»åž‹æ£€æµ‹/* @flow weak */ åªå¯¹æœ‰åŠ ç±»åž‹å£°æ˜Žçš„å˜é‡è¿›è¡Œç±»åž‹æ£€æµ‹ ç±»åž‹å£°æ˜Ž/æ ‡æ³¨ ä¸å£°æ˜Žå˜é‡ç±»åž‹çš„æ—¶å€™ï¼ŒFlow ä¹Ÿä¼šè‡ªåŠ¨æ£€æŸ¥éšæ€§å­˜åœ¨çš„ç±»åž‹è½¬æ¢ã€‚ä½†æ›´ä¸ºä¸¥è°¨çš„æ–¹å¼æ˜¯æ˜¾å¼å£°æ˜Žå˜é‡çš„ç±»åž‹ã€‚ å¯ä»¥åœ¨ä»£ç é‡Œå†™ä¸Šç±»åž‹: 12345678/* @flow */// Changing the return type to number fixes the errorfunction foo(x: string, y: number): number &#123; return x.length * y;&#125;foo('Hello', 42); ä¹Ÿå¯ä»¥è¿™æ ·ï¼š 123/* @flow */type T = number;var x: T = 0; ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´è¯¦ç»†çš„ä¾‹å­ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546class People &#123; name: string; constructor(name:string)&#123; this.name = name &#125; getAge():number&#123; return 18; &#125;&#125;function getLength(param?:string):number &#123; /*param?:stringä¼ å‚ç±»åž‹ä»€ä¹ˆï¼Œ?è¡¨ç¤ºæ­¤å¤„å¯ä¸ä¼ å€¼ï¼›*/ /*\:numberä¸ºå‡½æ•°è¿”å›žå€¼ç±»åž‹,å¦‚æžœæ²¡æœ‰returnå¯ä¸å†™æˆ–å†™void*/ var s:string = 'string';/*å­—ç¬¦*/ var ss:String = new String('string');/*å­—ç¬¦å¯¹è±¡*/ /* s = ss*///ç±»åž‹ä¸åŒï¼Œflowä¼šæŠ¥é”™ var n:number = 12;/*æ•°å­—*/ var nn:Number = new Number(12);/*æ•°å­—å¯¹è±¡*/ var b:boolean = true;/*boolå€¼ï¼Œä»…èƒ½ä¸ºtrue/false*/ var bb:Boolean = new Boolean(true);/*boolå€¼å¯¹è±¡*/ var o:&#123;prop1:number,prop2:string&#125; = &#123; /*å¯¹è±¡ç†Ÿæ‚‰å£°æ˜Ž*/ prop1: 12, prop2: '21123' &#125; var v:void = undefined;/*undefined*/ var a:any = 'aa';/*ä»»æ„ç±»åž‹ï¼Œé™¤undefined*/ var m:mixed = '1';/*ä»»æ„ç±»åž‹+undefined*/ var mm:mixed = undefined;/*ä»»æ„ç±»åž‹+undefined*/ var aa:Array&lt;number&gt; = [1,2,3,4];/*æ•°ç»„å†…å€¼ç±»åž‹å£°æ˜Ž*/ var P:Class&lt;People&gt; = People;/*è‡ªå®šä¹‰ç±»åž‹å£°æ˜Ž*/ var p:People = new People('pt');/*è‡ªå®šä¹‰Peopleç±»åž‹*/ if (param) &#123; return param.length; &#125; else &#123; return 0; &#125;&#125; å…¼å®¹æ€§Flowè‡´åŠ›äºŽæ”¯æŒæœ€æ–°çš„JavaScriptæ ‡å‡†ã€‚ç›®å‰å·²ç»æ”¯æŒå„ç§ES6ç‰¹æ€§å¦‚destructuring, classes, extended objects, optional function parametersï¼Œä»¥åŠæ ¸å¿ƒAPIæ‰©å±•ï¼ˆæ¯”å¦‚Map, Set, Promise, å’Œ new methods on Object, Array, å’Œ Math)ã€‚å…¶å®ƒç‰¹æ€§ï¼ˆå°¤å…¶æ˜¯æ¨¡å—ï¼‰æ­£åœ¨å¼€å‘ä¸­ã€‚Flowæ”¯æŒCommonJS / Node.js è§„èŒƒçš„æ¨¡å—ã€‚ Flow ä¹Ÿå·²ç»æ”¯æŒ Reactã€‚ ä»£ç ç¼–è¯‘åœ¨æž„å»ºå·¥å…·ä¸­æ·»åŠ flowæ£€æŸ¥çš„æ­¥éª¤ã€‚webpackå’Œgulpéƒ½æœ‰å¯¹åº”çš„flowæ’ä»¶ã€‚ æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ç”¨åˆ°çš„æ’ä»¶ï¼š eslint-plugin-flow-vars å‚è€ƒFlowå®˜ç½‘æœ€è¿‘è®¿é—®ä¸äº†ï¼Œå¯ä»¥çœ‹è¿™é‡Œï¼šhttps://github.com/facebook/flow/tree/master/website/docs flowâ€”â€”A static type checker for javascript #32 flowâ€“facebookå‡ºå“çš„javascripté™æ€ç±»åž‹æ£€æŸ¥å™¨]]></content>
      <categories>
        <category>Flow</category>
      </categories>
      <tags>
        <tag>Flow</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactåº”ç”¨æ€§èƒ½ä¼˜åŒ–ä¹‹IMMUTABLE.JS]]></title>
    <url>%2F2016%2F03%2F14%2FReact%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B9%8BIMMUTABLE-JS%2F</url>
    <content type="text"><![CDATA[å‰ä¸€ç¯‡æ–‡ç« è®°å½•äº†Reactåº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–ç‚¹ï¼Œä»Šå¤©è¿˜æœ‰ä¸ªæ›´é—ªè€€çš„ Immutable.jsã€‚ Immutable.jsImmutable.js æœ¬èº«å’Œ React.js æ²¡æœ‰å¿…ç„¶çš„è”ç³»ã€‚å®ƒçš„æ„ä¹‰åœ¨äºŽå®ƒå¼¥è¡¥äº†Javascriptæ²¡æœ‰ä¸å¯å˜æ•°æ®ç»“æž„çš„é—®é¢˜ã€‚ Javascriptä¸­å¯¹è±¡éƒ½æ˜¯å‚è€ƒç±»åž‹ï¼Œä¹Ÿå°±æ˜¯a={a:1}; b=a; b.a=10;ä½ å‘çŽ°a.aä¹Ÿå˜æˆ10äº†ã€‚å¯å˜çš„å¥½å¤„æ˜¯èŠ‚çœå†…å­˜æˆ–æ˜¯åˆ©ç”¨å¯å˜æ€§åšä¸€äº›äº‹æƒ…ï¼Œä½†æ˜¯ï¼Œåœ¨å¤æ‚çš„å¼€å‘ä¸­å®ƒçš„å‰¯ä½œç”¨è¿œæ¯”å¥½å¤„å¤§çš„å¤šã€‚äºŽæ˜¯æ‰æœ‰äº†æµ…copyå’Œæ·±copyï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸¾ä¸ªå¸¸è§ä¾‹å­ï¼š 123var defaultConfig = &#123; /* é»˜è®¤å€¼ */&#125;;var config = $.extend(&#123;&#125;, defaultConfig, initConfig); // jQueryç”¨æ³•ã€‚initConfigæ˜¯è‡ªå®šä¹‰å€¼var config = $.extend(true, &#123;&#125;, defaultConfig, initConfig); // å¦‚æžœå¯¹è±¡æ˜¯å¤šå±‚çš„ï¼Œå°±ç”¨åˆ°deep-copyäº† ES6å‡ºçŽ°åŽŸç”Ÿçš„assignæ–¹æ³•ï¼Œä½†å®ƒç›¸å½“äºŽæ˜¯æµ…copyã€‚å¦‚æžœæœ‰äº†ä¸å¯å˜çš„æ•°æ®ç»“æž„å°±çœå¿ƒäº†ï¼ŒES5.1ä¸­å¯¹è±¡æœ‰äº†freezeæ–¹æ³•ï¼Œä¹Ÿæ˜¯æµ…copyï¼Œa=Object.freeze({a:1}); b=a; b.a=10; a.aè¿˜æ˜¯1ã€‚åœ¨å®žé™…å¼€å‘ä¸­æµ…copyé€šå¸¸ä¸å¤Ÿã€‚å¦‚æžœç”¨immutableJS: 123var defaultConfig = Immutable.fromJS(&#123; /* é»˜è®¤å€¼ */&#125;);var config = defaultConfig.merge(initConfig); // defaultConfigä¸ä¼šæ”¹å˜ï¼Œè¿”å›žæ–°å€¼ç»™configvar config = defaultConfig.mergeDeep(initConfig); // æ·±å±‚merge ä¸Šè¿°ç”¨deep-copyä¹Ÿå¯ä»¥åšåˆ°ï¼Œå·®åˆ«åœ¨äºŽæ€§èƒ½ã€‚æ¯æ¬¡deep-copyéƒ½è¦æŠŠæ•´ä¸ªå¯¹è±¡é€’å½’çš„å¤åˆ¶ä¸€ä»½ã€‚è€ŒImmutableçš„å®žçŽ°æœ‰äº›åƒé“¾è¡¨ï¼Œæ·»åŠ ä¸€ä¸ªæ–°ç»“ç‚¹æŠŠæ—§ç»“ç‚¹çš„çˆ¶å­å…³ç³»è½¬ç§»åˆ°æ–°ç»“ç‚¹ä¸Šï¼Œæ€§èƒ½æå‡å¾ˆå¤šã€‚ImmutableJSç»™çš„è¿œä¸æ­¢è¿™äº›ï¼Œå®ƒæä¾›äº†7ç§ä¸å¯å˜çš„æ•°æ®ç»“æž„ï¼šList, Stack, Map, OrderedMap, Set, OrderedSet, Record ï¼ˆè¯¦è§æ–‡æ¡£Immutable.jsï¼Œæ–‡æ¡£å¾ˆgeekï¼Œæ‰“å¼€consoleè¯•å§ï¼‰ã€‚immutableJS ï¼‹ åŽŸç”ŸJavascriptç­‰äºŽçœŸæ­£çš„å‡½æ•°å¼ç¼–ç¨‹ã€‚ Immutable ä¼˜ç‚¹1. Immutable é™ä½Žäº† Mutable å¸¦æ¥çš„å¤æ‚åº¦å¯å˜ï¼ˆMutableï¼‰æ•°æ®è€¦åˆäº† Time å’Œ Value çš„æ¦‚å¿µï¼Œé€ æˆäº†æ•°æ®å¾ˆéš¾è¢«å›žæº¯ã€‚ æ¯”å¦‚ä¸‹é¢ä¸€æ®µä»£ç ï¼š 12345function touchAndLog(touchFn) &#123; let data = &#123; key: 'value' &#125;; touchFn(data); console.log(data.key); // çŒœçŒœä¼šæ‰“å°ä»€ä¹ˆï¼Ÿ&#125; åœ¨ä¸æŸ¥çœ‹ touchFn çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œå› ä¸ºä¸ç¡®å®šå®ƒå¯¹ data åšäº†ä»€ä¹ˆï¼Œä½ æ˜¯ä¸å¯èƒ½çŸ¥é“ä¼šæ‰“å°ä»€ä¹ˆï¼ˆè¿™ä¸æ˜¯åºŸè¯å—ï¼‰ã€‚ä½†å¦‚æžœ data æ˜¯ Immutable çš„å‘¢ï¼Œä½ å¯ä»¥å¾ˆè‚¯å®šçš„çŸ¥é“æ‰“å°çš„æ˜¯ valueã€‚ 2. èŠ‚çœå†…å­˜Immutable.js ä½¿ç”¨äº† Structure Sharing ä¼šå°½é‡å¤ç”¨å†…å­˜ï¼Œç”šè‡³ä»¥å‰ä½¿ç”¨çš„å¯¹è±¡ä¹Ÿå¯ä»¥å†æ¬¡è¢«å¤ç”¨ã€‚æ²¡æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡ä¼šè¢«åžƒåœ¾å›žæ”¶ã€‚ 123456789import &#123; Map&#125; from 'immutable';let a = Map(&#123; select: 'users', filter: Map(&#123; name: 'Cam' &#125;)&#125;)let b = a.set('select', 'people');a === b; // falsea.get('filter') === b.get('filter'); // true ä¸Šé¢ a å’Œ b å…±äº«äº†æ²¡æœ‰å˜åŒ–çš„ filter èŠ‚ç‚¹ã€‚ 3. Undo/Redoï¼ŒCopy/Pasteï¼Œç”šè‡³æ—¶é—´æ—…è¡Œè¿™äº›åŠŸèƒ½åšèµ·æ¥å°èœä¸€ç¢Ÿå› ä¸ºæ¯æ¬¡æ•°æ®éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œåªè¦æŠŠè¿™äº›æ•°æ®æ”¾åˆ°ä¸€ä¸ªæ•°ç»„é‡Œå‚¨å­˜èµ·æ¥ï¼Œæƒ³å›žé€€åˆ°å“ªé‡Œå°±æ‹¿å‡ºå¯¹åº”æ•°æ®å³å¯ï¼Œå¾ˆå®¹æ˜“å¼€å‘å‡ºæ’¤é”€é‡åšè¿™ç§åŠŸèƒ½ã€‚ ä¸ºä»€ä¹ˆåœ¨React.jsä¸­ä½¿ç”¨Immutable.jsç†Ÿæ‚‰React.jsçš„éƒ½åº”è¯¥çŸ¥é“ï¼ŒReact.jsæ˜¯ä¸€ä¸ªUI = f(states)çš„æ¡†æž¶ï¼Œä¸ºäº†è§£å†³æ›´æ–°çš„é—®é¢˜ï¼ŒReact.jsä½¿ç”¨äº†virtual domï¼Œvirtual domé€šè¿‡diffä¿®æ”¹domï¼Œæ¥å®žçŽ°é«˜æ•ˆçš„domæ›´æ–°ã€‚ å¬èµ·æ¥å¾ˆå®Œç¾Žå§ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ã€‚å½“stateæ›´æ–°æ—¶ï¼Œå¦‚æžœæ•°æ®æ²¡å˜ï¼Œä½ ä¹Ÿä¼šåŽ»åšvirtual domçš„diffï¼Œè¿™å°±äº§ç”Ÿäº†æµªè´¹ã€‚è¿™ç§æƒ…å†µå…¶å®žå¾ˆå¸¸è§ï¼Œå¦‚ï¼š ç†Ÿæ‚‰ React ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„è¯éƒ½çŸ¥é“ï¼šè°ƒç”¨ setState æ–¹æ³•æ€»æ˜¯ä¼šè§¦å‘ render æ–¹æ³•ä»Žè€Œè¿›è¡Œ vdom re-render ç›¸å…³é€»è¾‘ï¼Œå“ªæ€•å®žé™…ä¸Šä½ æ²¡æœ‰æ›´æ”¹åˆ° Component.state ã€‚ 12this.state = &#123;count: 0&#125;this.setState(&#123;count: 0&#125;);// ç»„ä»¶ state å¹¶æœªè¢«æ”¹å˜ï¼Œä½†ä»ä¼šè§¦å‘ render æ–¹æ³• ä¸ºäº†é¿å…è¿™ç§æ€§èƒ½ä¸Šçš„æµªè´¹ï¼ŒReact æä¾›äº†ä¸€ä¸ª shouldComponentUpdate æ¥æŽ§åˆ¶è§¦å‘ vdom re-render é€»è¾‘çš„æ¡ä»¶ã€‚äºŽæ˜¯ PureRenderMixin ä½œä¸ºä¸€ç§ä¼˜åŒ–æŠ€å·§è¢«ä½¿ç”¨ã€‚ä½†PureRenderMixinåªæ˜¯ç®€å•çš„æµ…æ¯”è¾ƒï¼Œä¸ä½¿ç”¨äºŽå¤šå±‚æ¯”è¾ƒã€‚é‚£æ€Žä¹ˆåŠžï¼Ÿï¼Ÿè‡ªå·±åŽ»åšå¤æ‚æ¯”è¾ƒçš„è¯ï¼Œæ€§èƒ½åˆä¼šéžå¸¸å·®ã€‚ è¿™æ—¶å€™ immutableJS å°±æ´¾å¾—ä¸Šç”¨åœºäº†ï¼š 123var map1 = Immutable.fromJS(&#123;a:1, b:1, c:&#123;b:&#123;c:&#123;d:&#123;e:7&#125;&#125;&#125;&#125;&#125;);var map2 = Immutable.fromJS(&#123;a:1, b:1, c:&#123;b:&#123;c:&#123;d:&#123;e:7&#125;&#125;&#125;&#125;&#125;);Immutable.is(map1, map2); // true æ¯ä¸€æ¬¡stateæ›´æ–°åªè¦æœ‰æ•°æ®æ”¹å˜ï¼Œé‚£ä¹ˆPureRenderMixinå¯ä»¥ç«‹åˆ»åˆ¤æ–­å‡ºæ•°æ®æ”¹å˜ï¼Œå¯ä»¥å¤§å¤§æå‡æ€§èƒ½ã€‚ å®žè·µä¸Ž React æ­é…ä½¿ç”¨ï¼ŒPure Renderå¯ä»¥ä½¿ç”¨ react-immutable-render-mixin é€šè¿‡es6çš„ä¿®é¥°å™¨ @decorator æ¥ä½¿ç”¨ 123456789import React from 'react';import &#123; immutableRenderDecorator &#125; from 'react-immutable-render-mixin';@immutableRenderDecoratorclass Test extends React.Component &#123; render() &#123; return &lt;div&gt;&lt;/div&gt;; &#125;&#125; æˆ–è€…ç›´æŽ¥ 123456789import immutableRenderMixin from 'react-immutable-render-mixin';React.createClass(&#123; mixins: [immutableRenderMixin], render: function() &#123; return &lt;div className=&#123;this.props.className&#125;&gt;foo&lt;/div&gt;; &#125;&#125;); ä¸Ž Redux æ­é…ä½¿ç”¨Redux æ˜¯ç›®å‰æµè¡Œçš„ Flux è¡ç”Ÿåº“ã€‚å®ƒç®€åŒ–äº† Flux ä¸­å¤šä¸ª Store çš„æ¦‚å¿µï¼Œåªæœ‰ä¸€ä¸ª Storeï¼Œæ•°æ®æ“ä½œé€šè¿‡ Reducer ä¸­å®žçŽ°ï¼›åŒæ—¶å®ƒæä¾›æ›´ç®€æ´å’Œæ¸…æ™°çš„å•å‘æ•°æ®æµï¼ˆView -&gt; Action -&gt; Middleware -&gt; Reducerï¼‰ï¼Œä¹Ÿæ›´æ˜“äºŽå¼€å‘åŒæž„åº”ç”¨ã€‚ç›®å‰å·²ç»åœ¨æˆ‘ä»¬é¡¹ç›®ä¸­å¤§è§„æ¨¡ä½¿ç”¨ã€‚ ç”±äºŽ Redux ä¸­å†…ç½®çš„ combineReducers å’Œ reducer ä¸­çš„ initialState éƒ½ä¸ºåŽŸç”Ÿçš„ Object å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½å’Œ Immutable åŽŸç”Ÿæ­é…ä½¿ç”¨ã€‚ å¹¸è¿çš„æ˜¯ï¼ŒRedux å¹¶ä¸æŽ’æ–¥ä½¿ç”¨ Immutableï¼Œå¯ä»¥è‡ªå·±é‡å†™ combineReducers æˆ–ä½¿ç”¨ redux-immutablejs æ¥æä¾›æ”¯æŒã€‚ æœ¬æ–‡åŽŸæ–‡é“¾æŽ¥ï¼š facebook immutable.js æ„ä¹‰ä½•åœ¨ï¼Œä½¿ç”¨åœºæ™¯ï¼Ÿ Immutable è¯¦è§£åŠ React ä¸­å®žè·µåŸºæœ¬æ²¡æœ‰æ”¹åŠ¨ã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>Immutable.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactåº”ç”¨æ€§èƒ½ä¼˜åŒ–ä¹‹shouldComponentUpdateä¸Žkey]]></title>
    <url>%2F2016%2F03%2F10%2FReact%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B9%8BshouldComponentUpdate%E4%B8%8Ekey%2F</url>
    <content type="text"><![CDATA[è™½ç„¶React çš„ vDom diffç®—æ³•èƒ½ä¿è¯æœ€å°ç¨‹åº¦çš„ DOM æ”¹å˜ï¼Œä½†å½“ç»„ä»¶æ ‘åµŒå¥—å¾—éžå¸¸æ·±æ—¶ï¼Œå°±ä¸å¾—ä¸éœ€è¦æ¸²æŸ“ä¸€ä¸ªæ–°çš„è™šæ‹Ÿ DOM æ¥è®©åº”ç”¨è¿è¡Œå¾—æ›´åŠ é«˜æ•ˆã€‚ ä¸‹é¢çœ‹çœ‹åŠ é€Ÿåº”ç”¨ç¨‹åºçš„ä¸¤ç§ç®€å•çš„é…ç½®æ–¹æ³•ï¼š shouldComponentUpdateè®¾ç½®æ–° propsï¼Œè°ƒç”¨ setState æ–¹æ³•æˆ– forceUpdate æ–¹æ³•æ—¶ï¼ŒReact éƒ½ä¼šè°ƒç”¨è¯¥ç»„ä»¶æ‰€æœ‰å­ç»„ä»¶çš„ render æ–¹æ³•ã€‚ä½†æ˜¯åœ¨ç»„ä»¶æ ‘æ·±åº¦åµŒå¥—æˆ– render æ–¹æ³•ååˆ†å¤æ‚çš„æ—¶ä¾¯ï¼Œé¡µé¢å°±ä¼šæœ‰å»¶è¿Ÿã€‚ ä½†æ­¤æ—¶ï¼ŒæŸäº›å­ç»„ä»¶å¹¶æ²¡æœ‰å¿…è¦æ›´æ–°ï¼Œæˆ–è€…æ°¸è¿œéƒ½ä¸éœ€è¦æ›´æ–°ï¼Œè¿™æ—¶è¿›è¡Œçš„è®¡ç®—è¿‡ç¨‹æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚ è€Œ shouldComponentUpdate æ–¹æ³•æ­£æ˜¯ç”¨æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨æŒ‡å®šç»„ä»¶çš„ render æ–¹æ³•ã€‚ shouldComponentUpdate æ–¹æ³•è¿”å›žä¸€ä¸ªå¸ƒå°”å€¼ã€‚false è¡¨ç¤ºä¸è¦è°ƒç”¨ render æ–¹æ³•ï¼›true è¡¨ç¤ºéœ€è¦è°ƒç”¨ render æ–¹æ³•è®¡ç®—å‡ºæ–°çš„è™šæ‹Ÿ DOMã€‚ æ­¤æ–¹æ³•çš„é»˜è®¤å€¼æ˜¯ trueã€‚ å¹¶ä¸”ï¼Œç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ï¼ŒshouldComponentUpdate æ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ shouldComponentUpdate æ–¹æ³•æŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œæ–°çš„ props å’Œæ–°çš„ stateï¼š 12345React.creatClass(&#123; shouldComponentUpdate: function (nextProps, nextState) &#123; return nextProps.id !== this.props.id &#125; &#125;) å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ·»åŠ  React.addons.PureRenderMixin æ’ä»¶æ¥å¤„ç† shouldComponentUpdateã€‚ è¿™ä¸ªæ’ä»¶ä¼šé‡å†™ shouldComponentUpdate æ–¹æ³•ï¼Œå¹¶åœ¨è¯¥æ–¹æ³•å†…å¯¹æ–°è€ props åŠ state è¿›è¡Œå¯¹æ¯”ï¼Œ å¦‚æžœå‘çŽ°å®ƒä»¬å®Œå…¨ä¸€è‡´åˆ™è¿”å›ž false, å°±åƒä¸Šé¢çš„ä¾‹å­ä¸€æ ·ã€‚å®˜æ–¹æ–‡æ¡£é‡Œä¹Ÿæœ‰ä»‹ç»ï¼š PureRenderMixin 1234567891011import PureRenderMixin from 'react-addons-pure-render-mixin';class FooComponent extends React.Component &#123; constructor(props) &#123; super(props); this.shouldComponentUpdate = PureRenderMixin.shouldComponentUpdate.bind(this); &#125; render() &#123; return &lt;div className=&#123;this.props.className&#125;&gt;foo&lt;/div&gt;; &#125;&#125; key(é”®)åœ¨éåŽ†åˆ—è¡¨çš„æ—¶å€™ï¼Œæ²¡æœ‰ç»„ä»¶æ·»åŠ  key å€¼ä¼šæœ‰ warnning äº§ç”Ÿã€‚é‚£å®ƒæ˜¯ç”¨æ¥å¹²å˜›çš„å‘¢ï¼Ÿ å‡è®¾æœ‰ä¸€ä¸ª div ç»„ä»¶ï¼Œå®ƒçš„ key å±žæ€§ä¸º â€˜fooâ€™ï¼Œä¹‹åŽåˆæ”¹ä¸º â€˜barâ€™ï¼Œ é‚£ React å°±ä¼šè·³è¿‡ DOM diffï¼Œ åŒæ—¶å®Œä¼šå¼ƒç½® div æ‰€æœ‰çš„å­å…ƒç´ ï¼Œå¹¶é‡æ–°æ¸²æŸ“ã€‚é™¤äº†å‘Šè¯‰ React ä»€ä¹ˆæ—¶å€™è¦æŠ›å¼ƒä¸€ä¸ªèŠ‚ç‚¹ä¹‹å¤–ï¼Œkey è¿˜å¯ä»¥åœ¨å…ƒç´ é¡ºåºæ”¹å˜æ—¶ä½¿ç”¨ã€‚ 12345render: function()&#123; return items.map(function(item)&#123; return &lt;li key='item.id'&gt;item.name&lt;/li&gt; &#125;)&#125; å¦‚æžœåƒä¸Šé¢è¿™æ ·ï¼ŒReact åœ¨li åˆ—è¡¨é¡ºåºæ”¹å˜çš„æ—¶å€™å°±ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œè€Œæ˜¯é‡‡ç”¨ insertBefore æ“ä½œï¼Œè¿™ä¹Ÿæ˜¯æœ€é«˜æ•ˆçš„æ–¹æ³•ã€‚ ä½†æ˜¯è¦æ³¨æ„ï¼Œkey å€¼å¿…é¡»æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œæœ€å¥½ä¸è¦æ˜¯æ•°å­—ï¼Œç»å¯¹ä¸èƒ½æ˜¯éåŽ†ä¸­çš„indexã€‚è¿™æ ·å¯ä»¥ä¿è¯ä»Žä¸€ä¸ªçˆ¶ç»„ä»¶ç§»åŠ¨åˆ°å¦ä¸€ä¸ªçˆ¶ç»„ä»¶çš„æƒ…å†µæ˜¯ä¸ä¼šè¢«å¤„ç†çš„ã€‚ key å€¼ä¹Ÿæ˜¯æ— æ³•è¯»å–çš„ã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœç´¢å‘½ä»¤ä¹‹locateã€whereisã€whichã€findã€grep]]></title>
    <url>%2F2016%2F03%2F07%2F%E6%90%9C%E7%B4%A2%E5%91%BD%E4%BB%A4%E4%B9%8Blocate%E3%80%81whereis%E3%80%81which%E3%80%81find%E3%80%81grep%2F</url>
    <content type="text"><![CDATA[whereisæœç´¢å‘½ä»¤æ‰€åœ¨è·¯å¾„åŠå¸®åŠ©æ–‡æ¡£æ‰€åœ¨ä½ç½® é€‰é¡¹ï¼š -b åªæŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶ -m åªæŸ¥æ‰¾å¸®åŠ©æ–‡ä»¶ ä¹Ÿå¯ä»¥é€šè¿‡ whereis å‘½ä»¤æ¥åˆ¤æ–­æ˜¯å¦æ˜¯shellå†…éƒ¨å‘½ä»¤ whichæœç´¢å‘½ä»¤æ‰€åœ¨è·¯ä¹ˆåŠåˆ«å ä¸Žwhereisçš„åŒºåˆ«åœ¨äºŽ which ä¸ä»…å¯ä»¥æŸ¥çœ‹å‘½ä»¤æ‰€åœ¨è·¯å¾„ï¼Œè¿˜å¯ä»¥æŸ¥çœ‹åˆ°å‘½ä»¤çš„åˆ«å locateæœç´¢æ–‡ä»¶åæœ€å¿«çš„æ–¹å¼ï¼Œæ ¹æ®åŽå°æ•°æ®åº“/var/lib/mlocateæœç´¢ updatedb å‘½ä»¤æ‰‹åŠ¨æ›´æ–°æ•°æ®åº“ï¼Œæ•°æ®åº“æ›´æ–°ä¸æ˜¯å³æ—¶çš„ï¼Œä¸€èˆ¬éœ€è¦ä¸€å¤© /etc/updatedb.conf é…ç½®æ–‡ä»¶ï¼Œç”¨äºŽé…ç½®æœç´¢é™åˆ¶ findæœ€å¼ºå¤§çš„æœç´¢å‘½ä»¤ï¼Œä½†åŒæ—¶å¸¦æ¥æ€§èƒ½é—®é¢˜ find [æœç´¢èŒƒå›´] [æœç´¢æ¡ä»¶] -name æŒ‰æ–‡ä»¶åæœç´¢ -iname ä¸åŒºåˆ†å¤§å°å†™æœç´¢ -user æŒ‰ç…§æ‰€æœ‰è€…æœç´¢ -nouser æŸ¥æ‰¾æ²¡æœ‰æ‰€æœ‰è€…çš„æ–‡ä»¶ -mtime æŒ‰ä¿®æ”¹æ–‡ä»¶çš„æ—¥æœŸæœç´¢ï¼Œå¦‚ï¼š+10 æŸ¥æ‰¾10å¤©å‰ä¿®æ”¹çš„æ–‡ä»¶ï¼Œ -10 æŸ¥æ‰¾10å†…ä¿®æ”¹çš„æ–‡ä»¶ï¼Œ 10 æŸ¥æ‰¾10å¤©å½“å¤©ä¿®æ”¹çš„æ–‡ä»¶ -atime æ–‡ä»¶è®¿é—®æ—¶é—´ -ctime æ”¹å˜æ–‡ä»¶å±žæ€§æ—¶é—´ -size æŒ‰ç…§æ–‡ä»¶å¤§å°æŒ‰ç´¢ï¼Œå¦‚ï¼š find . -size 25kï¼Œæ³¨æ„ k æ˜¯å°å†™ï¼Œ Mæ˜¯å¤§å†™ -inum æŒ‰ç…§ièŠ‚ç‚¹æŸ¥æ‰¾æ–‡ä»¶ -a é€»è¾‘ä¸Ž and,ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ï¼Œå¦‚ï¼š find /root -size +20k -a -size -1M æŸ¥æ‰¾å¤§äºŽ20kä¸”å°äºŽ1Mçš„æ–‡ä»¶ -o é€»è¾‘æˆ– or,ä¸¤ä¸ªæ¡ä»¶æ»¡è¶³ä¸€ä¸ªå³å¯ -exec å‘½ä»¤ {} \; å¯¹æœç´¢ç»“æžœæ‰§è¡Œæ“ä½œï¼Œå¦‚ï¼š find /root -size 25k -exec rm -rf {} \; æŸ¥æ‰¾/rootç›®å½•ä¸‹25kå¤§å°çš„æ–‡ä»¶ä¹‹åŽåˆ é™¤ grepåœ¨æ–‡ä»¶ä¸­æœç´¢ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸² é€‰é¡¹ï¼š -i å¿½ç•¥å¤§å°å†™ -v æŽ’é™¤æŒ‡å®šå­—ç¬¦ä¸² grep æ˜¯åŒ…å«åŒ¹é…ï¼Œåªè¦å«æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œä¸€æ•´è¡Œéƒ½ä¼šè¾“å‡ºï¼›find æ˜¯å®Œå…¨åŒ¹é…ï¼Œåªè¾“å‡ºæ–‡ä»¶åå®Œå…¨ä¸€æ ·çš„æ–‡ä»¶]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Fetch POSTæŽ¥æ”¶ä¸åˆ°æ•°æ®ï¼Œæ³¨æ„content-typeçš„è®¾ç½®]]></title>
    <url>%2F2016%2F03%2F05%2FFetch%20POST%E6%8E%A5%E6%94%B6%E4%B8%8D%E5%88%B0%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%B3%A8%E6%84%8Fcontent-type%E7%9A%84%E8%AE%BE%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘æˆ‘ä»¬å‰ç«¯ç»„åœ¨åšä¸€ä¸ªç®€æ˜“çš„æ–‡æ¡£ç³»ç»Ÿï¼Œä½¿ç”¨redux+mongodbã€‚å…¶ä¸­æŠ›å¼ƒäº†Ajaxï¼Œèµ·ç”¨äº†Fetchã€‚ XMLHttpRequest æ˜¯ä¸€ä¸ªè®¾è®¡ç²—ç³™çš„ APIï¼Œä¸ç¬¦åˆå…³æ³¨åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰çš„åŽŸåˆ™ï¼Œé…ç½®å’Œè°ƒç”¨æ–¹å¼éžå¸¸æ··ä¹±ï¼Œè€Œä¸”åŸºäºŽäº‹ä»¶çš„å¼‚æ­¥æ¨¡åž‹å†™èµ·æ¥ä¹Ÿæ²¡æœ‰çŽ°ä»£çš„ Promiseï¼Œgenerator/yieldï¼Œasync/await å‹å¥½ã€‚ Fetch çš„å‡ºçŽ°å°±æ˜¯ä¸ºäº†è§£å†³ XHR çš„é—®é¢˜ï¼ŒFetch API æ˜¯åŸºäºŽ Promise è®¾è®¡ã€‚ åˆšå¼€å§‹ç”¨çš„æ—¶å€™å‘çŽ°ä¸ªé—®é¢˜ï¼ŒPOSTæ•°æ®å‘çŽ°åŽç«¯èŽ·å–ä¸åˆ°ï¼ŒGETæ–¹å¼æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚å¦‚ï¼š 1234567fetch('/group/update', &#123; method: 'post', body: JSON.stringify(params)&#125;) .then((response) =&gt; response.json()) .then((json) =&gt; dispatch(fetchUpdateGroupName(json, index))) .catch((err) =&gt; (console.log('err:', err))) ä»¥å‰ä¸€ç›´ç”¨Jquery Ajaxï¼Œå¾ˆå°‘æƒ…å†µéœ€è¦è®¾ç½®Content-Typeï¼Œè€Œä¸”çœ‹åˆ°æœ‰äº›åšæ–‡ä»‹ç»Fetchçš„æ—¶å€™è¯´ï¼ŒFetch()å¦‚æžœæ²¡æœ‰è®¾ç½®Content-Typeï¼Œä¼šè‡ªåŠ¨èŽ·å–ã€‚ åŽæ¥è¿˜æ˜¯è¢«å®¶ä¼˜æé†’ï¼Œä»¥ä¸‹ä»£ç æ‰æ˜¯æ­£ç¡®çš„è®¾ç½®ï¼š 12345678910fetch('/group/update', &#123; method: 'post', headers: &#123; 'Content-Type': 'application/json' &#125;, body: JSON.stringify(params)&#125;) .then((response) =&gt; response.json()) .then((json) =&gt; dispatch(fetchUpdateGroupName(json, index))) .catch((err) =&gt; (console.log('err:', err))) æ³¨æ„ï¼š Fetch æ”¯æŒå‡ ç§æ•°æ®ç±»åž‹çš„ä¼ è¾“ï¼Œå…¶ä¸­åŒ…å«Blob, BLOB (binary large object)ï¼Œè¡¨ç¤ºäºŒè¿›åˆ¶å¤§å¯¹è±¡ã€‚å…¶ä¸­æœ‰ä¸ªåªè¯»å±žæ€§ï¼ŒBlob.type(),æ­¤æ—¶çš„ Content-Type åº”è®¾ç½®ä¸ºæ­¤å€¼ã€‚ è¿™é‡Œé¡ºä¾¿è®°å½•ä¸‹POSTå¸¸è§çš„Content-Type: application/x-www-form-urlencodedæµè§ˆå™¨çš„åŽŸç”Ÿ form è¡¨å•ï¼Œå¦‚æžœä¸è®¾ç½® enctype å±žæ€§ï¼Œé‚£ä¹ˆæœ€ç»ˆå°±ä¼šä»¥ application/x-www-form-urlencoded æ–¹å¼æäº¤æ•°æ®ã€‚æäº¤çš„æ•°æ®æŒ‰ç…§ key1=val1&amp;key2=val2 çš„æ–¹å¼è¿›è¡Œç¼–ç ï¼Œkey å’Œ val éƒ½è¿›è¡Œäº† URL è½¬ç ã€‚ POST http://www.123.com HTTP/1.1 Content-Type: application/x-www-form-urlencoded;charset=utf-8 title=test&amp;sub%5B%5D=1&amp;sub%5B%5D=2&amp;sub%5B%5D=3 multipart/form-dataä½¿ç”¨è¡¨å•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå¿…é¡»è®© form çš„ enctyped ç­‰äºŽè¿™ä¸ªå€¼, ä¸Šä¼ å›¾ç‰‡æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šçœ‹åˆ°ä¸‹é¢è¿™æ · POST http://www.example.com HTTP/1.1 Content-Type:multipart/form-data; boundary=----WebKitFormBoundaryrGKCBY7qhFd3TrwA ------WebKitFormBoundaryrGKCBY7qhFd3TrwA Content-Disposition: form-data; name=&quot;text&quot; title ------WebKitFormBoundaryrGKCBY7qhFd3TrwA Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;chrome.png&quot; Content-Type: image/png PNG ... content of chrome.png ... ------WebKitFormBoundaryrGKCBY7qhFd3TrwA-- å¦‚æžœæˆ‘ä»¬ä½¿ç”¨ new FormData()ä½œä¸ºæ•°æ®ä¸»ä½“æäº¤ï¼Œä¹Ÿéœ€è¦è®¾ç½®è¿™ç§ç±»åž‹ã€‚ application/jsonæŠŠå®ƒä½œä¸ºè¯·æ±‚å¤´ï¼Œç”¨æ¥å‘Šè¯‰æœåŠ¡ç«¯æ¶ˆæ¯ä¸»ä½“æ˜¯åºåˆ—åŒ–åŽçš„ JSON å­—ç¬¦ä¸²ã€‚ä½†ä¹Ÿæœ‰äº›æœåŠ¡ç«¯è¯­è¨€è¿˜æ²¡æœ‰æ”¯æŒè¿™ç§æ–¹å¼ï¼Œä¾‹å¦‚ php å°±æ— æ³•é€šè¿‡ $_POST å¯¹è±¡ä»Žä¸Šé¢çš„è¯·æ±‚ä¸­èŽ·å¾—å†…å®¹ã€‚è¿™æ—¶å€™ï¼Œéœ€è¦è‡ªå·±åŠ¨æ‰‹å¤„ç†ä¸‹ï¼šåœ¨è¯·æ±‚å¤´ä¸­ Content-Type ä¸º application/json æ—¶ï¼Œä»Ž php://input é‡ŒèŽ·å¾—åŽŸå§‹è¾“å…¥æµï¼Œå† json_decode æˆå¯¹è±¡ã€‚ å‚è€ƒï¼š å››ç§å¸¸è§çš„ POST æäº¤æ•°æ®æ–¹å¼]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>fetch</tag>
        <tag>content-type</tag>
        <tag>POST</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•å°‘åŸ‹å‘-è‰¾ç¥žåˆ†äº«ä¼š]]></title>
    <url>%2F2016%2F03%2F04%2F%E8%89%BE%E7%A5%9E%E5%88%86%E4%BA%AB%E4%BC%9A%2F</url>
    <content type="text"><![CDATA[åˆå¾ˆä¹…æ²¡æœ‰è®°å½•ä¸œè¥¿äº†ï¼ŒçœŸæ˜¯ä¸ªä¸è‡ªå¾‹çš„äºº- -ï¼ åŽ»å¹´åæœˆè¿›å…¥æœèŠ½ï¼Œæ„Ÿè§‰æœèŠ½æ˜¯ä¸€ä¸ªå…±åŒæˆé•¿çš„å…¬å¸ï¼Œæœ‰ä¸€ç§äº²åˆ‡æ„Ÿã€‚è¿™ç®—æ˜¯æˆ‘ç¬¬ä¸€æ¬¡è¿›ä¸€ä¸ªå‰ç«¯å›¢é˜Ÿæ¯”è¾ƒå¤§çš„å…¬å¸ï¼Œå¾ˆå¤šæƒ³æ³•åœ¨åˆ†äº«ä¸Žè®¨è®ºä¸­è¿¸å‘ã€‚ æœ€è¿‘äº§å“åœ¨é¢„çƒ­ä¸­ï¼Œç›¸å¯¹æœ‰ç©ºï¼Œæˆ‘ä»¬å‰ç«¯ä¹Ÿåœ¨å°è¯•ä¸€äº›æ–°æŠ€æœ¯çš„åº”ç”¨,ç”¨react-reduxåšä¸€ä¸ªç®€æ˜“çš„æ–‡æ¡£ç³»ç»Ÿã€‚é™¤äº†å®¶ä¼˜å¯¹æŠ€æœ¯æž¶æž„æ¯”è¾ƒç†Ÿï¼Œæˆ‘ä»¬å‡ ä¸ªéƒ½æ¯”è¾ƒç”Ÿç–ã€‚ä½†æ˜¯æœ€é‡è¦æ˜¯ä¸è¦å¿ƒæµ®æ°”ç‡¥ï¼Œè™½ç„¶æœ€è¿‘å¿ƒæƒ…ä¸æ˜¯å¾ˆå¥½ï¼Œä½†æˆ‘è¿˜æ˜¯å°½é‡é™ä¸‹å¿ƒæ¥ç ”è¯»æ–‡æ¡£ï¼Œåœ¨å¼€å‘ä¸­ä¸€æ­¥ä¸€å‘åœ°èµ°ä¸‹åŽ»ã€‚ ç ”å‘éƒ¨ä¹Ÿåœ¨ç»„ç»‡åˆ†äº«ä¼šï¼Œä»Šå¤©æ˜¯ç¬¬ä¸€æ¬¡åˆ†äº«ä¼šï¼Œè‰¾ç¥žå®šçš„ä¸»é¢˜æ˜¯httpåè®®ï¼Œä¸»è¦å’Œå¤§å®¶åˆ†äº«ä¸€ä¸ªhttpè¯·æ±‚ä»Žå®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯å¤„ç†è¿”å›žçš„æ•´ä¸ªè¿‡ç¨‹ã€‚ è¯´åˆ°è‰¾ç¥žï¼Œå½“åˆè§åˆ°ä»–çš„ç¬¬ä¸€å°è±¡å°±æ˜¯æ²¡ä»€ä¹ˆå°è±¡ï¼Œè€å®žã€æ™®é€šï¼Œæ‰€ä»¥å½“æ—¶ä¸æ˜¯å¾ˆæ˜Žç™½ä¸ºä»€ä¹ˆå¤§å®¶å«ä»–è‰¾ç¥žã€‚ä¸è¿‡åŽæ¥å‘çŽ°ï¼Œè‰¾ç¥žç¡®å®žæ˜¯ä¸€ä¸ªå¾ˆè¸å®žçš„äººï¼Œä»–æ˜¯å†™javaçš„ï¼ŒåŠŸåŠ›å¾ˆæ·±ï¼Œé€»è¾‘å¾ˆä¸¥è°¨ã€‚å’Œä»–ä¸€èµ·åƒé¥­çš„æ—¶å€™ï¼Œå¾ˆå–œæ¬¢å’Œæˆ‘ä»¬â€˜è®²è¯¾â€™ã€‚ å½“ç„¶ï¼Œåˆ†äº«ä¼šå…¶ä»–è®²httpåè®®ä¸æ˜¯ä»–çš„çœŸæ­£ç›®çš„ï¼Œä»–å»¶ä¼¸å‡ºæ¥çš„ç›¸å…³æ¡ˆä¾‹æ‰æ˜¯é‡ç‚¹ã€‚è‰¾ç¥žè®²åè®®ï¼Œæ˜¯æƒ³è®©æˆ‘ä»¬è¦æ³¨æ„åˆ†æ¸…ä»€ä¹ˆæ˜¯æ ‡å‡†ï¼Œä»€ä¹ˆæ˜¯æŠ•æœºã€‚å·¥ä½œä¸­è¦çŸ¥é“é”™çš„ä¸ºä»€ä¹ˆé”™ï¼Œä¹Ÿè¦çŸ¥é“å¯¹çš„ä¸ºä»€ä¹ˆå¯¹ï¼Œè¦æŠŠç¨‹åºçš„è¿è¡ŒæŠŠæŽ§åœ¨è‡ªå·±æ‰‹ä¸­ï¼Œä¸èƒ½å­˜åœ¨ä¸ç¡®å®šæ€§ã€‚å¦åˆ™åŸ‹äº†å‘ï¼Œä¸€æ—¦å‡ºçŽ°é—®é¢˜ï¼Œå°±è¦èŠ±æ›´å¤šçš„æ—¶é—´åŽ»æŽ’æŸ¥ã€‚ æˆ‘ä¹Ÿæ˜¯è§è¿‡å¤ªå¤šç¨‹åºå‘˜ï¼Œå¯¹ä¸€äº›é—®é¢˜ååˆ†é©¬è™Žï¼Œé”™äº†å°±ä¸æ–­æŽ¨è„±ï¼Œæœ‰æ—¶å€™bugè¡¥ä¸Šäº†å´ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæ®Šä¸çŸ¥å¯èƒ½åŸ‹äº†æ›´å¤§çš„å‘ã€‚ è‰¾ç¥žæ˜¯ä¸ªå¾ˆé è°±çš„ç¨‹åºå‘˜]]></content>
  </entry>
  <entry>
    <title><![CDATA[javascriptèŽ·å–æœ¬å‘¨å’Œæœ¬æœˆæˆ–ä»»æ„æœˆçš„æ—¶é—´æ®µ]]></title>
    <url>%2F2015%2F10%2F30%2Fjavascript%E5%8F%96%E6%9C%AC%E5%91%A8%E5%92%8C%E6%9C%AC%E6%9C%88%E6%88%96%E4%BB%BB%E6%84%8F%E6%9C%88%E7%9A%84%E6%97%B6%E9%97%B4%E6%AE%B5%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘æœ‰åŠŸèƒ½ä»Žä¸¤ä¸ªæ—¶é—´æ®µå˜æˆå•ä¸ªselecté€‰æ‹©äº†ï¼Œä½†åŽç«¯ä¸æƒ³æ”¹æŽ¥å£ã€‚åªå¥½é€‚é…ä¸€ä¸‹ï¼ŒæŠŠä»Šå¤©ã€æœ¬å‘¨ã€æœ¬æœˆåŠè¿‡åŽ»çš„æœˆä»½è½¬æ¢ä¸€ä¸‹ã€‚ é¦–å…ˆï¼Œæ›´æ”¹ä¸€ä¸‹selectèœå•ï¼ŒåŠ¨æ€å–å‡ºè¿‡åŽ»çš„æœˆä»½ï¼Œæ·»åŠ optionsã€‚ var SearchTimer = [&apos;å…¨éƒ¨&apos;, &apos;ä»Šå¤©&apos;, &apos;æœ¬å‘¨&apos;, &apos;æœ¬æœˆ&apos;]; (function(){ var Month = new Date().getMonth(); for(; Month &gt; 0; Month--){ SearchTimer.push(Month + &apos;æœˆä»½&apos;); } })(); æŽ¥ä¸‹æ¥å°±æ˜¯è¦æŠŠå„ä¸ªoptionsåœ¨é€‰æ‹©çš„æ—¶å€™è½¬æ¢æˆstartTimeå’ŒendTime. switch(timer){ case &apos;å…¨éƒ¨&apos;: break; case &apos;ä»Šå¤©&apos;: break; case &apos;æœ¬å‘¨&apos;: break; case &apos;æœ¬æœˆ&apos;: break; default: } ç„¶åŽæ˜¯æ—¶é—´çš„å¤„ç†ï¼Œå…ˆéœ€è¦æ ¼å¼åŒ–æ—¶é—´ï¼Œæ³¨æ„è¡¥é›¶ï¼Œæ ¼å¼ä¸ºyyyy-MM-dd HH:mm:ssã€‚ function formatDate(date) { var myyear = date.getFullYear(); var mymonth = date.getMonth()+1; var myweekday = date.getDate(); var myhours = date.getHours(); var myminutes = date.getMinutes(); var myseconds = date.getSeconds(); if(mymonth &lt; 10){mymonth = &quot;0&quot; + mymonth; } if(myweekday &lt; 10){myweekday = &quot;0&quot; + myweekday; } if(myhours &lt; 10){myhours = &quot;0&quot; + myhours; } if(myminutes &lt; 10){myminutes = &quot;0&quot; + myminutes; } if(myseconds &lt; 10){myseconds = &quot;0&quot; + myseconds; } return (myyear+&quot;-&quot;+mymonth + &quot;-&quot; + myweekday+&quot; &quot;+myhours+&quot;:&quot;+myminutes+&quot;:&quot;+myseconds); } ä»Šå¤©çš„æ—¶é—´å¾ˆå¥½èŽ·å–ï¼Œç„¶åŽæ˜¯æœ¬å‘¨æ—¶é—´ï¼š var now = new Date(); //å½“å‰æ—¥æœŸ var nowDayOfWeek = now.getDay(); //ä»Šå¤©æœ¬å‘¨çš„ç¬¬å‡ å¤© var nowDay = now.getDate(); //å½“å‰æ—¥ var nowMonth = now.getMonth(); //å½“å‰æœˆ var nowYear = now.getFullYear(); //å½“å‰å¹´ function getWeekStartDate() { //èŽ·å¾—æœ¬å‘¨çš„å¼€ç«¯æ—¥æœŸ var weekStartDate = new Date(nowYear, nowMonth, nowDay - nowDayOfWeek); return formatDate(weekStartDate); //è°ƒç”¨ä¸Šé¢çš„æ—¶é—´æ ¼å¼åŒ– } function getWeekEndDate() { //èŽ·å¾—æœ¬å‘¨çš„åœæ­¢æ—¥æœŸ var weekEndDate = new Date(nowYear, nowMonth, nowDay + (6 - nowDayOfWeek)); return formatDate(weekEndDate); } ç„¶åŽæ˜¯æœ¬æœˆæ—¶é—´ï¼Œä½†é¦–å…ˆéœ€è¦çŸ¥é“æœ¬æœˆæœ‰å¤šå°‘å¤©ï¼š function getMonthDays(myMonth){ //èŽ·å¾—æŸæœˆçš„å¤©æ•° myMonth = parseInt(myMonth); //è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œæœ‰æ—¶å€™ä¼ è¿›æ¥çš„å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼ŒåŽé¢+1çš„æ—¶å€™ä¼šå˜æˆå­—ç¬¦ä¸²ç›¸è¿ž var monthStartDate = new Date(nowYear, myMonth, 1); //å½“æœˆ1å·çš„æ—¶é—´æˆ³ var monthEndDate = new Date(nowYear, myMonth + 1, 1);//ä¸‹æœˆ1å·çš„æ—¶é—´æˆ³ var days = (monthEndDate - monthStartDate)/(1000 * 60 * 60 * 24);//æ±‚å·®å³å¯å–å¾—æŸæœˆå¤©æ•° return days; } function getMonthStartDate(){ //èŽ·å¾—æœ¬æœˆçš„å¼€ç«¯æ—¥æœŸ var monthStartDate = new Date(nowYear, nowMonth, 1); return formatDate(monthStartDate); } function getMonthEndDate(){ //èŽ·å¾—æœ¬æœˆçš„åœæ­¢æ—¥æœŸ var monthEndDate = new Date(nowYear, nowMonth, getMonthDays(nowMonth)); return formatDate(monthEndDate); } ç„¶åŽæ˜¯è¿‡åŽ»ä»»æ„æœˆä»½çš„1å·å’Œæœ€åŽä¸€å¤©ï¼š var theMon = timer.replace(/(æœˆä»½)$/, &apos;&apos;)-1; //å…ˆåŒ¹é…å‡ºselectçš„æœˆä»½ï¼Œå¦‚ï¼šâ€˜9æœˆä»½â€™ï¼Œä½†getMonth()æ˜¯ä»Ž0å¤©å§‹çš„ï¼Œæ‰€ä»¥éœ€è¦å‡1ï¼Œä¹Ÿæ­£å¥½å¯ä»¥è½¬æ¢æˆæ•´åž‹ startTime = formatDate(new Date(nowYear, theMon, 1)); endTime = formatDate(new Date(nowYear, theMon, getMonthDays(theMon)));//æŸæœˆæœ‰å‡ å¤©ï¼Œæœ€åŽä¸€å¤©å°±æ˜¯å‡ å¤©ã€‚ æ‰€ä»¥æœ€åŽè¿”å›žæ—¶é—´æ®µï¼š var startTime, endTime; endTime = formatDate(new Date()); switch(timer){ case &apos;å…¨éƒ¨&apos;: startTime = undefined; endTime = undefined; break; case &apos;ä»Šå¤©&apos;: startTime = formatDate(new Date(nowYear, nowMonth, nowDay)); break; case &apos;æœ¬å‘¨&apos;: startTime = getWeekStartDate(); break; case &apos;æœ¬æœˆ&apos;: startTime = getMonthStartDate(); break; default: var theMon = timer.replace(/(æœˆä»½)$/, &apos;&apos;)-1; startTime = formatDate(new Date(nowYear, theMon, 1)); endTime = formatDate(new Date(nowYear, theMon, getMonthDays(theMon))); break; } return { startTime: startTime, endTime: endTime } è‡³æ­¤å°±è½¬æ¢å®Œæ¯•ã€‚ å½“ç„¶ï¼Œå¦‚æžœæœ‰éœ€è¦ï¼Œè¿˜å¯èƒ½èŽ·å–å­£åº¦ã€‚ function getQuarterStartMonth(){ //èŽ·å¾—æœ¬å­£åº¦çš„å¼€ç«¯æœˆä»½ var quarterStartMonth = 0; if(nowMonth&lt;3){quarterStartMonth = 0; }//åˆ¤æ–­å±žäºŽç¬¬ä¸€å­£åº¦ if(2&lt;nowMonth &amp;&amp; nowMonth&lt;6){quarterStartMonth = 3; } if(5&lt;nowMonth &amp;&amp; nowMonth&lt;9){quarterStartMonth = 6; } if(nowMonth&gt;8){quarterStartMonth = 9; } return quarterStartMonth; } åªè¦åˆ¤æ–­å±žäºŽå“ªä¸€å­£åº¦ï¼Œå³å¯çŸ¥é“å¼€ç«¯æœˆä»½å’Œç»“æŸæœˆä»½ã€‚]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[angularJSè‡ªå®šä¹‰æŒ‡ä»¤]]></title>
    <url>%2F2015%2F10%2F17%2Fangular%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[æŒ‡ä»¤å¯ä»¥ç®€å•ç†è§£æˆç‰¹å®šDOMå…ƒç´ ä¸Šæ‰§è¡Œçš„å‡½æ•°ï¼Œå®ƒå¯ä»¥æ‹“å±•å…ƒç´ çš„åŠŸèƒ½ã€‚ ä¸€ä¸ªå®šä¹‰æŒ‡ä»¤çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š angular.module(&apos;myApp&apos;, []) .direcitve(&apos;myDirective&apos;, function(){ return { //æŒ‡ä»¤çš„é…ç½®é¡¹ } }); directive() æ–¹æ³•å¯ä»¥æŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼š nameæŒ‡ä»¤çš„åå­—ï¼Œå¦‚ï¼š myDirectiveã€‚åœ¨DOMä¸­å¯ä»¥è¿™æ ·ä½¿ç”¨: `&lt;my-directive&gt;&lt;/my-directive&gt;`;æˆ–è€… `&lt;div my-directive&gt;&lt;/div&gt;`; å®šä¹‰æŒ‡ä»¤æ—¶çš„åç§°ç”¨é©¼å³°å‘½åï¼Œä½¿ç”¨æ—¶ç”¨ä¸­åˆ’çº¿æ–¹å¼ã€‚ functionè¿™ä¸ªå‡½æ•°å¯ä»¥è¿”å›žä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚ä¸Šé¢ï¼›æˆ–è€…ç›´æŽ¥è¿”å›žä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šè¢«æŽ¥æ”¶æˆ postLink å‡½æ•°ã€‚ æŒ‡ä»¤çš„è¿”å›žå‡½æ•°çš„æ‰€æœ‰é…ç½®é¡¹å…ˆçœ‹çœ‹æŒ‡ä»¤çš„æ‰€æœ‰å‚æ•°é…ç½®ï¼š angular.module(&apos;myApp&apos;, []) .directive(&apos;myDirective&apos;, function(){ return { restrict: string,//æŒ‡ä»¤åœ¨DOMä¸­çš„å£°æ˜Žå½¢å¼å­—ç¬¦ä¸²ï¼Œé»˜è®¤å€¼æ˜¯â€˜Aâ€™ proiority: number,//ä¼˜å…ˆçº§ï¼Œé»˜è®¤å€¼0 terminal: boolean,//æ˜¯å¦åœæ­¢è¿è¡Œå½“å‰å…ƒç´ æ¯”æœ¬æŒ‡ä»¤ä¼˜å…ˆçº§ä½Žçš„æŒ‡ä»¤ template: string or function,//æ¨¡æ¿ æˆ– è¿”å›žæ¨¡æ¿çš„å‡½æ•° templateUrl: string,//æ¨¡æ¿æ–‡ä»¶çš„é“¾æŽ¥ replace: boolean or string,//trueä¸ºæ›¿æ¢ï¼Œé»˜è®¤å€¼falseä¸ºæ’å…¥åˆ°æŒ‡ä»¤å…ƒç´ å†…éƒ¨ scope: boolean or object,//æŒ‡ä»¤ä½œç”¨åŸŸ transclude: boolean,//åµŒå…¥ controller: string or function(scope, element, attrs, transcluude, otherInjectables){}, require: string, link: function(scope, iElement, iAttrs){}, compile: function(tElement, tAttrs, transclude){ return { pre: function(scope, iElement, iAttrs, controller){}, post: function(scope, iElement, iAttrs, controller){} } return function postLink(){} } } }); 1. restrictå¯é€‰å€¼ï¼š E(å…ƒç´ ï¼Œç”¨äºŽç‹¬ç«‹çš„æŒ‡ä»¤å•å…ƒï¼Œæ„å›¾è¡¨è¾¾æ›´æ˜Žç¡®) &lt;my-directive&gt;&lt;/my-directive&gt; A(å±žæ€§ï¼Œé»˜è®¤å€¼, æœ€å¸¸ç”¨ï¼Œå…¼å®¹æ€§æœ€å¥½) &lt;div my-directive=&apos;expression&apos;&gt;&lt;/div&gt; C(ç±»å) &lt;div class=&quot;my-directive: expression&quot;&gt;&lt;/div&gt; M(æ³¨é‡Šï¼Œå°½é‡é¿å…ä½¿ç”¨) &lt;-- directive: my-directive expression --&gt; 2. priorityé»˜è®¤å€¼æ˜¯0ï¼›ä¼˜å…ˆçº§é«˜çš„æŒ‡ä»¤æ€»æ˜¯ä¼˜å…ˆæ‰§è¡Œã€‚ä¼˜å…ˆçº§ç›¸åŒçš„æŒ‡ä»¤ï¼Œå…ˆå£°æ˜Žçš„å…ˆæ‰§è¡Œã€‚ 3. terminalè®¾ç½®ä¸ºtrue,åˆ™åœæ­¢è¿è¡Œå½“å‰å…ƒç´ ä¸Šæ¯”æœ¬æŒ‡ä»¤ä¼˜å…ˆçº§ä½Žçš„æŒ‡ä»¤ï¼Œä½†ä¼˜å…ˆçº§ç›¸åŒçš„ä»ç„¶ä¼šæ‰§è¡Œã€‚ 4. templateå€¼å¯ä»¥æ˜¯ä»¥ä¸‹ç±»åž‹ï¼š a. æ¨¡æ¿å­—ç¬¦ä¸² b. ä¸€ä¸ªå¯ä»¥æŽ¥å—ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªä»£è¡¨æ¨¡æ¿çš„å­—ç¬¦ä¸² 5. templateUrlå€¼å¯ä»¥æ˜¯ä»¥ä¸‹ç±»åž‹ï¼š a. å¤–éƒ¨htmlæ–‡ä»¶è·¯å¾„çš„å­—ç¬¦ä¸² b. ä¸€ä¸ªå¯ä»¥æŽ¥å—ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªå¤–éƒ¨HTMLæ–‡ä»¶è·¯å¾„çš„å­—ç¬¦ä¸² 6. replaceé»˜è®¤å€¼false. å€¼ä¸º true æ—¶ï¼Œæ¨¡æ¿ä¼šè¢«å½“ä½œå­å…ƒç´ æ’å…¥åˆ°è°ƒç”¨æ­¤æŒ‡ä»¤çš„å…ƒç´ å†…éƒ¨ 7. scopeå¯é€‰å€¼ï¼š false: é»˜è®¤å€¼ï¼Œç›´æŽ¥è°ƒç”¨ç›¸åŒçš„ä½œç”¨åŸŸå¯¹è±¡ï¼› true: ä»Žå½“å‰ä½œç”¨åŸŸå¯¹è±¡ç»§æ‰¿ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸå¯¹è±¡ï¼› {}[object]: åˆ›å»ºä¸€ä¸ªåŒå½“å‰ä½œç”¨åŸŸç›¸éš”ç¦»çš„ä½œç”¨åŸŸå¯¹è±¡ã€‚ éš”ç¦»ä½œç”¨åŸŸå…·æœ‰éš”ç¦»ä½œç”¨åŸŸçš„æŒ‡ä»¤æœ€ä¸»è¦çš„ä½¿ç”¨åœºæ™¯æ˜¯åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶ï¼Œç»„ä»¶å¯ä»¥åœ¨æœªçŸ¥ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥é¿å…æ±¡æŸ“æ‰€å¤„çš„å¤–éƒ¨ä½œç”¨åŸŸæˆ–ä¸ç»æ„åœ°æ±¡æŸ“å†…éƒ¨ä½œç”¨åŸŸã€‚ ç»‘å®šç­–ç•¥ä½¿ç”¨äº†éš”ç¦»ä½œç”¨åŸŸåŽï¼ŒæŒ‡ä»¤çš„æ¨¡æ¿å°±æ— æ³•è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸäº†ã€‚ä½†ä½¿ç”¨æ— æ•°æ®çš„éš”ç¦»ä½œç”¨åŸŸå¹¶ä¸å¸¸è§ã€‚AngularJS æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥å°†æŒ‡ä»¤å†…éƒ¨çš„éš”ç¦»ä½œç”¨åŸŸåŒå¤–éƒ¨ä½œç”¨åŸŸè¿›è¡Œæ•°æ®ç»‘å®šã€‚ æœ¬åœ°ä½œç”¨åŸŸå±žæ€§ï¼š@ (or @attr) ä½¿ç”¨@ç¬¦å·å°†æœ¬åœ°ä½œç”¨åŸŸåŒDOMå±žæ€§çš„å€¼è¿›è¡Œç»‘å®šã€‚æŒ‡ä»¤å†…éƒ¨ä½œç”¨åŸŸå¯ä»¥ä½¿ç”¨å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ã€‚ js myApp.controller(&apos;myController&apos;, [&apos;$scope&apos;, function($scope){ $scope.btnText = &apos;æŒ‰é’®&apos;; $scope.validate= &apos;1234&apos;; $scope.submit = function(err){ console.log(err); } }]); myApp.directive(&apos;my-btn&apos;, function(){ return { restrict: &apos;EA&apos;, scope: { text: &apos;@btnText&apos;//keyæ˜¯åœ¨templateé‡Œä½¿ç”¨çš„å˜é‡ï¼Œvalæ˜¯åœ¨ä½¿ç”¨æŒ‡ä»¤æ—¶æ‰€ç»‘å®šçš„attrã€‚è‹¥@ç¬¦å·åŽä¸æŒ‡å®šåç§°ï¼Œåˆ™é»˜è®¤ç»‘å®šä¸ºé”®å&apos;text&apos; }, replace: true, template: &apos;&lt;button&gt;{{text}}&lt;/button&gt;&apos;//è¿™é‡Œçš„{{text}}æ­£æ˜¯scopeçš„text. } }); html &lt;form action=&quot;/&quot;&gt; &lt;input type=&quot;text&quot;&gt; &lt;my-btn btn-text=&quot;btnText&quot;&gt;&lt;/my-btn&gt;//è¿™é‡Œçš„å±žæ€§â€˜btn-textâ€™æ­£æ˜¯æŒ‡ä»¤çš„â€˜@btnTextâ€™,å±žæ€§å€¼â€˜btnTextâ€™æ­£æ˜¯çˆ¶çº§ä½œç”¨åŸŸçš„â€˜$scope.btnTextâ€™ &lt;/form&gt; åŒå‘ç»‘å®šï¼š = (or =attr) å¯ä»¥å°†æœ¬åœ°ä½œç”¨åŸŸä¸Šçš„å±žæ€§åŒçˆ¶çº§ä½œç”¨åŸŸä¸Šçš„å±žæ€§è¿›è¡ŒåŒå‘çš„æ•°æ®ç»‘å®šã€‚ ä¾‹ï¼š js,controlleråŒä¸Šä¸€ä¾‹å­,å¦‚æžœç†è§£ä¸Šé¢çš„ä¾‹å­ï¼Œè¿™é‡Œä¹Ÿæ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œåªæ˜¯ç»‘å®šçš„ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯åŒå‘æ•°æ®ç»‘å®šã€‚ myApp.directive(&apos;myInput&apos;, function(){ return { restrict: &apos;A&apos;, scope:{ val: &apos;=value&apos;//keyä¸ºtemplateé‡Œçš„æ•°æ®æ¨¡åž‹ï¼Œ&apos;value&apos;æ˜¯htmlé‡Œçš„attr. }, template: &apos;&lt;input type=&quot;text&quot; ng-model=&quot;val&quot;&gt;&apos; } }); html &lt;form action=&quot;/&quot;&gt; &lt;div my-input value=&quot;validate&quot;&gt;&lt;/div&gt;//æœ¬åœ°ä½œç”¨åŸŸçš„å±žæ€§valä¸Žçˆ¶çº§ä½œç”¨åŸŸçš„å±žæ€§validateè¿›è¡ŒåŒå‘æ•°æ®ç»‘å®š &lt;/form&gt; çˆ¶çº§ä½œç”¨åŸŸç»‘å®šï¼š &amp; (or &amp;attr) å¯ä»¥å¯¹çˆ¶çº§ä½œç”¨åŸŸè¿›è¡Œç»‘å®šï¼Œå¯ä»¥è°ƒç”¨çˆ¶æ–¹æ³•ã€‚æ„å‘³ç€å¯¹è¿™ä¸ªå€¼è¿›è¡Œè®¾ç½®æ—¶ä¼šç”Ÿæˆä¸€ä¸ªæŒ‡å‘çˆ¶çº§ä½œç”¨åŸŸçš„åŒ…è£…å‡½æ•°ã€‚ js myApp.directive(&apos;myError&apos;, function(){ return { restrict: &apos;A&apos;, scope: { validate: &apos;&amp;check&apos; }, template: &apos;&lt;input type=&quot;text&quot; ng-model=&quot;text&quot;&gt;&apos;+ &apos;&lt;button ng-click=&apos;validate({name: text})&apos;&gt;&lt;/button&gt;&apos;//ä¼ é€’å‚æ•°éœ€è¦ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œnameæ˜¯å‚æ•°åï¼Œtextæ˜¯å‚æ•°å€¼ã€‚ } }); html &lt;div&gt; &lt;div my-error check=&quot;submit(name)&quot;&gt;&lt;/div&gt; &lt;div my-error check=&quot;submit(name)&quot;&gt;&lt;/div&gt;//å› ä¸ºæ˜¯éš”ç¦»ä½œç”¨åŸŸï¼Œä»–ä»¬ä¹‹é—´çš„å€¼æ˜¯ä¸ä¼šäº’ç›¸å½±å“çš„ï¼Œåªæ˜¯å…±ç”¨çˆ¶æ–¹æ³•ã€‚ &lt;/div&gt; è¦è°ƒç”¨ä¸€ä¸ªå¸¦æœ‰å‚æ•°çš„çˆ¶æ–¹æ³•ï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„keyæ˜¯å‚æ•°åç§°ï¼Œvalæ˜¯è¦ä¼ é€’ç»™å‚æ•°çš„å†…å®¹ 8. transcludetranscludeæ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œé»˜è®¤å€¼æ˜¯false, å½“å€¼ä¸ºtrueæ—¶ï¼ŒangularJSä¼šå°†ä»ŽDOMå…ƒç´ ä¸­èŽ·å–çš„å†…å®¹æ”¾åˆ°å®ƒå‘çŽ°ng-transcludeæŒ‡ä»¤çš„åœ°æ–¹ï¼Œå¦‚ï¼š &lt;ul sidebox&gt; &lt;li&gt;first&lt;/li&gt; &lt;li&gt;second&lt;/li&gt; &lt;/ul&gt; angular.module(&apos;myApp&apos;, []) .directive(&apos;sidebox&apos;, function(){ return { scope: { title: &apos;@&apos; }, transclude: true, template: &apos;&lt;div class=&quot;sidebox&quot;&gt;&lt;/div&gt;&apos;+ &apos;&lt;div class=&quot;content&quot; ng-tranclude&gt;&lt;/div&gt;&apos; } }); åªæœ‰å¸Œæœ›åˆ›å»ºä¸€ä¸ªå¯ä»¥åŒ…å«ä»»æ„å†…å®¹çš„æŒ‡ä»¤æ—¶ï¼Œæ‰ä½¿ç”¨transclude: trueã€‚ï¼Œå…¸åž‹çš„ä¾‹å­æ˜¯æ¨¡æ€æ¡†æˆ–å¯¼èˆªæ ã€‚ 9. controllerå€¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ªå‡½æ•°ã€‚ string: å½“è®¾ç½®ä¸ºå­—ç¬¦ä¸­æ—¶ï¼ŒæŒ‡ä»¤ä¼šæŸ¥æ‰¾æ³¨å†Œåœ¨åº”ç”¨ä¸­çš„åŒåæŽ§åˆ¶å™¨ã€‚ function: ç›´æŽ¥é€šè¿‡åŒ¿åæž„é€ å‡½æ•°çš„æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ªå†…è”çš„æŽ§åˆ¶å™¨ã€‚ æŽ§åˆ¶å™¨ä¸»è¦æ˜¯ç”¨æ¥æä¾›å¯ä»¥æŒ‡ä»¤é—´å¤ç”¨çš„è¡Œä¸ºã€‚å¯ä»¥çš„å°†å½“å‰æŒ‡ä»¤çš„APIæš´éœ²ç»™å…¶ä»–çš„æŒ‡ä»¤ä½¿ç”¨ã€‚å¦‚ï¼š angular.modue(&apos;myApp&apos;, []) .directive(&apos;inputForm&apos;, function(){ return { restrict: &apos;EA&apos;, controller: function($scope){ $scope.input = &apos;æ‰‹æœºå·&apos;; this.submit = function(){//é€šè¿‡thisæš´éœ²æŽ¥å£ //do something... } } } }); ä»»æ„çš„æœåŠ¡åŒæ ·å¯ä»¥è¢«ä¼ é€’ç»™controllerã€‚å…¶ä¸­æœ‰ä¸€äº›ç‰¹æ®Šçš„æœåŠ¡ï¼š $scope ä¸ŽæŒ‡ä»¤å…ƒç´ ç›¸å…³è”çš„å½“å‰ä½œç”¨åŸŸ $element å½“å‰æŒ‡ä»¤å¯¹åº”çš„å…ƒç´  $attrs å½“å‰å…ƒç´ çš„å±žæ€§ç»„æˆçš„å¯¹è±¡ $transclude transcludeé“¾æŽ¥å‡½æ•°æ˜¯å®žé™…è¢«æ‰§è¡Œç”¨æ¥å…‹éš†å…ƒç´ å’Œæ“ä½œDOMçš„å‡½æ•° 10. controllerAscontrollerAsç”¨æ¥è®¾ç½®æŽ§åˆ¶å™¨åˆ«åï¼Œä»¥æ­¤ä¸ºåå‘å¸ƒæŽ§åˆ¶å™¨ï¼Œå¹¶ä¸”ä½œç”¨åŸŸå¯ä»¥è®¿é—®controllerAsã€‚è¿™æ ·å¯ä»¥åœ¨è§†å›¾ä¸­å¼•ç”¨æŽ§åˆ¶å™¨ï¼Œç”šè‡³æ— éœ€æ³¨å…¥$scopeã€‚ä¾‹ï¼š angular.module(&apos;myApp&apos;, []) .directive(&apos;myDirective&apos;, function(){ return { restrict: &apos;A&apos;, template: &apos;&lt;h4&gt;{{myController.msg}}&lt;/h4&gt;&apos;,//å¯ä»¥åœ¨tplä¸­ç›´æŽ¥è®¿é—®controller controllerAs: &apos;myController&apos;, contrller: function(){ this.msg = &apos;Hello&apos;; } } }); &lt;div my-directive&gt;&lt;/div&gt; åˆä¾‹ï¼š angular.module(&apos;myApp&apos;, []) .controller(&apos;myController&apos;, function(){ this.msg = &apos;robin&apos;; }); &lt;div ng-controller=&quot;myController as main&quot;&gt;{{main.robin}}&lt;/div&gt; 11. requireå…¶å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°ç»„ï¼Œå­—ç¬¦ä¸²æˆ–æ•°ç»„å…ƒç´ ä»£è¡¨å¦ä¸ªä¸€ä¸ªæŒ‡ä»¤çš„åå­—ã€‚require ä¼šå°†æŒ‡ä»¤æŽ§åˆ¶å™¨æ³¨å…¥åˆ°å½“å‰çš„æŒ‡ä»¤ä¸­ï¼Œå¹¶ä½œä¸ºå½“å‰æŒ‡ä»¤çš„é“¾æŽ¥å‡½æ•°çš„ç¬¬å››ä¸ªå‚æ•°ã€‚ ç»“åˆ9.controllerçš„ä¾‹å­ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨ angular.module(&apos;myApp&apos;, []) .directive(&apos;otherForm&apos;, function(){ return { restrict: &apos;A&apos;, require: &apos;^?inputForm&apos;, link: function(scope, element, attrs, ctrl){ ctrl.submit(); } } }); å¦‚æžœæ˜¯æ•°ç»„ï¼š angular.module(&apos;myApp&apos;, []) .directive(&apos;otherForm&apos;, function(){ return { restrict: &apos;A&apos;, require: [?^inputForm, inputForm2], link: function(scope, element, attrs, ctrl){ ctrl[0].submit(); ctrl[1].api(); } } }); requireå‰ç¼€ï¼š â€˜?â€™ å¦‚æžœåœ¨å½“å‰æŒ‡ä»¤ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€é¢è¦çš„æŽ§åˆ¶å™¨ï¼Œä¼šå°†nullä½œä¸ºlinkçš„ç¬¬å››ä¸ªå‚æ•°ï¼› â€˜^â€™ æŒ‡ä»¤ä¼šåœ¨ä¸Šæ¸¸çš„æŒ‡ä»¤é“¾ä¸­æŸ¥æ‰¾requireå‚æ•°æ‰€æŒ‡å®šçš„æŽ§åˆ¶å™¨ï¼› â€˜?^â€™ å‰ä¸¤ä¸ªé€‰é¡¹çš„ç»„åˆï¼› æ²¡æœ‰å‰ç¼€ æŒ‡ä»¤å°†åœ¨åŒçº§ä½œç”¨åŸŸæŸ¥æ‰¾æ‰€éœ€æŽ§åˆ¶å™¨ï¼Œå¦‚æžœæ²¡æœ‰æ‰¾åˆ°ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ 12. compilecompileé€‰é¡¹å¯ä»¥è¿”å›žä¸€ä¸ªå¯¹è±¡æˆ–å‡½æ•°ã€‚ compileå‡½æ•°å¯ä»¥ç”¨æ¥åœ¨æŒ‡ä»¤å’Œå®žæ—¶æ•°æ®è¢«æ”¾åˆ°DOMä¸­ä¹‹å‰è¿›è¡ŒDOMæ“ä½œï¼Œåœ¨è¿™é‡Œè¿›è¡Œæ·»åŠ å’Œåˆ é™¤èŠ‚ç‚¹ç­‰DOMæ“ä½œæ˜¯å®‰å…¨çš„ã€‚ compileä¸Žlinkå‡½æ•°æ˜¯äº’æ–¥çš„ã€‚å¦‚æžœåŒæ—¶è®¾ç½®ï¼Œcompileçš„è¿”å›žå‡½æ•°ä¼šè¢«å½“ä½œé“¾æŽ¥å‡½æ•°ï¼Œlinkå‡½æ•°ä¼šè¢«å¿½ç•¥ã€‚ compile: function(tEle, tAttrs, transcludeFn){ //...tEleä»£è¡¨æœªç»‘å®šäº‹ä»¶çš„DOMå…ƒç´  } 13. linklinkå‡½æ•°ä¼šç»å¸¸è¢«ä½¿ç”¨ã€‚è´Ÿè´£è®¾ç½®äº‹ä»¶ç›‘å¬å™¨ã€ç›‘å¬æ•°æ®å˜åŒ–å’Œå®žæ—¶çš„æ“ä½œDOMã€‚ å¦‚æžœæŒ‡ä»¤å¾ˆç®€å•ï¼Œå¯ä»¥ç›´æŽ¥ä»Žå·¥åŽ‚å‡½æ•°è¿”å›žä¸€ä¸ªå‡½æ•°æ¥ä»£æ›¿ã€‚å¦‚ï¼š angular.module(&apos;myApp&apos;, []) .directive(&apos;myDirective&apos;, function(){ return { pre: function(tElement, tAttrs, transclude){}, post: function(scope, iElement, iAttrs, controller){} } }); angular.module(&apos;myApp&apos;, []) .directive(&apos;myDirective&apos;, function(){ return { link: function(scope, ele, attrs){ return { pre: function(tElement, tAttrs, transclude){}, post: function(scope, iElement, iAttrs, controller){} } } } });]]></content>
      <categories>
        <category>angularJS</category>
      </categories>
      <tags>
        <tag>angularJS</tag>
        <tag>æŒ‡ä»¤</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitåˆ†æ”¯]]></title>
    <url>%2F2015%2F10%2F10%2Fgit%E5%88%86%E6%94%AF%2F</url>
    <content type="text"><![CDATA[gitåˆ†æ”¯å¯¹äºŽæˆ‘ä»¬å¹³å¸¸å¼€å‘æ–°åŠŸèƒ½ï¼Œä¿®å¤bugç­‰æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚ä¸‹é¢æ˜¯gitåˆ†æ”¯çš„å¸¸ç”¨å‘½ä»¤ï¼š åˆ†æ”¯çš„æ–°å»ºä¸Žåˆ‡æ¢ $ git checkout -b version2.0 è¿™ç›¸å½“äºŽæ‰§è¡Œä¸‹é¢è¿™ä¸¤æ¡å‘½ä»¤ï¼š $ git branch version2.0 $ git checkout version2.0 åˆ†æ”¯çš„åˆå¹¶ $ git checkout master $ git merge version2.0 åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ï¼ŒæŠŠåˆ†åŽ»version2.0åˆå¹¶åˆ°ä¸»åˆ†æ”¯ åˆ†æ”¯çš„åˆ é™¤ $ git branch -d verdion2.0 å¦‚æžœåˆ†æ”¯åŠŸèƒ½å·²ç»åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼Œåˆ†æ”¯å°±æ²¡æœ‰ç”¨äº†ï¼Œå¯ä»¥åˆ é™¤ã€‚ åˆå¹¶åˆ†æ”¯çš„å†²çª åˆå¹¶å¹¶ä¸æ€»æ˜¯é¡ºåˆ©çš„ï¼Œç‰¹åˆ«æ˜¯å¤šäººåˆä½œçš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“äº§ç”Ÿå†²çªã€‚ &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD &lt;div id=&quot;footer&quot;&gt;copyright&lt;/div&gt; ======= &lt;div id=&quot;footer&quot;&gt; please contact us &lt;/div&gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt; version2.0 â€˜=======â€™æŠŠä¸¤ä¸ªç‰ˆæœ¬å†²çªçš„å†…å®¹åˆ†éš”å¼€æ¥ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™äº›æ ‡è®°éƒ½åˆ æŽ‰ï¼Œå¹¶ç•™ä¸‹åˆå¹¶åŽçš„ä»£ç ã€‚ åˆå¹¶GUIå·¥å…· å¦‚æžœå®‰è£…äº†å¯è§†åŒ–çš„åˆå¹¶å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨$ git mergetoolå‘½ä»¤æ¥è°ƒç”¨ã€‚ æŽ¨èçš„GUIåˆå¹¶å·¥å…·æœ‰å¦‚ï¼šmeld, kdiff3 å¯ä»¥è¿™æ ·è°ƒç”¨æŒ‡å®šçš„å·¥å…·ï¼š$ git mergetool -t meld ä¹Ÿå¯ä»¥é…ç½®é»˜è®¤å·¥å…·ï¼š $ git config --global merge.tool kdiff3]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gulp 4.0çš„å˜åŒ–]]></title>
    <url>%2F2015%2F10%2F09%2Fgulp-4.0%2F</url>
    <content type="text"><![CDATA[å‡çº§æ—¥å¿—å…ˆæ¥çœ‹çœ‹æ–°ç‰ˆæœ‰ä»€ä¹ˆä¸åŒï¼ˆå®˜æ–¹å‡çº§æ—¥å¿—ï¼‰ï¼š æ–°çš„ä»»åŠ¡ç³»ç»Ÿï¼ˆåŸºäºŽ bachï¼Œæ›¿æ¢æŽ‰äº†åŽŸå…ˆåŸºäºŽ orchestrator çš„ä»»åŠ¡ç³»ç»Ÿï¼‰ ç§»é™¤ gulp.reset gulp.task ä¸å†æ”¯æŒä¸‰ä¸ªå‚æ•°çš„ç”¨æ³• gulp.task ç”¨å­—ç¬¦ä¸²æ³¨å†Œçš„ä»»åŠ¡å¿…é¡»æ˜¯ç›´æŽ¥åœ¨å‘½ä»¤è¡Œä¸­è°ƒç”¨çš„ä»»åŠ¡ gulp.task å¯ä»¥æŽ¥å—å•å‚æ•°è¯­æ³•ï¼Œè¿™ä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªå‘½åå‡½æ•°ï¼Œå‡½æ•°åä¼šè¢«ä½œä¸ºä»»åŠ¡å æ·»åŠ äº† gulp.series å’Œ gulp.parallel æ–¹æ³•ç”¨äºŽç»„åˆä»»åŠ¡ æ·»åŠ äº† gulp.tree æ–¹æ³•ç”¨äºŽèŽ·å–ä»»åŠ¡æ ‘ï¼Œä¼ å…¥ { deep: true } å‚æ•°å¯ä»¥å¾—åˆ°ä¸€ä¸ª archy å…¼å®¹çš„èŠ‚ç‚¹åˆ—è¡¨ æ·»åŠ äº† gulp.registry æ–¹æ³•ä»¥å®šåˆ¶æ³¨å†Œè¡¨ã€‚ æ·»åŠ äº† gulp.symlink æ–¹æ³•ï¼ŒåŠŸèƒ½å’Œ gulp.dest ä¸€è‡´ï¼Œä¸è¿‡æ˜¯ä»¥è½¯é“¾æŽ¥çš„æ–¹å¼ gulp.dest å’Œ gulp.symlink æ–¹æ³•æ·»åŠ äº† dirMode å‚æ•°å…è®¸å¯¹ç›®æ ‡ç›®å½•æ›´å¥½åœ°æŽ§åˆ¶ gulp.src æŽ¥æ”¶çš„æ–‡ä»¶åŒ¹é…å­—ç¬¦ä¸²ä¼šé¡ºåºè§£é‡Šï¼Œæ‰€ä»¥ä½ å¯ä»¥å†™æˆè¿™æ · gulp.src([â€˜.jsâ€™, â€˜!b.jsâ€™, â€˜bad.jsâ€™])ï¼ˆæŽ’é™¤æ‰€æœ‰ä»¥ b å¼€å¤´çš„ JS æ–‡ä»¶ä½†æ˜¯é™¤äº† bad.jsï¼‰ gulp.src æ–¹æ³•æ·»åŠ äº† since é€‰é¡¹ï¼Œç­›é€‰åœ¨ç‰¹å®šæ—¶é—´ç‚¹ä¹‹åŽä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼ˆç”¨äºŽå¢žé‡ç¼–è¯‘ï¼‰ å°†å‘½ä»¤è¡Œåˆ†ç¦»å‡ºæ¥æˆä¸ºä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œä»¥ä¾¿èŠ‚çº¦å¸¦å®½/ç©ºé—´ã€‚ç”¨ npm install gulp -g æˆ– npm install gulp-cli -g éƒ½å¯ä»¥å®‰è£…å‘½ä»¤è¡Œï¼Œåªæ˜¯ gulp-cli ä¸åŒ…å«æ¨¡å—ä»£ç æ‰€ä»¥æ¯”è¾ƒå° å‘½ä»¤è¡Œæ·»åŠ äº† â€“tasks-json å‚æ•°ï¼Œå¯ä»¥å¯¼å‡ºæ•´ä¸ªä»»åŠ¡æ ‘ä»¥ä¾›ä»–ç”¨ å‘½ä»¤è¡Œæ·»åŠ äº† â€“verify å‚æ•°ç”¨ä»¥æ£€æŸ¥ package.json ä¸­æ˜¯å¦åŒ…å«é»‘åå•æ’ä»¶ï¼ˆè¿èƒŒå‡†åˆ™è€Œè¢«ç¦å…¥å®˜æ–¹æ’ä»¶åˆ—è¡¨çš„å¯æ€œå¨ƒä»¬ï¼‰ã€‚ å®‰è£…gulp 4.0# å¦‚æžœå®‰è£…è¿‡å…¨å±€çš„ gulp çš„è¯å…ˆå¸è½½ä¹‹ $ npm uninstall gulp -g # å®‰è£…å…¨å±€çš„ gulp 4.0 $ npm install &quot;gulpjs/gulp#4.0&quot; -g # åˆ°é¡¹ç›®ç›®å½•é‡Œåˆ æŽ‰æœ¬åœ°çš„ gulp $ npm rm gulp --save-dev # å®‰è£…æœ¬åœ°çš„ gulp 4.0 $ npm install &quot;gulpjs/gulp#4.0&quot; --save-dev gulp.task1ã€ç§»é™¤äº†gulp.taskä¼ é€’ä¸‰å‚æ•°çš„ç”¨æ³• å³è¿™ç§ç”¨æ³•å°†æŠ¥é”™ gulp.task(&apos;watch&apos;, [&apos;default&apos;], function() { // TODO // watch file }); åœ¨gulp4.0ä¹‹å‰ï¼Œè¿™ç§ç”¨æ³•å°†ä¼šä¿è¯defaultä»»åŠ¡å…ˆæ‰§è¡Œå®Œå†æ‰§è¡Œwatchä»»åŠ¡ï¼Œgulpçš„ä»»åŠ¡æµç¨‹æŽ§åˆ¶å°±æ˜¯è¿™ä¹ˆå®žçŽ°çš„ï¼Œæµç¨‹æŽ§åˆ¶å¦å¤–å¢žåŠ apiå®žçŽ°ï¼Œè¯¦çœ‹åŽé¢ã€‚ 2ã€gulp.taskåˆå¢žåŠ äº†ä¸€ç§ç”¨æ³•ï¼Œå³ä¼ é€’ä¸€ä¸ªå…·åå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå°†è‡ªåŠ¨æ³¨å†Œä»¥è¯¥å‡½æ•°åå‘½åçš„ä»»åŠ¡ function clean(){} function compile() { // do something... } gulp.task(clean); gulp.task(compile); ç­‰åŒäºŽ gulp.task(&apos;clean&apos;, function() { // do something... }); gulp.task(&apos;compile&apos;, function() { // do something... }); ä»»åŠ¡æµç¨‹æŽ§åˆ¶å¢žåŠ äº†gulp.series ä¸²è¡Œä»»åŠ¡å’Œgulp.parallel å¹¶è¡Œä»»åŠ¡ï¼Œ æ¯”åŽŸæ¥çš„ä¸‰å‚æ•°å†™æ³•è¦æ›´åŠ æ¸…æ™°ã€‚ function clean(){} function copy(){} function compile() { // do something... } gulp.task(clean); gulp.task(copy); gulp.task(compile); gulp.task(&apos;clean-build&apos;, gulp.series(&apos;clean&apos;, &apos;copy&apos;, &apos;compile&apos;)); //ä»»åŠ¡å°†æŒ‰é¡ºåºæ‰§è¡Œ gulp.task(&apos;build&apos;, gulp.parallel(&apos;copy&apos;, &apos;compile&apos;)); //ä»»åŠ¡å°†å¹¶å‘æ‰§è¡Œ åªè¦åœ¨gulpfile.jsä¸­æ²¡æœ‰ä½¿ç”¨gulp.taskä¼ ä¸‰ä¸ªå‚æ•°çš„ç”¨æ³•ï¼Œgulp 4.0ä¹Ÿæ˜¯å…¼å®¹è€ç‰ˆæœ¬çš„gulpfile.jsçš„ã€‚]]></content>
      <categories>
        <category>å‰ç«¯æž„å»º</category>
      </categories>
      <tags>
        <tag>å‰ç«¯æž„å»º</tag>
        <tag>gulp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯æ‰¹é‡åŽ‹ç¼©å›¾ç‰‡]]></title>
    <url>%2F2015%2F10%2F08%2F%E5%89%8D%E7%AB%AF%E6%89%B9%E9%87%8F%E5%8E%8B%E7%BC%A9%E5%9B%BE%E7%89%87%2F</url>
    <content type="text"><![CDATA[å‰ç«¯åˆ‡å›¾çš„æ—¶å€™ï¼Œpng å›¾ç‰‡éƒ½æ¯”è¾ƒå¤§ï¼Œä¸€ç›´ä½¿ç”¨çš„æ˜¯ Tinypng æ¥åŽ‹ç¼© png å›¾ç‰‡ï¼Œå°å›¾æ ‡spriteä¹‹åŽï¼Œå›¾ç‰‡æ•°é‡è¿˜æ˜¯è‡³å°‘åœ¨ 20 ä»¥ä¸Šï¼Œæ“ä½œç”šæ˜¯éº»çƒ¦ã€‚åŽæ¥åœ¨ä½¿ç”¨ gulp çš„æ—¶å€™ï¼Œå‘çŽ°äº†ä¸€ä¸ªæ‰¹é‡åŽ‹ç¼©å›¾ç‰‡çš„ç¥žå™¨ â€”â€” pngquant ã€‚ å…ˆæ¥çœ‹çœ‹ä¸€ä¸ª gulp æ’ä»¶ gulp-imagemin Install $ npm install --save-dev gulp-imagemin Usagevar gulp = require(&apos;gulp&apos;); var imagemin = require(&apos;gulp-imagemin&apos;); var pngquant = require(&apos;imagemin-pngquant&apos;); gulp.task(&apos;default&apos;, function () { return gulp.src(&apos;src/images/*&apos;) .pipe(imagemin({ progressive: true, svgoPlugins: [{removeViewBox: false}], use: [pngquant()] //ä½¿ç”¨äº† pngquant åŽ‹ç¼©pngå›¾ç‰‡ })) .pipe(gulp.dest(&apos;dist/images&apos;)); }); gulp-imagemin å¯ä»¥åŽ‹ç¼©å‡ ä¹Žæ‰€æœ‰å›¾ç‰‡æ ¼å¼ PNG, JPEG, GIF and SVGï¼Œå…¶ä¸­pngåŽ‹ç¼©æ˜¯ä½¿ç”¨äº† pngquant ,éœ€è¦å…ˆå¦å¤–å®‰è£…ï¼š $ npm install --save imagemin-pngquant ä½†æ˜¯ï¼Œå›¾ç‰‡å…¶å®žå¹¶ä¸éœ€è¦æ¯æ¬¡æž„å»ºéƒ½åŽ‹ç¼©ï¼Œä¸€èˆ¬åªéœ€è¦åœ¨å‘å¸ƒæˆ–æµ‹è¯•çš„æ—¶å€™ä¸€æ¬¡æ€§åŽ‹ç¼©å°±å¯ä»¥äº†ã€‚ æ‰€ä»¥ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ gulp å·¥å…·è¿›è¡Œå›¾ç‰‡åŽ‹ç¼©ï¼Œç›´æŽ¥ä½¿ç”¨ pngquantã€‚ pngquant ä½¿ç”¨èµ·æ¥ä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä¸‹è½½å¯¹åº”ç‰ˆæœ¬ï¼Œwindowsä¸‹æ·»åŠ æ–‡ä»¶ç›®å½•åˆ°ç³»ç»ŸçŽ¯å¢ƒå˜é‡ï¼Œè¿›å…¥åˆ°ç›¸åº”ç›®å½•ï¼Œç›´æŽ¥ä½¿ç”¨å‘½ä»¤è¡Œ pngquant *.png å³å¯å®ŒæˆåŽ‹ç¼©ï¼Œå¯ä»¥çœ‹åˆ°ç›®å½•ä¸‹ç”ŸæˆåŽç¼€åä¸º -fs8.png æˆ– -or8.pngçš„å›¾ç‰‡ã€‚ æŸ¥çœ‹ Readme.md é…ç½®ç›¸åº”å‚æ•° pngquantå¸¸ç”¨çš„ä¸»è¦å‚æ•°--quality min-max ç±»ä¼¼JPEGçš„è´¨é‡ï¼Œè®¾ç½®0 ~ 100 çš„å›¾ç‰‡åŽ‹ç¼©è´¨é‡ã€‚ pngquant --quality=65-80 *.png --ext new.png è®¾ç½®è¾“å‡ºåŽ‹ç¼©å›¾ç‰‡çš„æ–‡ä»¶åã€‚å¦‚æžœä¸è®¾ç½®ï¼Œåˆ™é»˜è®¤åŽç¼€ä¸º -fs8.png æˆ– -or8.pngã€‚å¦‚æžœä½¿ç”¨ --ext=.png --forceï¼Œå°†ä¼šä½¿ç”¨åŽŸæ–‡ä»¶åè¾“å‡ºå¹¶è¦†ç›–åŽŸæ–‡ä»¶ã€‚ -o out.png or --output out.png è®¾ç½®å›¾ç‰‡è¾“å‡ºè·¯å¾„ã€‚]]></content>
      <categories>
        <category>å‰ç«¯æž„å»º</category>
      </categories>
      <tags>
        <tag>å‰ç«¯æž„å»º</tag>
        <tag>å›¾ç‰‡åŽ‹ç¼©</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[git ssh-keyåŠå¤šå¸æˆ·è®¾ç½®]]></title>
    <url>%2F2015%2F09%2F30%2Fgit%20ssh-key%E5%8F%8A%E5%A4%9A%E5%B8%90%E6%88%B7%E8%AE%BE%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[åœ¨ä½¿ç”¨gitçš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ç®¡ç†è¿œç¨‹åˆ†æ”¯ä¹‹å‰éœ€è¦åœ¨æœ¬æœºä¸Šåˆ›å»ºssh-keyå¯†é’¥å¯¹ï¼Œå¹¶æŠŠå…¶ä¸­çš„å…¬é’¥æ·»åŠ åˆ°githubä¸­ã€‚ é¦–ä¸ªå¸æˆ·å¦‚æžœä½ åªä¼šåœ¨ä½ çš„è®¡ç®—æœºä½¿ç”¨ä¸€ä¸ªè¿œç¨‹çš„GitæœåŠ¡å™¨ï¼Œå¹¶ä¸”è´¦å·æ˜¯ä¸€ä¸ªï¼Œæ¯”è¾ƒç®€å•ï¼Œç”Ÿæˆkeyçš„æ—¶å€™ä¹Ÿæ²¡æœ‰å¤ªå¤§æ³¨æ„çš„åœ°æ–¹ï¼Œç›´æŽ¥è¿è¡Œå¦‚ä¸‹çš„ç¬¬ä¸€æ­¥ç„¶åŽæŒ‰å›žè½¦å°±å¯ä»¥äº† åœ¨ gitbashä¸Šè¿è¡Œ ssh-keygen -t rsa -C &quot;Githubè´¦æˆ·é‚®ç®±&quot; æŽ¥ä¸‹æ¥ä¼šæç¤ºè¾“å…¥keyçš„åå­— é»˜è®¤åå­—ä¸ºid_rsa ,é»˜è®¤ä¸æ”¹ç›´æŽ¥å›žè½¦å°±è¡Œäº† ç„¶åŽä¼šæç¤ºè¾“å…¥å£ä»¤ï¼Œè¿™é‡Œå£ä»¤ä¸ŽGithubä¸­çš„å¯†ç æ— å…³ï¼Œéšä¾¿è¾“å…¥å¯ä»¥ä¸ºç©ºï¼Œä¸ºç©ºç›´æŽ¥å›žè½¦ã€‚ å¦‚æžœåœ¨ç¬¬äºŒæ­¥ä¸­çš„æ²¡æœ‰é‡æ–°å‘½åçš„è¯ï¼Œåˆ™å¿½ç•¥æ­¤æ­¥éª¤ï¼Œssh agenté»˜è®¤åªè¯»å–id_rsaï¼Œä¸ºäº†è®©SSHè¯†åˆ«æ–°çš„ç§é’¥ï¼Œéœ€å°†å…¶æ·»åŠ åˆ°SSH agentä¸­,å¦‚ç¬¬äºŒæ­¥æ”¹çš„åå­—ä¸ºrobin, åˆ™æ‰§è¡Œï¼šssh-add id_rsaå¦‚æžœå‡ºçŽ°Could not open a connection to your authentication agentçš„é”™è¯¯ï¼Œå°±è¯•ç€å…ˆç”¨ä»¥ä¸‹å‘½ä»¤ï¼š ssh-agent bash ssh-add robin æ·»åŠ å®Œä¹‹åŽ ç™»é™†Github,ç‚¹å‡»ç½‘é¡µå³ä¸Šä¾§çš„ Settings æŒ‰é’® - é€‰æ‹© ssh-keys ç‚¹å‡»Add SSH Key ï¼Œåœ¨titleä¸­è¾“å…¥åå­—ï¼Œç„¶åŽå°†å…¬é’¥å³id_rsa.pubæ·»åŠ åˆ°ssh-keyå¤„ã€‚ æ‰§è¡Œ ssh -T git@github.com å¦‚æžœèƒ½æ­£å¸¸è®¿é—®å³å¯ $ ssh -T git@github.com Hi robin! You&apos;ve successfully authenticated, but GitHub does not provide shell access. ç¬¬äºŒä¸ªå¸æˆ· æ–°å»ºuser2çš„SSH Key$ cd ~/.ssh #åˆ‡æ¢åˆ°C:\Users\Administrator\.ssh ssh-keygen -t rsa -C &quot;user2çš„Githubè´¦æˆ·é‚®ç®±&quot; //æ–°å»ºå·¥ä½œçš„SSH key Enter file in which to save the key (/c/Users/Administrator/.ssh/id_rsa): user2 //è®¾ç½®åç§°ä¸ºuser2(åŽæ–‡çš„user2å¯ä»¥ç»Ÿä¸€æ›¿æ¢ä»»ä½•åˆ«å) æ–°å¯†é’¥æ·»åŠ åˆ°SSH agentä¸­ å› ä¸ºé»˜è®¤åªè¯»å–id_rsaï¼Œä¸ºäº†è®©SSHè¯†åˆ«æ–°çš„ç§é’¥ï¼Œéœ€å°†å…¶æ·»åŠ åˆ°SSH agentä¸­ï¼š ssh-add ~/.ssh/user2 //æ³¨æ„è·¯å¾„ï¼Œå¦‚æžœä¸åœ¨.sshç›®å½•ä¸‹åˆ™ä¸èƒ½çœç•¥ &apos;~/.ssh/&apos; åŒæ ·ï¼Œå¦‚æžœå‡ºçŽ°Could not open a connection to your authentication agentçš„é”™è¯¯ï¼Œå°±è¯•ç€ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š ssh-agent bash ssh-add ~/.ssh/user2 æ·»åŠ user2çš„å…¬é’¥ æ‰“å¼€æ–°ç”Ÿæˆçš„ ~/.ssh/uesr2.pubæ–‡ä»¶ï¼Œå°†é‡Œé¢çš„å†…å®¹æ·»åŠ åˆ°user2çš„githubå¸å·ä¸‹çš„SSH Keyä¸­ã€‚ ä¿®æ”¹configæ–‡ä»¶ (é‡è¦çš„ä¸€æ­¥) å°†è´¦æˆ·ä»¥åŠgitæœåŠ¡å™¨ä¸Žå¯¹åº”çš„å¯†é’¥å…³è”ã€‚åœ¨~/.sshç›®å½•ä¸‹æ‰¾åˆ°configæ–‡ä»¶ï¼Œå¦‚æžœæ²¡æœ‰å°±åˆ›å»ºï¼š touch config ç„¶åŽä¿®æ”¹å¦‚ä¸‹ï¼š æˆ‘çš„configé…ç½®å¦‚ä¸‹ï¼š # è¯¥æ–‡ä»¶ç”¨äºŽé…ç½®ç§é’¥å¯¹åº”çš„æœåŠ¡å™¨ # Default github user1 Host github.com HostName github.com User git IdentityFile ~/.ssh/id_rsa # second user2 # å»ºä¸€ä¸ªgithubåˆ«åï¼Œæ–°å»ºçš„å¸å·ä½¿ç”¨è¿™ä¸ªåˆ«ååšå…‹éš†å’Œæ›´æ–° Host user2 HostName github.com User git IdentityFile ~/.ssh/user2 å¸å·å…³è” å¦‚æžœä½ åªæ˜¯æ–‡ç« ä¸­æ‰€è¿°é…ç½®äº†Hostï¼Œé‚£ä¹ˆä½ å¤šä¸ªè´¦å·ä¸‹é¢çš„æäº¤ç”¨æˆ·ä¼šæ˜¯ä¸€ä¸ªäººï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡å‘½ä»¤ git config --global --unset user.email åˆ é™¤å…¨å±€ç”¨æˆ·è´¦æˆ·è®¾ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸åˆ é™¤ï¼Œå¦‚æžœæ¯ä¸ªgité¡¹ç›®ä¸‹æ²¡æœ‰å•ç‹¬è®¾ç½®ç”¨æˆ·å¸æˆ·ä¿¡æ¯çš„è¯ï¼Œä¼šé»˜è®¤ä½¿ç”¨å…¨å±€è®¾ç½® åœ¨æ¯ä¸€ä¸ªgité¡¹ç›®ä¸‹é¢ä½¿ç”¨å‘½ä»¤ git config --local user.name &apos;è¯¥é¡¹ç›®çš„githubç”¨æˆ·å&apos; git config --local user.email &apos;è¯¥é¡¹ç›®çš„githubé‚®ç®±@mail.com&apos; å•ç‹¬è®¾ç½®ç”¨æˆ·è´¦æˆ·ä¿¡æ¯ï¼Œæ¯ä¸ªä¸åŒäºŽå…¨å±€ç”¨æˆ·å¸æˆ·çš„git é¡¹ç›®éƒ½éœ€è¦è®¾ç½®ã€‚ å…³äºŽ clone ä½¿ç”¨ git clone user2:user2/test.git è€Œä¸æ˜¯ git clone git@github.com:user2/test.git å¦åˆ™æ— æ³•åˆ†è¾¨ä½¿ç”¨çš„æ˜¯å“ªä¸€ä¸ªå¸æˆ·ã€‚ å…³äºŽ remote å¦‚æžœclone é¡¹ç›®æ—¶ä½¿ç”¨çš„æ˜¯ git clone user2:user2/test.git åˆ™remote urlçš„Host å°±æ˜¯user2ï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ï¼Œå¦åˆ™éœ€è¦æ›´æ”¹ä¸€ä¸‹å…³è”ï¼ˆåŒ…æ‹¬git initæ–°å»ºï¼‰ï¼ŒæŸ¥çœ‹ remote git remote -v å¦‚æžœuser2çš„é¡¹ç›®remote.origin.url=git@github.com:user2/test.gitåˆ™éœ€è¦è¿›è¡Œä¿®æ”¹ git remote rm origin git remote add origin user2:user2/test.git æµ‹è¯•ï¼š$ ssh -T git@github.com Hi user1! You&apos;ve successfully authenticated, but GitHub does not provide shell access. $ ssh -T user2 Hi user2! You&apos;ve successfully authenticated, but GitHub does not provide shell access.]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç»´æŠ¤ä¸€ä¸ªæ–¹ä¾¿è‡ªå·±å¼€å‘çš„Lessåº“]]></title>
    <url>%2F2015%2F09%2F19%2F%E7%BB%B4%E6%8A%A4%E4%B8%80%E4%B8%AA%E6%96%B9%E4%BE%BF%E8%87%AA%E5%B7%B1%E5%BC%80%E5%8F%91%E7%9A%84Less%E5%BA%93%2F</url>
    <content type="text"><![CDATA[lessç”¨lesså¼€å‘çš„æ—¶å€™ï¼Œç»å¸¸ä¼šç”¨åˆ°ä¸€äº›é‡å¤ä½¿ç”¨çš„mixinsï¼Œå»ºä¸ªåº“è®°å½•ç»´æŠ¤èµ·æ¥ï¼Œæ–¹ä¾¿ä»¥åŽè‡ªå·±å¼€å‘çš„æ—¶å€™å¿«é€Ÿå¼•ç”¨ã€‚ ä¼ é€é—¨ï¼šless-lib ä¸»è¦åˆ†resetç±»å’Œæ¨¡å—å¤ç”¨ç±»]]></content>
      <categories>
        <category>less</category>
      </categories>
      <tags>
        <tag>less</tag>
      </tags>
  </entry>
</search>